/*!
 * CodeMirror v4.7.0 (http://codemirror.net)
 * Copyright 2014 Marijn Haverbeke <marijnh@gmail.com> and others
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
(function(b){if(typeof exports=="object"&&typeof module=="object"){module.exports=b()}else{if(typeof define=="function"&&define.amd){return define([],b)}else{this.CodeMirror=b()}}})(function(){var i2=/gecko\/\d/i.test(navigator.userAgent);var gC=/MSIE \d/.test(navigator.userAgent);var lU=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var hr=gC||lU;var jc=hr&&(gC?document.documentMode||6:lU[1]);var j3=/WebKit\//.test(navigator.userAgent);var jG=j3&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var lp=/Chrome\//.test(navigator.userAgent);var iW=/Opera\//.test(navigator.userAgent);var mH=/Apple Computer/.test(navigator.vendor);var f3=/KHTML\//.test(navigator.userAgent);var lE=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var gs=/PhantomJS/.test(navigator.userAgent);var hM=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var kg=hM||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var mk=hM||/Mac/.test(navigator.platform);var mw=/win/i.test(navigator.platform);var mh=iW&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(mh){mh=Number(mh[1])}if(mh&&mh>=15){iW=false;j3=true}var lG=mk&&(jG||iW&&(mh==null||mh<12.11));var gQ=i2||(hr&&jc>=9);var gL=false,f7=false;function kK(a,f){if(!(this instanceof kK)){return new kK(a,f)}this.options=f=f?my(f):{};my(hJ,f,false);jB(f);var b=f.value;if(typeof b=="string"){b=new lo(b,f.mode)}this.doc=b;var c=this.display=new gH(a,b);c.wrapper.CodeMirror=this;ik(this);kF(this);if(f.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(f.autofocus&&!kg){gZ(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new hO()};if(hr&&jc<11){setTimeout(iD(gy,this,true),20)}hl(this);kS();kW(this);this.curOp.forceUpdate=true;io(this,b);if((f.autofocus&&!kg)||jC()==c.input){setTimeout(iD(il,this),20)}else{mo(this)}for(var d in k6){if(k6.hasOwnProperty(d)){k6[d](this,f[d],jH)}}iK(this);for(var e=0;e<f6.length;++e){f6[e](this)}lL(this)}function gH(a,c){var b=this;var d=b.input=g7("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(j3){d.style.width="1000px"}else{d.setAttribute("wrap","off")}if(hM){d.style.border="1px solid black"}d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck","false");b.inputDiv=g7("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");b.scrollbarH=g7("div",[g7("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");b.scrollbarV=g7("div",[g7("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");b.scrollbarFiller=g7("div",null,"CodeMirror-scrollbar-filler");b.gutterFiller=g7("div",null,"CodeMirror-gutter-filler");b.lineDiv=g7("div",null,"CodeMirror-code");b.selectionDiv=g7("div",null,null,"position: relative; z-index: 1");b.cursorDiv=g7("div",null,"CodeMirror-cursors");b.measure=g7("div",null,"CodeMirror-measure");b.lineMeasure=g7("div",null,"CodeMirror-measure");b.lineSpace=g7("div",[b.measure,b.lineMeasure,b.selectionDiv,b.cursorDiv,b.lineDiv],null,"position: relative; outline: none");b.mover=g7("div",[g7("div",[b.lineSpace],"CodeMirror-lines")],null,"position: relative");b.sizer=g7("div",[b.mover],"CodeMirror-sizer");b.heightForcer=g7("div",null,null,"position: absolute; height: "+kM+"px; width: 1px;");b.gutters=g7("div",null,"CodeMirror-gutters");b.lineGutter=null;b.scroller=g7("div",[b.sizer,b.heightForcer,b.gutters],"CodeMirror-scroll");b.scroller.setAttribute("tabIndex","-1");b.wrapper=g7("div",[b.inputDiv,b.scrollbarH,b.scrollbarV,b.scrollbarFiller,b.gutterFiller,b.scroller],"CodeMirror");if(hr&&jc<8){b.gutters.style.zIndex=-1;b.scroller.style.paddingRight=0}if(hM){d.style.width="0px"}if(!j3){b.scroller.draggable=true}if(f3){b.inputDiv.style.height="1px";b.inputDiv.style.position="absolute"}if(hr&&jc<8){b.scrollbarH.style.minHeight=b.scrollbarV.style.minWidth="18px"}if(a.appendChild){a.appendChild(b.wrapper)}else{a(b.wrapper)}b.viewFrom=b.viewTo=c.first;b.view=[];b.externalMeasured=null;b.viewOffset=0;b.lastSizeC=0;b.updateLineNumbers=null;b.lineNumWidth=b.lineNumInnerWidth=b.lineNumChars=null;b.prevInput="";b.alignWidgets=false;b.pollingFast=false;b.poll=new hO();b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;b.inaccurateSelection=false;b.maxLine=null;b.maxLineLength=0;b.maxLineChanged=false;b.wheelDX=b.wheelDY=b.wheelStartX=b.wheelStartY=null;b.shift=false;b.selForContextMenu=null}function kl(a){a.doc.mode=kK.getMode(a.options,a.doc.modeOption);jV(a)}function jV(a){a.doc.iter(function(b){if(b.stateAfter){b.stateAfter=null}if(b.styles){b.styles=null}});a.doc.frontier=a.doc.first;kk(a,100);a.state.modeGen++;if(a.curOp){lV(a)}}function gK(a){if(a.options.lineWrapping){gm(a.display.wrapper,"CodeMirror-wrap");a.display.sizer.style.minWidth=""}else{jt(a.display.wrapper,"CodeMirror-wrap");jr(a)}jR(a);lV(a);lP(a);setTimeout(function(){hT(a)},100)}function f1(a){var c=mj(a.display),d=a.options.lineWrapping;var b=d&&Math.max(5,a.display.scroller.clientWidth/hC(a.display)-3);return function(f){if(gq(a.doc,f)){return 0}var g=0;if(f.widgets){for(var e=0;e<f.widgets.length;e++){if(f.widgets[e].height){g+=f.widgets[e].height}}}if(d){return g+(Math.ceil(f.text.length/b)||1)*c}else{return g+c}}}function jR(a){var b=a.doc,c=f1(a);b.iter(function(e){var d=c(e);if(d!=e.height){gY(e,d)}})}function gF(a){var b=hx[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"")}function kF(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");lP(a)}function hS(a){ik(a);lV(a);setTimeout(function(){gP(a)},20)}function ik(a){var f=a.display.gutters,b=a.options.gutters;iY(f);for(var e=0;e<b.length;++e){var d=b[e];var c=f.appendChild(g7("div",null,"CodeMirror-gutter "+d));if(d=="CodeMirror-linenumbers"){a.display.lineGutter=c;c.style.width=(a.display.lineNumWidth||1)+"px"}}f.style.display=e?"":"none";jP(a)}function jP(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function jS(d){if(d.height==0){return 0}var e=d.text.length,a,b=d;while(a=id(b)){var c=a.find(0,true);b=c.from.line;e+=c.from.ch-c.to.ch}b=d;while(a=g9(b)){var c=a.find(0,true);e-=b.text.length-c.from.ch;b=c.to.line;e+=b.text.length-c.to.ch}return e}function jr(a){var b=a.display,c=a.doc;b.maxLine=iT(c,c.first);b.maxLineLength=jS(b.maxLine);b.maxLineChanged=true;c.iter(function(d){var e=jS(d);if(e>b.maxLineLength){b.maxLineLength=e;b.maxLine=d}})}function jB(a){var b=ic(a.gutters,"CodeMirror-linenumbers");if(b==-1&&a.lineNumbers){a.gutters=a.gutters.concat(["CodeMirror-linenumbers"])}else{if(b>-1&&!a.lineNumbers){a.gutters=a.gutters.slice(0);a.gutters.splice(b,1)}}}function kz(a){return a.display.scroller.clientHeight-a.display.wrapper.clientHeight<kM-3}function hI(b){var a=b.display.scroller;return{clientHeight:a.clientHeight,barHeight:b.display.scrollbarV.clientHeight,scrollWidth:a.scrollWidth,clientWidth:a.clientWidth,hScrollbarTakesSpace:kz(b),barWidth:b.display.scrollbarH.clientWidth,docHeight:Math.round(b.doc.height+lW(b.display))}}function hT(b,i){if(!i){i=hI(b)}var e=b.display,h=je(e.measure);var a=i.docHeight+kM;var g=i.scrollWidth>i.clientWidth;if(g&&i.scrollWidth<=i.clientWidth+1&&h>0&&!i.hScrollbarTakesSpace){g=false}var f=a>i.clientHeight;if(f){e.scrollbarV.style.display="block";e.scrollbarV.style.bottom=g?h+"px":"0";e.scrollbarV.firstChild.style.height=Math.max(0,a-i.clientHeight+(i.barHeight||e.scrollbarV.clientHeight))+"px"}else{e.scrollbarV.style.display="";e.scrollbarV.firstChild.style.height="0"}if(g){e.scrollbarH.style.display="block";e.scrollbarH.style.right=f?h+"px":"0";e.scrollbarH.firstChild.style.width=(i.scrollWidth-i.clientWidth+(i.barWidth||e.scrollbarH.clientWidth))+"px"}else{e.scrollbarH.style.display="";e.scrollbarH.firstChild.style.width="0"}if(g&&f){e.scrollbarFiller.style.display="block";e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=h+"px"}else{e.scrollbarFiller.style.display=""}if(g&&b.options.coverGutterNextToScrollbar&&b.options.fixedGutter){e.gutterFiller.style.display="block";e.gutterFiller.style.height=h+"px";e.gutterFiller.style.width=e.gutters.offsetWidth+"px"}else{e.gutterFiller.style.display=""}if(!b.state.checkedOverlayScrollbar&&i.clientHeight>0){if(h===0){var c=mk&&!lE?"12px":"18px";e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=c;var d=function(j){if(kA(j)!=e.scrollbarV&&kA(j)!=e.scrollbarH){jX(b,hd)(j)}};ll(e.scrollbarV,"mousedown",d);ll(e.scrollbarH,"mousedown",d)}b.state.checkedOverlayScrollbar=true}}function ml(f,b,g){var e=g&&g.top!=null?Math.max(0,g.top):f.scroller.scrollTop;e=Math.floor(e-hB(f));var i=g&&g.bottom!=null?g.bottom:e+f.wrapper.clientHeight;var d=l1(b,e),c=l1(b,i);if(g&&g.ensure){var h=g.ensure.from.line,a=g.ensure.to.line;if(h<d){return{from:h,to:l1(b,lO(iT(b,h))+f.wrapper.clientHeight)}}if(Math.min(a,b.lastLine())>=c){return{from:l1(b,lO(iT(b,a))-f.wrapper.clientHeight),to:a}}}return{from:d,to:Math.max(c,d+1)}}function gP(a){var c=a.display,b=c.view;if(!c.alignWidgets&&(!c.gutters.firstChild||!a.options.fixedGutter)){return}var e=jd(c)-c.scroller.scrollLeft+a.doc.scrollLeft;var i=c.gutters.offsetWidth,h=e+"px";for(var f=0;f<b.length;f++){if(!b[f].hidden){if(a.options.fixedGutter&&b[f].gutter){b[f].gutter.style.left=h}var d=b[f].alignable;if(d){for(var g=0;g<d.length;g++){d[g].style.left=h}}}}if(a.options.fixedGutter){c.gutters.style.left=(e+i)+"px"}}function iK(a){if(!a.options.lineNumbers){return false}var c=a.doc,g=hf(a.options,c.first+c.size-1),d=a.display;if(g.length!=d.lineNumChars){var b=d.measure.appendChild(g7("div",[g7("div",g)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var f=b.firstChild.offsetWidth,e=b.offsetWidth-f;d.lineGutter.style.width="";d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-e);d.lineNumWidth=d.lineNumInnerWidth+e;d.lineNumChars=d.lineNumInnerWidth?g.length:-1;d.lineGutter.style.width=d.lineNumWidth+"px";jP(a);return true}return false}function hf(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function jd(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function mC(d,a,c){var b=d.display;this.viewport=a;this.visible=ml(b,d.doc,a);this.editorIsHidden=!b.wrapper.offsetWidth;this.wrapperHeight=b.wrapper.clientHeight;this.oldViewFrom=b.viewFrom;this.oldViewTo=b.viewTo;this.oldScrollerWidth=b.scroller.clientWidth;this.force=c;this.dims=i3(d)}function k2(j,f){var e=j.display,a=j.doc;if(f.editorIsHidden){g5(j);return false}if(!f.force&&f.visible.from>=e.viewFrom&&f.visible.to<=e.viewTo&&(e.updateLineNumbers==null||e.updateLineNumbers>=e.viewTo)&&ls(j)==0){return false}if(iK(j)){g5(j);f.dims=i3(j)}var g=a.first+a.size;var c=Math.max(f.visible.from-j.options.viewportMargin,a.first);var b=Math.min(g,f.visible.to+j.options.viewportMargin);if(e.viewFrom<c&&c-e.viewFrom<20){c=Math.max(a.first,e.viewFrom)}if(e.viewTo>b&&e.viewTo-b<20){b=Math.min(g,e.viewTo)}if(f7){c=mm(j.doc,c);b=iS(j.doc,b)}var h=c!=e.viewFrom||b!=e.viewTo||e.lastSizeC!=f.wrapperHeight;kw(j,c,b);e.viewOffset=lO(iT(j.doc,e.viewFrom));j.display.mover.style.top=e.viewOffset+"px";var i=ls(j);if(!h&&i==0&&!f.force&&(e.updateLineNumbers==null||e.updateLineNumbers>=e.viewTo)){return false}var d=jC();if(i>4){e.lineDiv.style.display="none"}ja(j,e.updateLineNumbers,f.dims);if(i>4){e.lineDiv.style.display=""}if(d&&jC()!=d&&d.offsetHeight){d.focus()}iY(e.cursorDiv);iY(e.selectionDiv);if(h){e.lastSizeC=f.wrapperHeight;kk(j,400)}e.updateLineNumbers=null;return true}function ji(f,b){var d=b.force,a=b.viewport;for(var c=true;;c=false){if(c&&f.options.lineWrapping&&b.oldScrollerWidth!=f.display.scroller.clientWidth){d=true}else{d=false;if(a&&a.top!=null){a={top:Math.min(f.doc.height+lW(f.display)-kM-f.display.scroller.clientHeight,a.top)}}b.visible=ml(f.display,f.doc,a);if(b.visible.from>=f.display.viewFrom&&b.visible.to<=f.display.viewTo){break}}if(!k2(f,b)){break}f5(f);var e=hI(f);l8(f);hL(f,e);hT(f,e)}l0(f,"update",f);if(f.display.viewFrom!=b.oldViewFrom||f.display.viewTo!=b.oldViewTo){l0(f,"viewportChange",f,f.display.viewFrom,f.display.viewTo)}}function jp(d,a){var b=new mC(d,a);if(k2(d,b)){f5(d);ji(d,b);var c=hI(d);l8(d);hL(d,c);hT(d,c)}}function hL(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-kM)+"px"}function g0(a,b){if(a.display.sizer.offsetWidth+a.display.gutters.offsetWidth<a.display.scroller.clientWidth-1){a.display.sizer.style.minHeight=a.display.heightForcer.style.top="0px";a.display.gutters.style.height=b.docHeight+"px"}}function f5(b){var d=b.display;var h=d.lineDiv.offsetTop;for(var g=0;g<d.view.length;g++){var a=d.view[g],j;if(a.hidden){continue}if(hr&&jc<8){var e=a.node.offsetTop+a.node.offsetHeight;j=e-h;h=e}else{var f=a.node.getBoundingClientRect();j=f.bottom-f.top}var c=a.line.height-j;if(j<2){j=mj(d)}if(c>0.001||c<-0.001){gY(a.line,j);mb(a.line);if(a.rest){for(var i=0;i<a.rest.length;i++){mb(a.rest[i])}}}}}function mb(a){if(a.widgets){for(var b=0;b<a.widgets.length;++b){a.widgets[b].height=a.widgets[b].node.offsetHeight}}}function i3(a){var c=a.display,e={},f={};var d=c.gutters.clientLeft;for(var b=c.gutters.firstChild,g=0;b;b=b.nextSibling,++g){e[a.options.gutters[g]]=b.offsetLeft+b.clientLeft+d;f[a.options.gutters[g]]=b.clientWidth}return{fixedPos:jd(c),gutterTotalWidth:c.gutters.offsetWidth,gutterLeft:e,gutterWidth:f,wrapperWidth:c.wrapper.clientWidth}}function ja(l,g,m){var b=l.display,j=l.options.lineNumbers;var i=b.lineDiv,k=i.firstChild;function c(o){var p=o.nextSibling;if(j3&&mk&&l.display.currentWheelTarget==o){o.style.display="none"}else{o.parentNode.removeChild(o)}return p}var a=b.view,d=b.viewFrom;for(var f=0;f<a.length;f++){var e=a[f];if(e.hidden){}else{if(!e.node){var h=mF(l,e,d,m);i.insertBefore(h,k)}else{while(k!=e.node){k=c(k)}var n=j&&g!=null&&g<=d&&e.lineNumber;if(e.changes){if(ic(e.changes,"gutter")>-1){n=false}l7(l,e,d,m)}if(n){iY(e.lineNumber);e.lineNumber.appendChild(document.createTextNode(hf(l.options,d)))}k=e.node.nextSibling}}d+=e.size}while(k){k=c(k)}}function l7(a,e,c,b){for(var f=0;f<e.changes.length;f++){var d=e.changes[f];if(d=="text"){ix(a,e)}else{if(d=="gutter"){lg(a,e,c,b)}else{if(d=="class"){hw(e)}else{if(d=="widget"){lH(e,b)}}}}}e.changes=null}function ge(a){if(a.node==a.text){a.node=g7("div",null,null,"position: relative");if(a.text.parentNode){a.text.parentNode.replaceChild(a.node,a.text)}a.node.appendChild(a.text);if(hr&&jc<8){a.node.style.zIndex=2}}return a.node}function ha(c){var a=c.bgClass?c.bgClass+" "+(c.line.bgClass||""):c.line.bgClass;if(a){a+=" CodeMirror-linebackground"}if(c.background){if(a){c.background.className=a}else{c.background.parentNode.removeChild(c.background);c.background=null}}else{if(a){var b=ge(c);c.background=b.insertBefore(g7("div",null,a),b.firstChild)}}}function jj(a,c){var b=a.display.externalMeasured;if(b&&b.line==c.line){a.display.externalMeasured=null;c.measure=b.measure;return b.built}return h6(a,c)}function ix(a,b){var d=b.text.className;var c=jj(a,b);if(b.text==b.node){b.node=c.pre}b.text.parentNode.replaceChild(c.pre,b.text);b.text=c.pre;if(c.bgClass!=b.bgClass||c.textClass!=b.textClass){b.bgClass=c.bgClass;b.textClass=c.textClass;hw(b)}else{if(d){b.text.className=d}}}function hw(b){ha(b);if(b.line.wrapClass){ge(b).className=b.line.wrapClass}else{if(b.node!=b.text){b.node.className=""}}var a=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=a||""}function lg(a,c,d,b){if(c.gutter){c.node.removeChild(c.gutter);c.gutter=null}var f=c.line.gutterMarkers;if(a.options.lineNumbers||f){var h=ge(c);var e=c.gutter=h.insertBefore(g7("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?b.fixedPos:-b.gutterTotalWidth)+"px"),c.text);if(a.options.lineNumbers&&(!f||!f["CodeMirror-linenumbers"])){c.lineNumber=e.appendChild(g7("div",hf(a.options,d),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+b.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))}if(f){for(var g=0;g<a.options.gutters.length;++g){var i=a.options.gutters[g],j=f.hasOwnProperty(i)&&f[i];if(j){e.appendChild(g7("div",[j],"CodeMirror-gutter-elt","left: "+b.gutterLeft[i]+"px; width: "+b.gutterWidth[i]+"px"))}}}}}function lH(a,b){if(a.alignable){a.alignable=null}for(var c=a.node.firstChild,d;c;c=d){var d=c.nextSibling;if(c.className=="CodeMirror-linewidget"){a.node.removeChild(c)}}gt(a,b)}function mF(a,d,c,b){var e=jj(a,d);d.text=d.node=e.pre;if(e.bgClass){d.bgClass=e.bgClass}if(e.textClass){d.textClass=e.textClass}hw(d);lg(a,d,c,b);gt(d,b);return d.node}function gt(c,b){gX(c.line,c,b,true);if(c.rest){for(var a=0;a<c.rest.length;a++){gX(c.rest[a],c,b,false)}}}function gX(a,d,b,f){if(!a.widgets){return}var i=ge(d);for(var g=0,c=a.widgets;g<c.length;++g){var e=c[g],h=g7("div",[e.node],"CodeMirror-linewidget");if(!e.handleMouseEvents){h.ignoreEvents=true}l2(e,h,d,b);if(f&&e.above){i.insertBefore(h,d.gutter||d.text)}else{i.appendChild(h)}l0(e,"redraw")}}function l2(c,d,a,b){if(c.noHScroll){(a.alignable||(a.alignable=[])).push(d);var e=b.wrapperWidth;d.style.left=b.fixedPos+"px";if(!c.coverGutter){e-=b.gutterTotalWidth;d.style.paddingLeft=b.gutterTotalWidth+"px"}d.style.width=e+"px"}if(c.coverGutter){d.style.zIndex=5;d.style.position="relative";if(!c.noHScroll){d.style.marginLeft=-b.gutterTotalWidth+"px"}}}var jU=kK.Pos=function(a,b){if(!(this instanceof jU)){return new jU(a,b)}this.line=a;this.ch=b};var jx=kK.cmpPos=function(b,a){return b.line-a.line||b.ch-a.ch};function jm(a){return jU(a.line,a.ch)}function jW(b,a){return jx(b,a)<0?a:b}function ly(b,a){return jx(b,a)<0?b:a}function g4(a,b){this.ranges=a;this.primIndex=b}g4.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this){return true}if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length){return false}for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c],b=a.ranges[c];if(jx(d.anchor,b.anchor)!=0||jx(d.head,b.head)!=0){return false}}return true},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++){a[b]=new i9(jm(this.ranges[b].anchor),jm(this.ranges[b].head))}return new g4(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++){if(!this.ranges[a].empty()){return true}}return false},contains:function(b,a){if(!a){a=b}for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(jx(a,d.from())>=0&&jx(b,d.to())<=0){return c}}return -1}};function i9(a,b){this.anchor=a;this.head=b}i9.prototype={from:function(){return ly(this.anchor,this.head)},to:function(){return jW(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function iB(i,b){var g=i[b];i.sort(function(j,k){return jx(j.from(),k.from())});b=ic(i,g);for(var e=1;e<i.length;e++){var a=i[e],h=i[e-1];if(jx(h.to(),a.from())>=0){var d=ly(h.from(),a.from()),c=jW(h.to(),a.to());var f=h.empty()?a.from()==a.head:h.from()==h.head;if(e<=b){--b}i.splice(--e,2,new i9(f?c:d,f?d:c))}}return new g4(i,b)}function h4(a,b){return new g4([new i9(a,b||a)],0)}function jM(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function gd(c,b){if(b.line<c.first){return jU(c.first,0)}var a=c.first+c.size-1;if(b.line>a){return jU(a,iT(c,a).text.length)}return gu(b,iT(c,b.line).text.length)}function gu(b,c){var a=b.ch;if(a==null||a>c){return jU(b.line,c)}else{if(a<0){return jU(b.line,0)}else{return b}}}function mg(b,a){return a>=b.first&&a<b.first+b.size}function i6(c,b){for(var a=[],d=0;d<b.length;d++){a[d]=gd(c,b[d])}return a}function gr(b,f,c,a){if(b.cm&&b.cm.display.shift||b.extend){var d=f.anchor;if(a){var e=jx(c,d)<0;if(e!=(jx(a,d)<0)){d=c;c=a}else{if(e!=(jx(c,a)<0)){c=a}}}return new i9(d,c)}else{return new i9(a||c,c)}}function hc(b,c,a,d){lu(b,new g4([gr(b,b.sel.primary(),c,a)],0),d)}function lf(b,c,e){for(var f=[],d=0;d<b.sel.ranges.length;d++){f[d]=gr(b,b.sel.ranges[d],c[d],null)}var a=iB(f,b.sel.primIndex);lu(b,a,e)}function jw(b,c,e,d){var a=b.sel.ranges.slice(0);a[c]=e;lu(b,iB(a,b.sel.primIndex),d)}function kP(b,d,c,a){lu(b,h4(d,c),a)}function jD(b,a){var c={ranges:a.ranges,update:function(e){this.ranges=[];for(var d=0;d<e.length;d++){this.ranges[d]=new i9(gd(b,e[d].anchor),gd(b,e[d].head))}}};mG(b,"beforeSelectionChange",b,c);if(b.cm){mG(b.cm,"beforeSelectionChange",b.cm,c)}if(c.ranges!=a.ranges){return iB(c.ranges,c.ranges.length-1)}else{return a}}function hD(b,c,e){var a=b.history.done,d=gf(a);if(d&&d.ranges){a[a.length-1]=c;hk(b,c,e)}else{lu(b,c,e)}}function lu(b,c,a){hk(b,c,a);gM(b,b.sel,b.cm?b.cm.curOp.id:NaN,a)}function hk(b,c,d){if(iH(b,"beforeSelectionChange")||b.cm&&iH(b.cm,"beforeSelectionChange")){c=jD(b,c)}var a=d&&d.bias||(jx(c.primary().head,b.sel.primary().head)<0?-1:1);lx(b,i1(b,c,a,true));if(!(d&&d.scroll===false)&&b.cm){gg(b.cm)}}function lx(b,a){if(a.equals(b.sel)){return}b.sel=a;if(b.cm){b.cm.curOp.updateInput=b.cm.curOp.selectionChanged=true;jY(b.cm)}l0(b,"cursorActivity",b)}function g3(a){lx(a,i1(a,a.sel,null,false),jN)}function i1(a,i,d,c){var g;for(var f=0;f<i.ranges.length;f++){var e=i.ranges[f];var b=lr(a,e.anchor,d,c);var h=lr(a,e.head,d,c);if(g||b!=e.anchor||h!=e.head){if(!g){g=i.ranges.slice(0,f)}g[f]=new i9(b,h)}}return g?iB(g,i.primIndex):i}function lr(l,a,d,c){var k=false,g=a;var f=d||1;l.cantEdit=false;search:for(;;){var j=iT(l,g.line);if(j.markedSpans){for(var e=0;e<j.markedSpans.length;++e){var i=j.markedSpans[e],h=i.marker;if((i.from==null||(h.inclusiveLeft?i.from<=g.ch:i.from<g.ch))&&(i.to==null||(h.inclusiveRight?i.to>=g.ch:i.to>g.ch))){if(c){mG(h,"beforeCursorEnter");if(h.explicitlyCleared){if(!j.markedSpans){break}else{--e;continue}}}if(!h.atomic){continue}var b=h.find(f<0?-1:1);if(jx(b,g)==0){b.ch+=f;if(b.ch<0){if(b.line>l.first){b=gd(l,jU(b.line-1))}else{b=null}}else{if(b.ch>j.text.length){if(b.line<l.first+l.size-1){b=jU(b.line+1,0)}else{b=null}}}if(!b){if(k){if(!c){return lr(l,a,d,true)}l.cantEdit=true;return jU(l.first,0)}k=true;b=a;f=-f}}g=b;continue search}}}return g}}function kE(k){var c=k.display,l=k.doc,j={};var a=j.cursors=document.createDocumentFragment();var g=j.selection=document.createDocumentFragment();for(var e=0;e<l.sel.ranges.length;e++){var d=l.sel.ranges[e];var f=d.empty();if(f||k.options.showCursorWhenSelecting){k7(k,d,a)}if(!f){l6(k,d,g)}}if(k.options.moveInputWithCursor){var b=jl(k,l.sel.primary().head,"div");var i=c.wrapper.getBoundingClientRect(),h=c.lineDiv.getBoundingClientRect();j.teTop=Math.max(0,Math.min(c.wrapper.clientHeight-10,b.top+h.top-i.top));j.teLeft=Math.max(0,Math.min(c.wrapper.clientWidth-10,b.left+h.left-i.left))}return j}function lN(a,b){lC(a.display.cursorDiv,b.cursors);lC(a.display.selectionDiv,b.selection);if(b.teTop!=null){a.display.inputDiv.style.top=b.teTop+"px";a.display.inputDiv.style.left=b.teLeft+"px"}}function l8(a){lN(a,kE(a))}function k7(a,d,e){var b=jl(a,d.head,"div",null,null,!a.options.singleCursorHeightPerLine);var c=e.appendChild(g7("div","\u00a0","CodeMirror-cursor"));c.style.left=b.left+"px";c.style.top=b.top+"px";c.style.height=Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";if(b.other){var f=e.appendChild(g7("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="";f.style.left=b.other.left+"px";f.style.top=b.other.top+"px";f.style.height=(b.other.bottom-b.other.top)*0.85+"px"}}function l6(e,q,d){var n=e.display,j=e.doc;var i=document.createDocumentFragment();var r=hG(e.display),f=r.left,m=n.lineSpace.offsetWidth-r.right;function p(t,u,v,s){if(u<0){u=0}u=Math.round(u);s=Math.round(s);i.appendChild(g7("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+u+"px; width: "+(v==null?m-t:v)+"px; height: "+(s-u)+"px"))}function h(z,x,u){var y=iT(j,z);var w=y.text.length;var t,s;function v(A,B){return kU(e,jU(z,A),"div",y,B)}iL(jJ(y),x||0,u==null?w:u,function(E,F,D){var A=v(E,"left"),H,G,B;if(E==F){H=A;G=B=A.left}else{H=v(F-1,"right");if(D=="rtl"){var C=A;A=H;H=C}G=A.left;B=H.right}if(x==null&&E==0){G=f}if(H.top-A.top>3){p(G,A.top,null,A.bottom);G=f;if(A.bottom<H.top){p(G,A.bottom,null,H.top)}}if(u==null&&F==w){B=m}if(!t||A.top<t.top||A.top==t.top&&A.left<t.left){t=A}if(!s||H.bottom>s.bottom||H.bottom==s.bottom&&H.right>s.right){s=H}if(G<f+1){G=f}p(G,H.top,B-G,H.bottom)});return{start:t,end:s}}var k=q.from(),l=q.to();if(k.line==l.line){h(k.line,k.ch,l.ch)}else{var g=iT(j,k.line),b=iT(j,l.line);var c=ij(g)==ij(b);var a=h(k.line,k.ch,c?g.text.length+1:null).end;var o=h(l.line,c?0:null,l.ch).start;if(c){if(a.top<o.top-2){p(a.right,a.top,null,a.bottom);p(f,o.top,o.left,o.bottom)}else{p(a.right,a.top,o.left-a.right,a.bottom)}}if(a.bottom<o.top){p(f,a.bottom,null,o.top)}}d.appendChild(i)}function i0(a){if(!a.state.focused){return}var b=a.display;clearInterval(b.blinker);var c=true;b.cursorDiv.style.visibility="";if(a.options.cursorBlinkRate>0){b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}else{if(a.options.cursorBlinkRate<0){b.cursorDiv.style.visibility="hidden"}}}function kk(a,b){if(a.doc.mode.startState&&a.doc.frontier<a.display.viewTo){a.state.highlight.set(b,iD(kB,a))}}function kB(a){var b=a.doc;if(b.frontier<b.first){b.frontier=b.first}if(b.frontier>=a.display.viewTo){return}var d=+new Date+a.options.workTime;var c=ms(b.mode,hH(a,b.frontier));var e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(i){if(b.frontier>=a.display.viewFrom){var f=i.styles;var k=gn(a,i,c,true);i.styles=k.styles;var g=i.styleClasses,l=k.classes;if(l){i.styleClasses=l}else{if(g){i.styleClasses=null}}var j=!f||f.length!=i.styles.length||g!=l&&(!g||!l||g.bgClass!=l.bgClass||g.textClass!=l.textClass);for(var h=0;!j&&h<f.length;++h){j=f[h]!=i.styles[h]}if(j){e.push(b.frontier)}i.stateAfter=ms(b.mode,c)}else{hR(a,i.text,c);i.stateAfter=b.frontier%5==0?ms(b.mode,c):null}++b.frontier;if(+new Date>d){kk(a,a.options.workDelay);return true}});if(e.length){kL(a,function(){for(var f=0;f<e.length;f++){kf(a,e[f],"text")}})}}function ir(c,i,f){var h,e,d=c.doc;var g=f?-1:i-(c.doc.mode.innerMode?1000:100);for(var j=i;j>g;--j){if(j<=d.first){return d.first}var a=iT(d,j-1);if(a.stateAfter&&(!f||j<=d.frontier)){return j}var b=lw(a.text,null,c.options.tabSize);if(e==null||h>b){e=j-1;h=b}}return e}function hH(a,b,g){var d=a.doc,e=a.display;if(!d.mode.startState){return true}var c=ir(a,b,g),f=c>d.first&&iT(d,c-1).stateAfter;if(!f){f=le(d.mode)}else{f=ms(d.mode,f)}d.iter(c,b,function(i){hR(a,i.text,f);var h=c==b-1||c%5==0||c>=e.viewFrom&&c<e.viewTo;i.stateAfter=h?ms(d.mode,f):null;++c});if(g){d.frontier=c}return f}function hB(a){return a.lineSpace.offsetTop}function lW(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function hG(b){if(b.cachedPaddingH){return b.cachedPaddingH}var c=lC(b.measure,g7("pre","x"));var a=window.getComputedStyle?window.getComputedStyle(c):c.currentStyle;var d={left:parseInt(a.paddingLeft),right:parseInt(a.paddingRight)};if(!isNaN(d.left)&&!isNaN(d.right)){b.cachedPaddingH=d}return d}function jo(b,f,c){var g=b.options.lineWrapping;var e=g&&b.display.scroller.clientWidth;if(!f.measure.heights||g&&f.measure.width!=e){var d=f.measure.heights=[];if(g){f.measure.width=e;var j=f.text.firstChild.getClientRects();for(var i=0;i<j.length-1;i++){var a=j[i],h=j[i+1];if(Math.abs(a.bottom-h.bottom)>2){d.push((a.bottom+h.top)/2-c.top)}}}d.push(c.bottom-c.top)}}function iO(c,a,b){if(c.line==a){return{map:c.measure.map,cache:c.measure.cache}}for(var d=0;d<c.rest.length;d++){if(c.rest[d]==a){return{map:c.measure.maps[d],cache:c.measure.caches[d]}}}for(var d=0;d<c.rest.length;d++){if(lM(c.rest[d])>b){return{map:c.measure.maps[d],cache:c.measure.caches[d],before:true}}}}function jZ(a,d){d=ij(d);var b=lM(d);var e=a.display.externalMeasured=new j4(a.doc,d,b);e.lineN=b;var c=e.built=h6(a,e);e.text=c.pre;lC(a.display.lineMeasure,c.pre);return e}function kc(a,d,b,c){return kZ(a,ga(a,d),b,c)}function hv(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo){return a.display.view[h1(a,b)]}var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size){return c}}function ga(a,d){var c=lM(d);var e=hv(a,c);if(e&&!e.text){e=null}else{if(e&&e.changes){l7(a,e,c,i3(a))}}if(!e){e=jZ(a,d)}var b=iO(e,d,c);return{line:d,view:e,rect:null,map:b.map,cache:b.cache,before:b.before,hasHeights:false}}function kZ(a,b,d,g,e){if(b.before){d=-1}var f=d+(g||""),c;if(b.cache.hasOwnProperty(f)){c=b.cache[f]}else{if(!b.rect){b.rect=b.view.text.getBoundingClientRect()}if(!b.hasHeights){jo(a,b.view,b.rect);b.hasHeights=true}c=jh(a,b,d,g);if(!c.bogus){b.cache[f]=c}}return{left:c.left,right:c.right,top:e?c.rtop:c.top,bottom:e?c.rbottom:c.bottom}}var gW={left:0,right:0,top:0,bottom:0};function jh(b,n,v,d){var j=n.map;var q,e,f,i;for(var o=0;o<j.length;o+=3){var l=j[o],p=j[o+1];if(v<l){e=0;f=1;i="left"}else{if(v<p){e=v-l;f=e+1}else{if(o==j.length-3||v==p&&j[o+3]>v){f=p-l;e=f-1;if(v>=p){i="right"}}}}if(e!=null){q=j[o+2];if(l==p&&d==(q.insertLeft?"left":"right")){i=d}if(d=="left"&&e==0){while(o&&j[o-2]==j[o-3]&&j[o-1].insertLeft){q=j[(o-=3)+2];i="left"}}if(d=="right"&&e==p-l){while(o<j.length-3&&j[o+3]==j[o+4]&&!j[o+5].insertLeft){q=j[(o+=3)+2];i="right"}}break}}var h;if(q.nodeType==3){for(var o=0;o<4;o++){while(e&&gx(n.line.text.charAt(l+e))){--e}while(l+f<p&&gx(n.line.text.charAt(l+f))){++f}if(hr&&jc<9&&e==0&&f==p-l){h=q.parentNode.getBoundingClientRect()}else{if(hr&&b.options.lineWrapping){var g=jb(q,e,f).getClientRects();if(g.length){h=g[d=="right"?g.length-1:0]}else{h=gW}}else{h=jb(q,e,f).getBoundingClientRect()||gW}}if(h.left||h.right||e==0){break}f=e;e=e-1;i="right"}if(hr&&jc<11){h=ie(b.display.measure,h)}}else{if(e>0){i=d="right"}var g;if(b.options.lineWrapping&&(g=q.getClientRects()).length>1){h=g[d=="right"?g.length-1:0]}else{h=q.getBoundingClientRect()}}if(hr&&jc<9&&!e&&(!h||!h.left&&!h.right)){var c=q.parentNode.getClientRects()[0];if(c){h={left:c.left,right:c.left+hC(b.display),top:c.top,bottom:c.bottom}}else{h=gW}}var s=h.top-n.rect.top,u=h.bottom-n.rect.top;var k=(s+u)/2;var m=n.view.measure.heights;for(var o=0;o<m.length-1;o++){if(k<m[o]){break}}var r=o?m[o-1]:0,t=m[o];var a={left:(i=="right"?h.right:h.left)-n.rect.left,right:(i=="left"?h.left:h.right)-n.rect.left,top:r,bottom:t};if(!h.left&&!h.right){a.bogus=true}if(!b.options.singleCursorHeightPerLine){a.rtop=s;a.rbottom=u}return a}function ie(c,b){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!mA(c)){return b}var d=screen.logicalXDPI/screen.deviceXDPI;var a=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*d,right:b.right*d,top:b.top*a,bottom:b.bottom*a}}function lm(b){if(b.measure){b.measure.cache={};b.measure.heights=null;if(b.rest){for(var a=0;a<b.rest.length;a++){b.measure.caches[a]={}}}}}function mx(a){a.display.externalMeasure=null;iY(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++){lm(a.display.view[b])}}function lP(a){mx(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;if(!a.options.lineWrapping){a.display.maxLineChanged=true}a.display.lineNumChars=null}function iJ(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function iR(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function h8(c,f,d,h){if(f.widgets){for(var g=0;g<f.widgets.length;++g){if(f.widgets[g].above){var a=kd(f.widgets[g]);d.top+=a;d.bottom+=a}}}if(h=="line"){return d}if(!h){h="local"}var e=lO(f);if(h=="local"){e+=hB(c.display)}else{e-=c.display.viewOffset}if(h=="page"||h=="window"){var i=c.display.lineSpace.getBoundingClientRect();e+=i.top+(h=="window"?0:iR());var b=i.left+(h=="window"?0:iJ());d.left+=b;d.right+=b}d.top+=e;d.bottom+=e;return d}function gG(g,d,f){if(f=="div"){return d}var b=d.left,c=d.top;if(f=="page"){b-=iJ();c-=iR()}else{if(f=="local"||!f){var e=g.display.sizer.getBoundingClientRect();b+=e.left;c+=e.top}}var a=g.display.lineSpace.getBoundingClientRect();return{left:b-a.left,top:c-a.top}}function kU(a,b,c,d,e){if(!d){d=iT(a.doc,b.line)}return h8(a,d,kc(a,d,b.ch,e),c)}function jl(l,a,g,c,j,b){c=c||iT(l.doc,a.line);if(!j){j=ga(l,c)}function e(m,n){var o=kZ(l,j,m,n?"right":"left",b);if(n){o.left=o.right}else{o.right=o.left}return h8(l,c,o,g)}function k(m,p){var o=d[p],n=o.level%2;if(m==hN(o)&&p&&o.level<d[p-1].level){o=d[--p];m=gI(o)-(o.level%2?0:1);n=true}else{if(m==gI(o)&&p<d.length-1&&o.level<d[p+1].level){o=d[++p];m=hN(o)-o.level%2;n=false}}if(n&&m==o.to&&m>o.from){return e(m-1)}return e(m,n)}var d=jJ(c),i=a.ch;if(!d){return e(i)}var h=mE(d,i);var f=k(i,h);if(hK!=null){f.other=k(i,hK)}return f}function hu(a,b){var c=0,b=gd(a.doc,b);if(!a.options.lineWrapping){c=hC(a.display)*b.ch}var e=iT(a.doc,b.line);var d=lO(e)+hB(a.display);return{left:c,right:c,top:d,bottom:d+e.height}}function g8(a,e,d,b){var c=jU(a,e);c.xRel=b;if(d){c.outside=true}return c}function hm(b,e,f){var c=b.doc;f+=b.display.viewOffset;if(f<0){return g8(c.first,0,true,-1)}var g=l1(c,f),a=c.first+c.size-1;if(g>a){return g8(c.first+c.size-1,iT(c,a).text.length,true,1)}if(e<0){e=0}var h=iT(c,g);for(;;){var j=j7(b,h,g,e,f);var d=g9(h);var i=d&&d.find(0,true);if(d&&(j.ch>i.from.ch||j.ch==i.from.ch&&j.xRel>0)){g=lM(h=i.to.line)}else{return j}}}function j7(x,g,u,v,w){var y=w-lO(g);var c=false,o=2*x.display.wrapper.clientWidth;var r=ga(x,g);function k(A){var z=jl(x,jU(u,A),"line",g,r);c=true;if(y>z.bottom){return z.left-o}else{if(y<z.top){return z.left+o}else{c=false}}return z.left}var s=jJ(g),p=g.text.length;var n=k4(g),f=kq(g);var q=k(n),j=c,h=k(f),d=c;if(v>h){return g8(u,f,d,1)}for(;;){if(s?f==n||f==iz(g,n,1):f-n<=1){var t=v<q||v-q<=h-v?n:f;var l=v-(t==n?q:h);while(gx(g.text.charAt(t))){++t}var a=g8(u,t,t==n?j:d,l<-1?-1:l>1?1:0);return a}var b=Math.ceil(p/2),i=n+b;if(s){i=n;for(var m=0;m<b;++m){i=iz(g,i,1)}}var e=k(i);if(e>v){f=i;h=e;if(d=c){h+=1000}p=b}else{n=i;q=e;j=c;p-=b}}}var mD;function mj(b){if(b.cachedTextHeight!=null){return b.cachedTextHeight}if(mD==null){mD=g7("pre");for(var c=0;c<49;++c){mD.appendChild(document.createTextNode("x"));mD.appendChild(g7("br"))}mD.appendChild(document.createTextNode("x"))}lC(b.measure,mD);var a=mD.offsetHeight/50;if(a>3){b.cachedTextHeight=a}iY(b.measure);return a||1}function hC(b){if(b.cachedCharWidth!=null){return b.cachedCharWidth}var a=g7("span","xxxxxxxxxx");var c=g7("pre",[a]);lC(b.measure,c);var d=a.getBoundingClientRect(),e=(d.right-d.left)/10;if(e>2){b.cachedCharWidth=e}return e||10}var kt=null;var iw=0;function kW(a){a.curOp={cm:a,viewChanged:false,startHeight:a.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++iw};if(kt){kt.ops.push(a.curOp)}else{a.curOp.ownsGroup=kt={ops:[a.curOp],delayedCallbacks:[]}}}function kn(c){var d=c.delayedCallbacks,e=0;do{for(;e<d.length;e++){d[e]()}for(var a=0;a<c.ops.length;a++){var b=c.ops[a];if(b.cursorActivityHandlers){while(b.cursorActivityCalled<b.cursorActivityHandlers.length){b.cursorActivityHandlers[b.cursorActivityCalled++](b.cm)}}}}while(e<d.length)}function lL(a){var b=a.curOp,c=b.ownsGroup;if(!c){return}try{kn(c)}finally{kt=null;for(var d=0;d<c.ops.length;d++){c.ops[d].cm.curOp=null}kQ(c)}}function kQ(b){var c=b.ops;for(var a=0;a<c.length;a++){mn(c[a])}for(var a=0;a<c.length;a++){lA(c[a])}for(var a=0;a<c.length;a++){mu(c[a])}for(var a=0;a<c.length;a++){lD(c[a])}for(var a=0;a<c.length;a++){hP(c[a])}}function mn(b){var a=b.cm,c=a.display;if(b.updateMaxLine){jr(a)}b.mustUpdate=b.viewChanged||b.forceUpdate||b.scrollTop!=null||b.scrollToPos&&(b.scrollToPos.from.line<c.viewFrom||b.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&a.options.lineWrapping;b.update=b.mustUpdate&&new mC(a,b.mustUpdate&&{top:b.scrollTop,ensure:b.scrollToPos},b.forceUpdate)}function lA(a){a.updatedDisplay=a.mustUpdate&&k2(a.cm,a.update)}function mu(b){var a=b.cm,c=a.display;if(b.updatedDisplay){f5(a)}b.barMeasure=hI(a);if(c.maxLineChanged&&!a.options.lineWrapping){b.adjustWidthTo=kc(a,c.maxLine,c.maxLine.text.length).left+3;b.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+b.adjustWidthTo+kM-c.scroller.clientWidth)}if(b.updatedDisplay||b.selectionChanged){b.newSelectionNodes=kE(a)}}function lD(b){var a=b.cm;if(b.adjustWidthTo!=null){a.display.sizer.style.minWidth=b.adjustWidthTo+"px";if(b.maxScrollLeft<a.doc.scrollLeft){l5(a,Math.min(a.display.scroller.scrollLeft,b.maxScrollLeft),true)}a.display.maxLineChanged=false}if(b.newSelectionNodes){lN(a,b.newSelectionNodes)}if(b.updatedDisplay){hL(a,b.barMeasure)}if(b.updatedDisplay||b.startHeight!=a.doc.height){hT(a,b.barMeasure)}if(b.selectionChanged){i0(a)}if(a.state.focused&&b.updateInput){gy(a,b.typing)}}function hP(f){var j=f.cm,d=j.display,a=j.doc;if(f.adjustWidthTo!=null&&Math.abs(f.barMeasure.scrollWidth-j.display.scroller.scrollWidth)>1){hT(j)}if(f.updatedDisplay){ji(j,f.update)}if(d.wheelStartX!=null&&(f.scrollTop!=null||f.scrollLeft!=null||f.scrollToPos)){d.wheelStartX=d.wheelStartY=null}if(f.scrollTop!=null&&(d.scroller.scrollTop!=f.scrollTop||f.forceScroll)){var c=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,f.scrollTop));d.scroller.scrollTop=d.scrollbarV.scrollTop=a.scrollTop=c}if(f.scrollLeft!=null&&(d.scroller.scrollLeft!=f.scrollLeft||f.forceScroll)){var h=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,f.scrollLeft));d.scroller.scrollLeft=d.scrollbarH.scrollLeft=a.scrollLeft=h;gP(j)}if(f.scrollToPos){var b=kV(j,gd(a,f.scrollToPos.from),gd(a,f.scrollToPos.to),f.scrollToPos.margin);if(f.scrollToPos.isCursor&&j.state.focused){iG(j,b)}}var e=f.maybeHiddenMarkers,i=f.maybeUnhiddenMarkers;if(e){for(var g=0;g<e.length;++g){if(!e[g].lines.length){mG(e[g],"hide")}}}if(i){for(var g=0;g<i.length;++g){if(i[g].lines.length){mG(i[g],"unhide")}}}if(d.wrapper.offsetHeight){a.scrollTop=j.display.scroller.scrollTop}if(f.updatedDisplay&&j3){if(j.options.lineWrapping){g0(j,f.barMeasure)}if(f.barMeasure.scrollWidth>f.barMeasure.clientWidth&&f.barMeasure.scrollWidth<f.barMeasure.clientWidth+1&&!kz(j)){hT(j)}}if(f.changeObjs){mG(j,"changes",j,f.changeObjs)}}function kL(a,b){if(a.curOp){return b()}kW(a);try{return b()}finally{lL(a)}}function jX(a,b){return function(){if(a.curOp){return b.apply(a,arguments)}kW(a);try{return b.apply(a,arguments)}finally{lL(a)}}}function lB(a){return function(){if(this.curOp){return a.apply(this,arguments)}kW(this);try{return a.apply(this,arguments)}finally{lL(this)}}}function k8(a){return function(){var b=this.cm;if(!b||b.curOp){return a.apply(this,arguments)}kW(b);try{return a.apply(this,arguments)}finally{lL(b)}}}function j4(b,a,c){this.line=a;this.rest=jn(a);this.size=this.rest?lM(gf(this.rest))-c+1:1;this.node=this.text=null;this.hidden=gq(b,a)}function hY(a,b,c){var d=[],f;for(var e=b;e<c;e=f){var g=new j4(a.doc,iT(a.doc,e),e);f=e+g.size;d.push(g)}return d}function lV(b,d,c,a){if(d==null){d=b.doc.first}if(c==null){c=b.doc.first+b.doc.size}if(!a){a=0}var g=b.display;if(a&&c<g.viewTo&&(g.updateLineNumbers==null||g.updateLineNumbers>d)){g.updateLineNumbers=d}b.curOp.viewChanged=true;if(d>=g.viewTo){if(f7&&mm(b.doc,d)<g.viewTo){g5(b)}}else{if(c<=g.viewFrom){if(f7&&iS(b.doc,c+a)>g.viewFrom){g5(b)}else{g.viewFrom+=a;g.viewTo+=a}}else{if(d<=g.viewFrom&&c>=g.viewTo){g5(b)}else{if(d<=g.viewFrom){var e=lj(b,c,c+a,1);if(e){g.view=g.view.slice(e.index);g.viewFrom=e.lineN;g.viewTo+=a}else{g5(b)}}else{if(c>=g.viewTo){var e=lj(b,d,d,-1);if(e){g.view=g.view.slice(0,e.index);g.viewTo=e.lineN}else{g5(b)}}else{var f=lj(b,d,d,-1);var h=lj(b,c,c+a,1);if(f&&h){g.view=g.view.slice(0,f.index).concat(hY(b,f.lineN,h.lineN)).concat(g.view.slice(h.index));g.viewTo+=a}else{g5(b)}}}}}}var i=g.externalMeasured;if(i){if(c<i.lineN){i.lineN+=a}else{if(d<i.lineN+i.size){g.externalMeasured=null}}}}function kf(g,f,c){g.curOp.viewChanged=true;var b=g.display,d=g.display.externalMeasured;if(d&&f>=d.lineN&&f<d.lineN+d.size){b.externalMeasured=null}if(f<b.viewFrom||f>=b.viewTo){return}var e=b.view[h1(g,f)];if(e.node==null){return}var a=e.changes||(e.changes=[]);if(ic(a,c)==-1){a.push(c)}}function g5(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function h1(a,b){if(b>=a.display.viewTo){return null}b-=a.display.viewFrom;if(b<0){return null}var d=a.display.view;for(var c=0;c<d.length;c++){b-=d[c].size;if(b<0){return c}}}function lj(a,g,e,h){var d=h1(a,g),b,c=a.display.view;if(!f7||e==a.doc.first+a.doc.size){return{index:d,lineN:e}}for(var f=0,i=a.display.viewFrom;f<d;f++){i+=c[f].size}if(i!=g){if(h>0){if(d==c.length-1){return null}b=(i+c[d].size)-g;d++}else{b=i-g}g+=b;e+=b}while(mm(a.doc,e)!=e){if(d==(h<0?0:c.length-1)){return null}e+=h*c[d-(h<0?1:0)].size;d+=h}return{index:d,lineN:e}}function kw(a,b,c){var d=a.display,e=d.view;if(e.length==0||b>=d.viewTo||c<=d.viewFrom){d.view=hY(a,b,c);d.viewFrom=b}else{if(d.viewFrom>b){d.view=hY(a,b,d.viewFrom).concat(d.view)}else{if(d.viewFrom<b){d.view=d.view.slice(h1(a,b))}}d.viewFrom=b;if(d.viewTo<c){d.view=d.view.concat(hY(a,d.viewTo,c))}else{if(d.viewTo>c){d.view=d.view.slice(0,h1(a,c))}}}d.viewTo=c}function ls(a){var e=a.display.view,b=0;for(var c=0;c<e.length;c++){var d=e[c];if(!d.hidden&&(!d.node||d.changes)){++b}}return b}function kC(a){if(a.display.pollingFast){return}a.display.poll.set(a.options.pollInterval,function(){js(a);if(a.state.focused){kC(a)}})}function k5(a){var c=false;a.display.pollingFast=true;function b(){var d=js(a);if(!d&&!c){c=true;a.display.poll.set(60,b)}else{a.display.pollingFast=false;kC(a)}}a.display.poll.set(20,b)}var kI=null;function js(e){var d=e.display.input,a=e.display.prevInput,j=e.doc;if(!e.state.focused||(ke(d)&&!a)||lR(e)||e.options.disableInput){return false}if(e.state.pasteIncoming&&e.state.fakedLastChar){d.value=d.value.substring(0,d.value.length-1);e.state.fakedLastChar=false}var b=d.value;if(b==a&&!e.somethingSelected()){return false}if(hr&&jc>=9&&e.display.inputHasSelection===b||mk&&/[\uf700-\uf7ff]/.test(b)){gy(e);return false}var n=!e.curOp;if(n){kW(e)}e.display.shift=false;if(b.charCodeAt(0)==8203&&j.sel==e.display.selForContextMenu&&!a){a="\u200b"}var o=0,r=Math.min(a.length,b.length);while(o<r&&a.charCodeAt(o)==b.charCodeAt(o)){++o}var h=b.slice(o),t=md(h);var k=null;if(e.state.pasteIncoming&&j.sel.ranges.length>1){if(kI&&kI.join("\n")==h){k=j.sel.ranges.length%kI.length==0&&lz(kI,md)}else{if(t.length==j.sel.ranges.length){k=lz(t,function(u){return[u]})}}}for(var m=j.sel.ranges.length-1;m>=0;m--){var s=j.sel.ranges[m];var q=s.from(),i=s.to();if(o<a.length){q=jU(q.line,q.ch-(a.length-o))}else{if(e.state.overwrite&&s.empty()&&!e.state.pasteIncoming){i=jU(i.line,Math.min(iT(j,i.line).text.length,i.ch+gf(t).length))}}var f=e.curOp.updateInput;var l={from:q,to:i,text:k?k[m%k.length]:t,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};k3(e.doc,l);l0(e,"inputRead",e,l);if(h&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&s.head.ch<100&&(!m||j.sel.ranges[m-1].head.line!=s.head.line)){var c=e.getModeAt(s.head);var g=kh(l);if(c.electricChars){for(var p=0;p<c.electricChars.length;p++){if(h.indexOf(c.electricChars.charAt(p))>-1){l3(e,g.line,"smart");break}}}else{if(c.electricInput){if(c.electricInput.test(iT(j,g.line).text.slice(0,g.ch))){l3(e,g.line,"smart")}}}}}gg(e);e.curOp.updateInput=f;e.curOp.typing=true;if(b.length>1000||b.indexOf("\n")>-1){d.value=e.display.prevInput=""}else{e.display.prevInput=b}if(n){lL(e)}e.state.pasteIncoming=e.state.cutIncoming=false;return true}function gy(a,d){var g,e,b=a.doc;if(a.somethingSelected()){a.display.prevInput="";var f=b.sel.primary();g=lt&&(f.to().line-f.from().line>100||(e=a.getSelection()).length>1000);var c=g?"-":e||a.getSelection();a.display.input.value=c;if(a.state.focused){jI(a.display.input)}if(hr&&jc>=9){a.display.inputHasSelection=c}}else{if(!d){a.display.prevInput=a.display.input.value="";if(hr&&jc>=9){a.display.inputHasSelection=null}}}a.display.inaccurateSelection=g}function gZ(a){if(a.options.readOnly!="nocursor"&&(!kg||jC()!=a.display.input)){a.display.input.focus()}}function iN(a){if(!a.state.focused){gZ(a);il(a)}}function lR(a){return a.options.readOnly||a.doc.cantEdit}function hl(a){var d=a.display;ll(d.scroller,"mousedown",jX(a,hd));if(hr&&jc<11){ll(d.scroller,"dblclick",jX(a,function(g){if(mt(a,g)){return}var f=i7(a,g);if(!f||i8(a,g)||f4(a.display,g)){return}k1(g);var h=a.findWordAt(f);hc(a.doc,h.anchor,h.head)}))}else{ll(d.scroller,"dblclick",function(f){mt(a,f)||k1(f)})}ll(d.lineSpace,"selectstart",function(f){if(!f4(d,f)){k1(f)}});if(!gQ){ll(d.scroller,"contextmenu",function(f){lc(a,f)})}ll(d.scroller,"scroll",function(){if(d.scroller.clientHeight){kv(a,d.scroller.scrollTop);l5(a,d.scroller.scrollLeft,true);mG(a,"scroll",a)}});ll(d.scrollbarV,"scroll",function(){if(d.scroller.clientHeight){kv(a,d.scrollbarV.scrollTop)}});ll(d.scrollbarH,"scroll",function(){if(d.scroller.clientHeight){l5(a,d.scrollbarH.scrollLeft)}});ll(d.scroller,"mousewheel",function(f){jF(a,f)});ll(d.scroller,"DOMMouseScroll",function(f){jF(a,f)});function b(){if(a.state.focused){setTimeout(iD(gZ,a),0)}}ll(d.scrollbarH,"mousedown",b);ll(d.scrollbarV,"mousedown",b);ll(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});ll(d.input,"keyup",function(f){kX.call(a,f)});ll(d.input,"input",function(){if(hr&&jc>=9&&a.display.inputHasSelection){a.display.inputHasSelection=null}k5(a)});ll(d.input,"keydown",jX(a,iV));ll(d.input,"keypress",jX(a,iy));ll(d.input,"focus",iD(il,a));ll(d.input,"blur",iD(mo,a));function e(f){if(!mt(a,f)){hh(f)}}if(a.options.dragDrop){ll(d.scroller,"dragstart",function(f){kj(a,f)});ll(d.scroller,"dragenter",e);ll(d.scroller,"dragover",e);ll(d.scroller,"drop",jX(a,kR))}ll(d.scroller,"paste",function(f){if(f4(d,f)){return}a.state.pasteIncoming=true;gZ(a);k5(a)});ll(d.input,"paste",function(){if(j3&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var f=d.input.selectionStart,g=d.input.selectionEnd;d.input.value+="$";d.input.selectionEnd=g;d.input.selectionStart=f;a.state.fakedLastChar=true}a.state.pasteIncoming=true;k5(a)});function c(k){if(a.somethingSelected()){kI=a.getSelections();if(d.inaccurateSelection){d.prevInput="";d.inaccurateSelection=false;d.input.value=kI.join("\n");jI(d.input)}}else{var j=[],h=[];for(var g=0;g<a.doc.sel.ranges.length;g++){var i=a.doc.sel.ranges[g].head.line;var f={anchor:jU(i,0),head:jU(i+1,0)};h.push(f);j.push(a.getRange(f.anchor,f.head))}if(k.type=="cut"){a.setSelections(h,null,jN)}else{d.prevInput="";d.input.value=j.join("\n");jI(d.input)}kI=j}if(k.type=="cut"){a.state.cutIncoming=true}}ll(d.input,"cut",c);ll(d.input,"copy",c);if(f3){ll(d.sizer,"mouseup",function(){if(jC()==d.input){d.input.blur()}gZ(a)})}}function mq(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;a.setSize()}function f4(c,a){for(var b=kA(a);b!=c.wrapper;b=b.parentNode){if(!b||b.ignoreEvents||b.parentNode==c.sizer&&b!=c.mover){return true}}}function i7(k,e,h,g){var c=k.display;if(!h){var d=kA(e);if(d==c.scrollbarH||d==c.scrollbarV||d==c.scrollbarFiller||d==c.gutterFiller){return null}}var l,b,i=c.lineSpace.getBoundingClientRect();try{l=e.clientX-i.left;b=e.clientY-i.top}catch(e){return null}var a=hm(k,l,b),j;if(g&&a.xRel==1&&(j=iT(k.doc,a.line).text).length==a.ch){var f=lw(j,j.length,k.options.tabSize)-j.length;a=jU(a.line,Math.max(0,Math.round((l-hG(k.display).left)/hC(k.display))-f))}return a}function hd(c){if(mt(this,c)){return}var a=this,d=a.display;d.shift=c.shiftKey;if(f4(d,c)){if(!j3){d.scroller.draggable=false;setTimeout(function(){d.scroller.draggable=true},100)}return}if(i8(a,c)){return}var b=i7(a,c);window.focus();switch(ho(c)){case 1:if(b){ld(a,c,b)}else{if(kA(c)==d.scroller){k1(c)}}break;case 2:if(j3){a.state.lastMiddleDown=+new Date}if(b){hc(a.doc,b)}setTimeout(iD(gZ,a),20);k1(c);break;case 3:if(gQ){lc(a,c)}break}}var h7,ln;function ld(g,c,b){setTimeout(iD(iN,g),0);var f=+new Date,e;if(ln&&ln.time>f-400&&jx(ln.pos,b)==0){e="triple"}else{if(h7&&h7.time>f-400&&jx(h7.pos,b)==0){e="double";ln={time:f,pos:b}}else{e="single";h7={time:f,pos:b}}}var d=g.doc.sel,a=mk?c.metaKey:c.ctrlKey;if(g.options.dragDrop&&gB&&!lR(g)&&e=="single"&&d.contains(b)>-1&&d.somethingSelected()){l9(g,c,b,a)}else{i5(g,c,b,e,a)}}function l9(e,c,b,f){var d=e.display;var a=jX(e,function(g){if(j3){d.scroller.draggable=false}e.state.draggingText=false;kr(document,"mouseup",a);kr(d.scroller,"drop",a);if(Math.abs(c.clientX-g.clientX)+Math.abs(c.clientY-g.clientY)<10){k1(g);if(!f){hc(e.doc,b)}gZ(e);if(hr&&jc==9){setTimeout(function(){document.body.focus();gZ(e)},20)}}});if(j3){d.scroller.draggable=true}e.state.draggingText=a;if(d.scroller.dragDrop){d.scroller.dragDrop()}ll(document,"mouseup",a);ll(d.scroller,"drop",a)}function i5(f,l,g,i,d){var o=f.display,j=f.doc;k1(l);var h,k,e=j.sel;if(d&&!l.shiftKey){k=j.sel.contains(g);if(k>-1){h=j.sel.ranges[k]}else{h=new i9(g,g)}}else{h=j.sel.primary()}if(l.altKey){i="rect";if(!d){h=new i9(g,g)}g=i7(f,l,true,true);k=-1}else{if(i=="double"){var n=f.findWordAt(g);if(f.display.shift||j.extend){h=gr(j,h,n.anchor,n.head)}else{h=n}}else{if(i=="triple"){var a=new i9(jU(g.line,0),gd(j,jU(g.line+1,0)));if(f.display.shift||j.extend){h=gr(j,h,a.anchor,a.head)}else{h=a}}else{h=gr(j,h,g)}}}if(!d){k=0;lu(j,new g4([h],0),ky);e=j.sel}else{if(k>-1){jw(j,k,h,ky)}else{k=j.sel.ranges.length;lu(j,iB(j.sel.ranges.concat([h]),k),{scroll:false,origin:"*mouse"})}}var p=g;function q(u){if(jx(p,u)==0){return}p=u;if(i=="rect"){var D=[],x=f.options.tabSize;var E=lw(iT(j,g.line).text,g.ch,x);var G=lw(iT(j,u.line).text,u.ch,x);var C=Math.min(E,G),I=Math.max(E,G);for(var F=Math.min(g.line,u.line),A=Math.min(f.lastLine(),Math.max(g.line,u.line));F<=A;F++){var H=iT(j,F).text,B=hi(H,C,x);if(C==I){D.push(new i9(jU(F,B),jU(F,B)))}else{if(H.length>B){D.push(new i9(jU(F,B),jU(F,hi(H,I,x))))}}}if(!D.length){D.push(new i9(g,g))}lu(j,iB(e.ranges.slice(0,k).concat(D),k),{origin:"*mouse",scroll:false});f.scrollIntoView(u)}else{var w=h;var z=w.anchor,v=u;if(i!="single"){if(i=="double"){var y=f.findWordAt(u)}else{var y=new i9(jU(u.line,0),gd(j,jU(u.line+1,0)))}if(jx(y.anchor,z)>0){v=y.head;z=ly(w.from(),y.anchor)}else{v=y.anchor;z=jW(w.to(),y.head)}}var D=e.ranges.slice(0);D[k]=new i9(gd(j,z),v);lu(j,iB(D,k),ky)}}var s=o.wrapper.getBoundingClientRect();var c=0;function m(w){var y=++c;var u=i7(f,w,true,i=="rect");if(!u){return}if(jx(u,p)!=0){iN(f);q(u);var v=ml(o,j);if(u.line>=v.to||u.line<v.from){setTimeout(jX(f,function(){if(c==y){m(w)}}),150)}}else{var x=w.clientY<s.top?-20:w.clientY>s.bottom?20:0;if(x){setTimeout(jX(f,function(){if(c!=y){return}o.scroller.scrollTop+=x;m(w)}),50)}}}function t(u){c=Infinity;k1(u);gZ(f);kr(document,"mousemove",r);kr(document,"mouseup",b);j.history.lastSelOrigin=null}var r=jX(f,function(u){if(!ho(u)){t(u)}else{m(u)}});var b=jX(f,t);ll(document,"mousemove",r);ll(document,"mouseup",b)}function gD(k,b,m,l,f){try{var h=b.clientX,i=b.clientY}catch(b){return false}if(h>=Math.floor(k.display.gutters.getBoundingClientRect().right)){return false}if(l){k1(b)}var a=k.display;var c=a.lineDiv.getBoundingClientRect();if(i>c.bottom||!iH(k,m)){return lQ(b)}i-=c.top-a.viewOffset;for(var e=0;e<k.options.gutters.length;++e){var d=a.gutters.childNodes[e];if(d&&d.getBoundingClientRect().right>=h){var j=l1(k.doc,i);var g=k.options.gutters[e];f(k,m,k,j,g,b);return lQ(b)}}}function i8(a,b){return gD(a,b,"gutterClick",true,l0)}var lX=0;function kR(c){var a=this;if(mt(a,c)||f4(a.display,c)){return}k1(c);if(hr){lX=+new Date}var b=i7(a,c,true),i=c.dataTransfer.files;if(!b||lR(a)){return}if(i&&i.length&&window.FileReader&&window.File){var g=i.length,j=Array(g),h=0;var e=function(k,l){var m=new FileReader;m.onload=jX(a,function(){j[l]=m.result;if(++h==g){b=gd(a.doc,b);var n={from:b,to:b,text:md(j.join("\n")),origin:"paste"};k3(a.doc,n);hD(a.doc,h4(b,kh(n)))}});m.readAsText(k)};for(var d=0;d<g;++d){e(i[d],d)}}else{if(a.state.draggingText&&a.doc.sel.contains(b)>-1){a.state.draggingText(c);setTimeout(iD(gZ,a),20);return}try{var j=c.dataTransfer.getData("Text");if(j){if(a.state.draggingText&&!(mk?c.metaKey:c.ctrlKey)){var f=a.listSelections()}hk(a.doc,h4(b,b));if(f){for(var d=0;d<f.length;++d){mc(a.doc,"",f[d].anchor,f[d].head,"drag")}}a.replaceSelection(j,"around","paste");gZ(a)}}catch(c){}}}function kj(a,b){if(hr&&(!a.state.draggingText||+new Date-lX<100)){hh(b);return}if(mt(a,b)||f4(a.display,b)){return}b.dataTransfer.setData("Text",a.getSelection());if(b.dataTransfer.setDragImage&&!mH){var c=g7("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(iW){c.width=c.height=1;a.display.wrapper.appendChild(c);c._top=c.offsetTop}b.dataTransfer.setDragImage(c,0,0);if(iW){c.parentNode.removeChild(c)}}}function kv(a,b){if(Math.abs(a.doc.scrollTop-b)<2){return}a.doc.scrollTop=b;if(!i2){jp(a,{top:b})}if(a.display.scroller.scrollTop!=b){a.display.scroller.scrollTop=b}if(a.display.scrollbarV.scrollTop!=b){a.display.scrollbarV.scrollTop=b}if(i2){jp(a)}kk(a,100)}function l5(a,b,c){if(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2){return}b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);a.doc.scrollLeft=b;gP(a);if(a.display.scroller.scrollLeft!=b){a.display.scroller.scrollLeft=b}if(a.display.scrollbarH.scrollLeft!=b){a.display.scrollbarH.scrollLeft=b}}var it=0,ju=null;if(hr){ju=-0.53}else{if(i2){ju=15}else{if(lp){ju=-0.7}else{if(mH){ju=-1/3}}}}function jF(a,g){var j=g.wheelDeltaX,k=g.wheelDeltaY;if(j==null&&g.detail&&g.axis==g.HORIZONTAL_AXIS){j=g.detail}if(k==null&&g.detail&&g.axis==g.VERTICAL_AXIS){k=g.detail}else{if(k==null){k=g.wheelDelta}}var e=a.display,b=e.scroller;if(!(j&&b.scrollWidth>b.clientWidth||k&&b.scrollHeight>b.clientHeight)){return}if(k&&mk&&j3){outer:for(var l=g.target,c=e.view;l!=b;l=l.parentNode){for(var h=0;h<c.length;h++){if(c[h].node==l){a.display.currentWheelTarget=l;break outer}}}}if(j&&!i2&&!iW&&ju!=null){if(k){kv(a,Math.max(0,Math.min(b.scrollTop+k*ju,b.scrollHeight-b.clientHeight)))}l5(a,Math.max(0,Math.min(b.scrollLeft+j*ju,b.scrollWidth-b.clientWidth)));k1(g);e.wheelStartX=null;return}if(k&&ju!=null){var i=k*ju;var d=a.doc.scrollTop,f=d+e.wrapper.clientHeight;if(i<0){d=Math.max(0,d+i-50)}else{f=Math.min(a.doc.height,f+i+50)}jp(a,{top:d,bottom:f})}if(it<20){if(e.wheelStartX==null){e.wheelStartX=b.scrollLeft;e.wheelStartY=b.scrollTop;e.wheelDX=j;e.wheelDY=k;setTimeout(function(){if(e.wheelStartX==null){return}var o=b.scrollLeft-e.wheelStartX;var m=b.scrollTop-e.wheelStartY;var n=(m&&e.wheelDY&&m/e.wheelDY)||(o&&e.wheelDX&&o/e.wheelDX);e.wheelStartX=e.wheelStartY=null;if(!n){return}ju=(ju*it+n)/(it+1);++it},200)}else{e.wheelDX+=j;e.wheelDY+=k}}}function hj(e,b,a){if(typeof b=="string"){b=gR[b];if(!b){return false}}if(e.display.pollingFast&&js(e)){e.display.pollingFast=false}var c=e.display.shift,d=false;try{if(lR(e)){e.state.suppressEdits=true}if(a){e.display.shift=false}d=b(e)!=me}finally{e.display.shift=c;e.state.suppressEdits=false}return d}function hX(a){var b=a.state.keyMaps.slice(0);if(a.options.extraKeys){b.push(a.options.extraKeys)}b.push(a.options.keyMap);return b}var lv;function iF(a,b){var g=hb(a.options.keyMap),d=g.auto;clearTimeout(lv);if(d&&!gS(b)){lv=setTimeout(function(){if(hb(a.options.keyMap)==g){a.options.keyMap=(d.call?d.call(null,a):d);gF(a)}},50)}var e=gv(b,true),c=false;if(!e){return false}var f=hX(a);if(b.shiftKey){c=jk("Shift-"+e,f,function(h){return hj(a,h,true)})||jk(e,f,function(h){if(typeof h=="string"?/^go[A-Z]/.test(h):h.motion){return hj(a,h)}})}else{c=jk(e,f,function(h){return hj(a,h)})}if(c){k1(b);i0(a);l0(a,"keyHandled",a,e,b)}return c}function j5(a,b,d){var c=jk("'"+d+"'",hX(a),function(e){return hj(a,e,true)});if(c){k1(b);i0(a);l0(a,"keyHandled",a,"'"+d+"'",b)}return c}var h9=null;function iV(b){var a=this;iN(a);if(mt(a,b)){return}if(hr&&jc<11&&b.keyCode==27){b.returnValue=false}var d=b.keyCode;a.display.shift=d==16||b.shiftKey;var c=iF(a,b);if(iW){h9=c?d:null;if(!c&&d==88&&!lt&&(mk?b.metaKey:b.ctrlKey)){a.replaceSelection("",null,"cut")}}if(d==18&&!/\bCodeMirror-crosshair\b/.test(a.display.lineDiv.className)){lk(a)}}function lk(c){var b=c.display.lineDiv;gm(b,"CodeMirror-crosshair");function a(d){if(d.keyCode==18||!d.altKey){jt(b,"CodeMirror-crosshair");kr(document,"keyup",a);kr(document,"mouseover",a)}}ll(document,"keyup",a);ll(document,"mouseover",a)}function kX(a){if(a.keyCode==16){this.doc.sel.shift=false}mt(this,a)}function iy(b){var a=this;if(mt(a,b)||b.ctrlKey&&!b.altKey||mk&&b.metaKey){return}var c=b.keyCode,e=b.charCode;if(iW&&c==h9){h9=null;k1(b);return}if(((iW&&(!b.which||b.which<10))||f3)&&iF(a,b)){return}var d=String.fromCharCode(e==null?c:e);if(j5(a,b,d)){return}if(hr&&jc>=9){a.display.inputHasSelection=null}k5(a)}function il(a){if(a.options.readOnly=="nocursor"){return}if(!a.state.focused){mG(a,"focus",a);a.state.focused=true;gm(a.display.wrapper,"CodeMirror-focused");if(!a.curOp&&a.display.selForContextMenu!=a.doc.sel){gy(a);if(j3){setTimeout(iD(gy,a,true),0)}}}kC(a);i0(a)}function mo(a){if(a.state.focused){mG(a,"blur",a);a.state.focused=false;jt(a.display.wrapper,"CodeMirror-focused")}clearInterval(a.display.blinker);setTimeout(function(){if(!a.state.focused){a.display.shift=false}},150)}function lc(k,e){if(mt(k,e,"contextmenu")){return}var c=k.display;if(f4(c,e)||ig(k,e)){return}var a=i7(k,e),i=c.scroller.scrollTop;if(!a||iW){return}var f=k.options.resetSelectionOnContextMenu;if(f&&k.doc.sel.contains(a)==-1){jX(k,lu)(k.doc,h4(a),jN)}var d=c.input.style.cssText;c.inputDiv.style.position="absolute";c.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(hr?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(j3){var j=window.scrollY}gZ(k);if(j3){window.scrollTo(null,j)}gy(k);if(!k.somethingSelected()){c.input.value=c.prevInput=" "}c.selForContextMenu=k.doc.sel;clearTimeout(c.detectingSelectAll);function g(){if(c.input.selectionStart!=null){var m=k.somethingSelected();var l=c.input.value="\u200b"+(m?c.input.value:"");c.prevInput=m?"":"\u200b";c.input.selectionStart=1;c.input.selectionEnd=l.length;c.selForContextMenu=k.doc.sel}}function b(){c.inputDiv.style.position="relative";c.input.style.cssText=d;if(hr&&jc<9){c.scrollbarV.scrollTop=c.scroller.scrollTop=i}kC(k);if(c.input.selectionStart!=null){if(!hr||(hr&&jc<9)){g()}var m=0,l=function(){if(c.selForContextMenu==k.doc.sel&&c.input.selectionStart==0){jX(k,gR.selectAll)(k)}else{if(m++<10){c.detectingSelectAll=setTimeout(l,500)}else{gy(k)}}};c.detectingSelectAll=setTimeout(l,200)}}if(hr&&jc>=9){g()}if(gQ){hh(e);var h=function(){kr(window,"mouseup",h);setTimeout(b,20)};ll(window,"mouseup",h)}else{setTimeout(b,50)}}function ig(a,b){if(!iH(a,"gutterContextMenu")){return false}return gD(a,b,"gutterContextMenu",false,mG)}var kh=kK.changeEnd=function(a){if(!a.text){return a.to}return jU(a.from.line+a.text.length-1,gf(a.text).length+(a.text.length==1?a.from.ch:0))};function lh(b,c){if(jx(b,c.from)<0){return b}if(jx(b,c.to)<=0){return kh(c)}var a=b.line+c.text.length-(c.to.line-c.from.line)-1,d=b.ch;if(b.line==c.to.line){d+=kh(c).ch-c.to.ch}return jU(a,d)}function iC(c,b){var e=[];for(var d=0;d<c.sel.ranges.length;d++){var a=c.sel.ranges[d];e.push(new i9(lh(a.anchor,b),lh(a.head,b)))}return iB(e,c.sel.primIndex)}function j8(b,c,a){if(b.line==c.line){return jU(a.line,b.ch-c.ch+a.ch)}else{return jU(a.line+(b.line-c.line),b.ch)}}function lY(k,b,h){var g=[];var i=jU(k.first,0),j=i;for(var e=0;e<b.length;e++){var c=b[e];var l=j8(c.from,i,j);var a=j8(kh(c),i,j);i=c.to;j=a;if(h=="around"){var d=k.sel.ranges[e],f=jx(d.head,d.anchor)<0;g[e]=new i9(f?a:l,f?l:a)}else{g[e]=new i9(l,l)}}return new g4(g,k.sel.primIndex)}function jv(d,b,c){var a={canceled:false,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=true}};if(c){a.update=function(e,f,g,h){if(e){this.from=gd(d,e)}if(f){this.to=gd(d,f)}if(g){this.text=g}if(h!==undefined){this.origin=h}}}mG(d,"beforeChange",d,a);if(d.cm){mG(d.cm,"beforeChange",d.cm,a)}if(a.canceled){return null}return{from:a.from,to:a.to,text:a.text,origin:a.origin}}function k3(c,b,d){if(c.cm){if(!c.cm.curOp){return jX(c.cm,k3)(c,b,d)}if(c.cm.state.suppressEdits){return}}if(iH(c,"beforeChange")||c.cm&&iH(c.cm,"beforeChange")){b=jv(c,b,true);if(!b){return}}var e=gL&&!d&&k0(c,b.from,b.to);if(e){for(var a=e.length-1;a>=0;--a){kD(c,{from:e[a].from,to:e[a].to,text:a?[""]:b.text})}}else{kD(c,b)}}function kD(c,b){if(b.text.length==1&&b.text[0]==""&&jx(b.from,b.to)==0){return}var d=iC(c,b);hq(c,b,d,c.cm?c.cm.curOp.id:NaN);ko(c,b,d,j1(c,b));var a=[];iA(c,function(e,f){if(!f&&ic(a,e.history)==-1){hA(e.history,b);a.push(e.history)}ko(e,b,null,j1(e,b))})}function mi(l,n,j){if(l.cm&&l.cm.state.suppressEdits){return}var a=l.history,g,e=l.sel;var i=n=="undo"?a.done:a.undone,k=n=="undo"?a.undone:a.done;for(var d=0;d<i.length;d++){g=i[d];if(j?g.ranges&&!g.equals(l.sel):!g.ranges){break}}if(d==i.length){return}a.lastOrigin=a.lastSelOrigin=null;for(;;){g=i.pop();if(g.ranges){kH(g,k);if(j&&!g.equals(l.sel)){lu(l,g,{clearRedo:false});return}e=g}else{break}}var b=[];kH(e,k);k.push({changes:b,generation:a.generation});a.generation=g.generation||++a.maxGeneration;var f=iH(l,"beforeChange")||l.cm&&iH(l.cm,"beforeChange");for(var d=g.changes.length-1;d>=0;--d){var m=g.changes[d];m.origin=n;if(f&&!jv(l,m,false)){i.length=0;return}b.push(hU(l,m));var h=d?iC(l,m):gf(i);ko(l,m,h,iu(l,m));if(!d&&l.cm){l.cm.scrollIntoView({from:m.from,to:kh(m)})}var c=[];iA(l,function(o,p){if(!p&&ic(c,o.history)==-1){hA(o.history,m);c.push(o.history)}ko(o,m,null,iu(o,m))})}}function gA(d,b){if(b==0){return}d.first+=b;d.sel=new g4(lz(d.sel.ranges,function(e){return new i9(jU(e.anchor.line+b,e.anchor.ch),jU(e.head.line+b,e.head.ch))}),d.sel.primIndex);if(d.cm){lV(d.cm,d.first,d.first-b,b);for(var c=d.cm.display,a=c.viewFrom;a<c.viewTo;a++){kf(d.cm,a,"gutter")}}}function ko(c,b,d,f){if(c.cm&&!c.cm.curOp){return jX(c.cm,ko)(c,b,d,f)}if(b.to.line<c.first){gA(c,b.text.length-1-(b.to.line-b.from.line));return}if(b.from.line>c.lastLine()){return}if(b.from.line<c.first){var a=b.text.length-1-(c.first-b.from.line);gA(c,a);b={from:jU(c.first,0),to:jU(b.to.line+a,b.to.ch),text:[gf(b.text)],origin:b.origin}}var e=c.lastLine();if(b.to.line>e){b={from:b.from,to:jU(e,iT(c,e).text.length),text:[b.text[0]],origin:b.origin}}b.removed=g2(c,b.from,b.to);if(!d){d=iC(c,b)}if(c.cm){mB(c.cm,b,f)}else{go(c,b,f)}hk(c,d,jN)}function mB(k,b,d){var l=k.doc,c=k.display,a=b.from,m=b.to;var i=false,e=a.line;if(!k.options.lineWrapping){e=lM(ij(iT(l,a.line)));l.iter(e,m.line+1,function(n){if(n==c.maxLine){i=true;return true}})}if(l.sel.contains(b.from,b.to)>-1){jY(k)}go(l,b,d,f1(k));if(!k.options.lineWrapping){l.iter(e,a.line+b.text.length,function(n){var o=jS(n);if(o>c.maxLineLength){c.maxLine=n;c.maxLineLength=o;c.maxLineChanged=true;i=false}});if(i){k.curOp.updateMaxLine=true}}l.frontier=Math.min(l.frontier,a.line);kk(k,400);var j=b.text.length-(m.line-a.line)-1;if(a.line==m.line&&b.text.length==1&&!jq(k.doc,b)){kf(k,a.line,"text")}else{lV(k,a.line,m.line+1,j)}var g=iH(k,"changes"),f=iH(k,"change");if(f||g){var h={from:a,to:m,text:b.text,removed:b.removed,origin:b.origin};if(f){l0(k,"change",k,h)}if(g){(k.curOp.changeObjs||(k.curOp.changeObjs=[])).push(h)}}k.display.selForContextMenu=null}function mc(d,e,b,c,a){if(!c){c=b}if(jx(c,b)<0){var f=c;c=b;b=f}if(typeof e=="string"){e=md(e)}k3(d,{from:b,to:c,text:e,origin:a})}function iG(f,c){var b=f.display,e=b.sizer.getBoundingClientRect(),a=null;if(c.top+e.top<0){a=true}else{if(c.bottom+e.top>(window.innerHeight||document.documentElement.clientHeight)){a=false}}if(a!=null&&!gs){var d=g7("div","\u200b",null,"position: absolute; top: "+(c.top-b.viewOffset-hB(f.display))+"px; height: "+(c.bottom-c.top+kM)+"px; left: "+c.left+"px; width: 2px;");f.display.lineSpace.appendChild(d);d.scrollIntoView(a);f.display.lineSpace.removeChild(d)}}function kV(j,a,e,f){if(f==null){f=0}for(var d=0;d<5;d++){var c=false,k=jl(j,a);var i=!e||e==a?k:jl(j,e);var g=kN(j,Math.min(k.left,i.left),Math.min(k.top,i.top)-f,Math.max(k.left,i.left),Math.max(k.bottom,i.bottom)+f);var b=j.doc.scrollTop,h=j.doc.scrollLeft;if(g.scrollTop!=null){kv(j,g.scrollTop);if(Math.abs(j.doc.scrollTop-b)>1){c=true}}if(g.scrollLeft!=null){l5(j,g.scrollLeft);if(Math.abs(j.doc.scrollLeft-h)>1){c=true}}if(!c){return k}}}function kT(a,e,c,f,d){var b=kN(a,e,c,f,d);if(b.scrollTop!=null){kv(a,b.scrollTop)}if(b.scrollLeft!=null){l5(a,b.scrollLeft)}}function kN(n,f,o,h,p){var a=n.display,c=mj(n.display);if(o<0){o=0}var e=n.curOp&&n.curOp.scrollTop!=null?n.curOp.scrollTop:a.scroller.scrollTop;var l=a.scroller.clientHeight-kM,j={};if(p-o>l){p=o+l}var g=n.doc.height+lW(a);var i=o<c,b=p>g-c;if(o<e){j.scrollTop=i?0:o}else{if(p>e+l){var q=Math.min(o,(b?g:p)-l);if(q!=e){j.scrollTop=q}}}var k=n.curOp&&n.curOp.scrollLeft!=null?n.curOp.scrollLeft:a.scroller.scrollLeft;var m=a.scroller.clientWidth-kM-a.gutters.offsetWidth;var d=h-f>m;if(d){h=f+m}if(f<10){j.scrollLeft=0}else{if(f<k){j.scrollLeft=Math.max(0,f-(d?0:10))}else{if(h>m+k-3){j.scrollLeft=h+(d?0:10)-m}}}return j}function kO(a,b,c){if(b!=null||c!=null){gk(a)}if(b!=null){a.curOp.scrollLeft=(a.curOp.scrollLeft==null?a.doc.scrollLeft:a.curOp.scrollLeft)+b}if(c!=null){a.curOp.scrollTop=(a.curOp.scrollTop==null?a.doc.scrollTop:a.curOp.scrollTop)+c}}function gg(a){gk(a);var d=a.getCursor(),b=d,c=d;if(!a.options.lineWrapping){b=d.ch?jU(d.line,d.ch-1):d;c=jU(d.line,d.ch+1)}a.curOp.scrollToPos={from:b,to:c,margin:a.options.cursorScrollMargin,isCursor:true}}function gk(a){var d=a.curOp.scrollToPos;if(d){a.curOp.scrollToPos=null;var b=hu(a,d.from),c=hu(a,d.to);var e=kN(a,Math.min(b.left,c.left),Math.min(b.top,c.top)-d.margin,Math.max(b.right,c.right),Math.max(b.bottom,c.bottom)+d.margin);a.scrollTo(e.scrollLeft,e.scrollTop)}}function l3(k,f,l,g){var m=k.doc,h;if(l==null){l="add"}if(l=="smart"){if(!m.mode.indent){l="prev"}else{h=hH(k,f)}}var b=k.options.tabSize;var j=iT(m,f),c=lw(j.text,null,b);if(j.stateAfter){j.stateAfter=null}var i=j.text.match(/^\s*/)[0],o;if(!g&&!/\S/.test(j.text)){o=0;l="not"}else{if(l=="smart"){o=m.mode.indent(h,j.text.slice(i.length),j.text);if(o==me||o>150){if(!g){return}l="prev"}}}if(l=="prev"){if(f>m.first){o=lw(iT(m,f-1).text,null,b)}else{o=0}}else{if(l=="add"){o=c+k.options.indentUnit}else{if(l=="subtract"){o=c-k.options.indentUnit}else{if(typeof l=="number"){o=c+l}}}}o=Math.max(0,o);var n="",a=0;if(k.options.indentWithTabs){for(var e=Math.floor(o/b);e;--e){a+=b;n+="\t"}}if(a<o){n+=iZ(o-a)}if(n!=i){mc(m,n,jU(f,0),jU(f,i.length),"+input")}else{for(var e=0;e<m.sel.ranges.length;e++){var d=m.sel.ranges[e];if(d.head.line==f&&d.head.ch<i.length){var a=jU(f,i.length);jw(m,e,new i9(a,a));break}}}j.stateAfter=null}function g1(d,e,a,b){var c=e,f=e;if(typeof e=="number"){f=iT(d,jM(d,e))}else{c=lM(e)}if(c==null){return null}if(b(f,c)&&d.cm){kf(d.cm,c,a)}return f}function hV(a,b){var g=a.doc.sel.ranges,d=[];for(var e=0;e<g.length;e++){var f=b(g[e]);while(d.length&&jx(f.from,gf(d).to)<=0){var c=d.pop();if(jx(c.from,f.from)<0){f.from=c.from;break}}d.push(f)}kL(a,function(){for(var h=d.length-1;h>=0;h--){mc(a.doc,"",d[h].from,d[h].to,"+delete")}gg(a)})}function j0(j,e,p,q,c){var s=e.line,r=e.ch,k=p;var h=iT(j,s);var m=true;function l(){var t=s+p;if(t<j.first||t>=j.first+j.size){return(m=false)}s=t;return h=iT(j,t)}function n(t){var u=(c?iz:lS)(h,r,p,true);if(u==null){if(!t&&l()){if(c){r=(p<0?kq:k4)(h)}else{r=p<0?h.text.length:0}}else{return(m=false)}}else{r=u}return true}if(q=="char"){n()}else{if(q=="column"){n(true)}else{if(q=="word"||q=="group"){var o=null,b=q=="group";var i=j.cm&&j.cm.getHelper(e,"wordChars");for(var d=true;;d=false){if(p<0&&!n(!d)){break}var g=h.text.charAt(r)||"\n";var f=im(g,i)?"w":b&&g=="\n"?"n":!b||/\s/.test(g)?null:"p";if(b&&!d&&!f){f="s"}if(o&&o!=f){if(p<0){p=1;n()}break}if(f){o=f}if(p>0&&!n(!d)){break}}}}}var a=lr(j,jU(s,r),k,true);if(!m){a.hitSide=true}return a}function kp(a,f,i,b){var c=a.doc,d=f.left,e;if(b=="page"){var g=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=f.top+i*(g-(i<0?1.5:0.5)*mj(a.display))}else{if(b=="line"){e=i>0?f.bottom+3:f.top-3}}for(;;){var h=hm(a,d,e);if(!h.outside){break}if(i<0?e<=0:e>=c.height){h.hitSide=true;break}e+=i*5}return h}kK.prototype={constructor:kK,focus:function(){window.focus();gZ(this);k5(this)},setOption:function(c,b){var d=this.options,a=d[c];if(d[c]==b&&c!="mode"){return}d[c]=b;if(k6.hasOwnProperty(c)){jX(this,k6[c])(this,b,a)}},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(b,a){this.state.keyMaps[a?"push":"unshift"](b)},removeKeyMap:function(c){var b=this.state.keyMaps;for(var a=0;a<b.length;++a){if(b[a]==c||(typeof b[a]!="string"&&b[a].name==c)){b.splice(a,1);return true}}},addOverlay:lB(function(a,c){var b=a.token?a:kK.getMode(this.options,a);if(b.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:b,modeSpec:a,opaque:c&&c.opaque});this.state.modeGen++;lV(this)}),removeOverlay:lB(function(a){var c=this.state.overlays;for(var d=0;d<c.length;++d){var b=c[d].modeSpec;if(b==a||typeof a=="string"&&b.name==a){c.splice(d,1);this.state.modeGen++;lV(this);return}}}),indentLine:lB(function(b,a,c){if(typeof a!="string"&&typeof a!="number"){if(a==null){a=this.options.smartIndent?"smart":"prev"}else{a=a?"add":"subtract"}}if(mg(this.doc,b)){l3(this,b,a,c)}}),indentSelection:lB(function(j){var i=this.doc.sel.ranges,f=-1;for(var d=0;d<i.length;d++){var c=i[d];if(!c.empty()){var b=c.from(),a=c.to();var h=Math.max(f,b.line);f=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var e=h;e<f;++e){l3(this,e,j)}var g=this.doc.sel.ranges;if(b.ch==0&&i.length==g.length&&g[d].from().ch>0){jw(this.doc,d,new i9(b,g[d].to()),jN)}}else{if(c.head.line>f){l3(this,c.head.line,j,true);f=c.head.line;if(d==this.doc.sel.primIndex){gg(this)}}}}}),getTokenAt:function(b,h){var e=this.doc;b=gd(e,b);var f=hH(this,b.line,h),c=this.doc.mode;var a=iT(e,b.line);var d=new h3(a.text,this.options.tabSize);while(d.pos<b.ch&&!d.eol()){d.start=d.pos;var g=gV(c,d,f)}return{start:d.start,end:d.pos,string:d.current(),type:g||null,state:f}},getTokenTypeAt:function(b){b=gd(this.doc,b);var f=lF(this,iT(this.doc,b.line));var d=0,c=(f.length-1)/2,g=b.ch;var h;if(g==0){h=f[2]}else{for(;;){var a=(d+c)>>1;if((a?f[a*2-1]:0)>=g){c=a}else{if(f[a*2+1]<g){d=a+1}else{h=f[a*2+2];break}}}}var e=h?h.indexOf("cm-overlay "):-1;return e<0?h:e==0?null:h.slice(0,e-1)},getModeAt:function(b){var a=this.doc.mode;if(!a.innerMode){return a}return kK.innerMode(a,this.getTokenAt(b).state).mode},getHelper:function(b,a){return this.getHelpers(b,a)[0]},getHelpers:function(b,g){var f=[];if(!gz.hasOwnProperty(g)){return gz}var a=gz[g],c=this.getModeAt(b);if(typeof c[g]=="string"){if(a[c[g]]){f.push(a[c[g]])}}else{if(c[g]){for(var h=0;h<c[g].length;h++){var d=a[c[g][h]];if(d){f.push(d)}}}else{if(c.helperType&&a[c.helperType]){f.push(a[c.helperType])}else{if(a[c.name]){f.push(a[c.name])}}}}for(var h=0;h<a._global.length;h++){var e=a._global[h];if(e.pred(c,this)&&ic(f,e.val)==-1){f.push(e.val)}}return f},getStateAfter:function(c,a){var b=this.doc;c=jM(b,c==null?b.first+b.size-1:c);return hH(this,c+1,a)},cursorCoords:function(b,d){var c,a=this.doc.sel.primary();if(b==null){c=a.head}else{if(typeof b=="object"){c=gd(this.doc,b)}else{c=b?a.from():a.to()}}return jl(this,c,d||"page")},charCoords:function(b,a){return kU(this,gd(this.doc,b),a||"page")},coordsChar:function(a,b){a=gG(this,a,b||"page");return hm(this,a.left,a.top)},lineAtHeight:function(a,b){a=gG(this,{top:a,left:0},b||"page").top;return l1(this.doc,a+this.display.viewOffset)},heightAtLine:function(e,b){var a=false,c=this.doc.first+this.doc.size-1;if(e<this.doc.first){e=this.doc.first}else{if(e>c){e=c;a=true}}var d=iT(this.doc,e);return h8(this,d,{top:0,left:0},b||"page").top+(a?this.doc.height-lO(d):0)},defaultTextHeight:function(){return mj(this.display)},defaultCharWidth:function(){return hC(this.display)},setGutterMarker:lB(function(a,c,b){return g1(this.doc,a,"gutter",function(e){var d=e.gutterMarkers||(e.gutterMarkers={});d[c]=b;if(!b&&h0(d)){e.gutterMarkers=null}return true})}),clearGutter:lB(function(c){var a=this,b=a.doc,d=b.first;b.iter(function(e){if(e.gutterMarkers&&e.gutterMarkers[c]){e.gutterMarkers[c]=null;kf(a,d,"gutter");if(h0(e.gutterMarkers)){e.gutterMarkers=null}}++d})}),addLineWidget:lB(function(b,c,a){return lZ(this,b,c,a)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if(typeof a=="number"){if(!mg(this.doc,a)){return null}var b=a;a=iT(this.doc,a);if(!a){return null}}else{var b=lM(a);if(b==null){return null}}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(d,g,b,f,j){var e=this.display;d=jl(this,gd(this.doc,d));var c=d.bottom,h=d.left;g.style.position="absolute";e.sizer.appendChild(g);if(f=="over"){c=d.top}else{if(f=="above"||f=="near"){var i=Math.max(e.wrapper.clientHeight,this.doc.height),a=Math.max(e.sizer.clientWidth,e.lineSpace.clientWidth);if((f=="above"||d.bottom+g.offsetHeight>i)&&d.top>g.offsetHeight){c=d.top-g.offsetHeight}else{if(d.bottom+g.offsetHeight<=i){c=d.bottom}}if(h+g.offsetWidth>a){h=a-g.offsetWidth}}}g.style.top=c+"px";g.style.left=g.style.right="";if(j=="right"){h=e.sizer.clientWidth-g.offsetWidth;g.style.right="0px"}else{if(j=="left"){h=0}else{if(j=="middle"){h=(e.sizer.clientWidth-g.offsetWidth)/2}}g.style.left=h+"px"}if(b){kT(this,h,c,h+g.offsetWidth,c+g.offsetHeight)}},triggerOnKeyDown:lB(iV),triggerOnKeyPress:lB(iy),triggerOnKeyUp:kX,execCommand:function(a){if(gR.hasOwnProperty(a)){return gR[a](this)}},findPosH:function(b,e,d,g){var a=1;if(e<0){a=-1;e=-e}for(var f=0,c=gd(this.doc,b);f<e;++f){c=j0(this.doc,c,a,d,g);if(c.hitSide){break}}return c},moveH:lB(function(c,b){var a=this;a.extendSelectionsBy(function(d){if(a.display.shift||a.doc.extend||d.empty()){return j0(a.doc,d.head,c,b,a.options.rtlMoveVisually)}else{return c<0?d.from():d.to()}},ki)}),deleteH:lB(function(a,d){var c=this.doc.sel,b=this.doc;if(c.somethingSelected()){b.replaceSelection("",null,"+delete")}else{hV(this,function(e){var f=j0(b,e.head,a,d,false);return a<0?{from:f,to:e.head}:{from:e.head,to:f}})}}),findPosV:function(d,g,c,a){var i=1,e=a;if(g<0){i=-1;g=-g}for(var h=0,b=gd(this.doc,d);h<g;++h){var f=jl(this,b,"div");if(e==null){e=f.left}else{f.left=e}b=kp(this,f,i,c);if(b.hitSide){break}}return b},moveV:lB(function(g,e){var a=this,c=this.doc,d=[];var b=!a.display.shift&&!c.extend&&c.sel.somethingSelected();c.extendSelectionsBy(function(i){if(b){return g<0?i.from():i.to()}var j=jl(a,i.head,"div");if(i.goalColumn!=null){j.left=i.goalColumn}d.push(j.left);var h=kp(a,j,g,e);if(e=="page"&&i==c.sel.primary()){kO(a,null,kU(a,h,"div").top-j.top)}return h},ki);if(d.length){for(var f=0;f<c.sel.ranges.length;f++){c.sel.ranges[f].goalColumn=d[f]}}}),findWordAt:function(b){var d=this.doc,f=iT(d,b.line).text;var c=b.ch,g=b.ch;if(f){var e=this.getHelper(b,"wordChars");if((b.xRel<0||g==f.length)&&c){--c}else{++g}var h=f.charAt(c);var a=im(h,e)?function(i){return im(i,e)}:/\s/.test(h)?function(i){return/\s/.test(i)}:function(i){return !/\s/.test(i)&&!im(i)};while(c>0&&a(f.charAt(c-1))){--c}while(g<f.length&&a(f.charAt(g))){++g}}return new i9(jU(b.line,c),jU(b.line,g))},toggleOverwrite:function(a){if(a!=null&&a==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){gm(this.display.cursorDiv,"CodeMirror-overwrite")}else{jt(this.display.cursorDiv,"CodeMirror-overwrite")}mG(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return jC()==this.display.input},scrollTo:lB(function(a,b){if(a!=null||b!=null){gk(this)}if(a!=null){this.curOp.scrollLeft=a}if(b!=null){this.curOp.scrollTop=b}}),getScrollInfo:function(){var a=this.display.scroller,b=kM;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:lB(function(c,b){if(c==null){c={from:this.doc.sel.primary().head,to:null};if(b==null){b=this.options.cursorScrollMargin}}else{if(typeof c=="number"){c={from:jU(c,0),to:null}}else{if(c.from==null){c={from:c,to:null}}}}if(!c.to){c.to=c.from}c.margin=b||0;if(c.from.line!=null){gk(this);this.curOp.scrollToPos=c}else{var a=kN(this,Math.min(c.from.left,c.to.left),Math.min(c.from.top,c.to.top)-c.margin,Math.max(c.from.right,c.to.right),Math.max(c.from.bottom,c.to.bottom)+c.margin);this.scrollTo(a.scrollLeft,a.scrollTop)}}),setSize:lB(function(c,e){var a=this;function d(f){return typeof f=="number"||/^\d+$/.test(String(f))?f+"px":f}if(c!=null){a.display.wrapper.style.width=d(c)}if(e!=null){a.display.wrapper.style.height=d(e)}if(a.options.lineWrapping){mx(this)}var b=a.display.viewFrom;a.doc.iter(b,a.display.viewTo,function(g){if(g.widgets){for(var f=0;f<g.widgets.length;f++){if(g.widgets[f].noHScroll){kf(a,b,"widget");break}}}++b});a.curOp.forceUpdate=true;mG(a,"refresh",this)}),operation:function(a){return kL(this,a)},refresh:lB(function(){var a=this.display.cachedTextHeight;lV(this);this.curOp.forceUpdate=true;lP(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);jP(this);if(a==null||Math.abs(a-mj(this.display))>0.5){jR(this)}mG(this,"refresh",this)}),swapDoc:lB(function(b){var a=this.doc;a.cm=null;io(this,b);lP(this);gy(this);this.scrollTo(b.scrollLeft,b.scrollTop);this.curOp.forceScroll=true;l0(this,"swapDoc",this,a);return a}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};jQ(kK);var hJ=kK.defaults={};var k6=kK.optionHandlers={};function iI(a,b,c,d){kK.defaults[a]=b;if(c){k6[a]=d?function(g,e,f){if(f!=jH){c(g,e,f)}}:c}}var jH=kK.Init={toString:function(){return"CodeMirror.Init"}};iI("value","",function(a,b){a.setValue(b)},true);iI("mode",null,function(a,b){a.doc.modeOption=b;kl(a)},true);iI("indentUnit",2,kl,true);iI("indentWithTabs",false);iI("smartIndent",true);iI("tabSize",4,function(a){jV(a);lP(a);lV(a)},true);iI("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},true);iI("specialCharPlaceholder",ht,function(a){a.refresh()},true);iI("electricChars",true);iI("rtlMoveVisually",!mw);iI("wholeLineUpdateBefore",true);iI("theme","default",function(a){kF(a);hS(a)},true);iI("keyMap","default",gF);iI("extraKeys",null);iI("lineWrapping",false,gK,true);iI("gutters",[],function(a){jB(a.options);hS(a)},true);iI("fixedGutter",true,function(a,b){a.display.gutters.style.left=b?jd(a.display)+"px":"0";a.refresh()},true);iI("coverGutterNextToScrollbar",false,hT,true);iI("lineNumbers",false,function(a){jB(a.options);hS(a)},true);iI("firstLineNumber",1,hS,true);iI("lineNumberFormatter",function(a){return a},hS,true);iI("showCursorWhenSelecting",false,l8,true);iI("resetSelectionOnContextMenu",true);iI("readOnly",false,function(a,b){if(b=="nocursor"){mo(a);a.display.input.blur();a.display.disabled=true}else{a.display.disabled=false;if(!b){gy(a)}}});iI("disableInput",false,function(a,b){if(!b){gy(a)}},true);iI("dragDrop",true);iI("cursorBlinkRate",530);iI("cursorScrollMargin",0);iI("cursorHeight",1,l8,true);iI("singleCursorHeightPerLine",true,l8,true);iI("workTime",100);iI("workDelay",100);iI("flattenSpans",true,jV,true);iI("addModeClass",false,jV,true);iI("pollInterval",100);iI("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});iI("historyEventDelay",1250);iI("viewportMargin",10,function(a){a.refresh()},true);iI("maxHighlightLength",10000,jV,true);iI("moveInputWithCursor",true,function(a,b){if(!b){a.display.inputDiv.style.top=a.display.inputDiv.style.left=0}});iI("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});iI("autofocus",null);var hZ=kK.modes={},mr=kK.mimeModes={};kK.defineMode=function(a,b){if(!kK.defaults.mode&&a!="null"){kK.defaults.mode=a}if(arguments.length>2){b.dependencies=Array.prototype.slice.call(arguments,2)}hZ[a]=b};kK.defineMIME=function(b,a){mr[b]=a};kK.resolveMode=function(a){if(typeof a=="string"&&mr.hasOwnProperty(a)){a=mr[a]}else{if(a&&typeof a.name=="string"&&mr.hasOwnProperty(a.name)){var b=mr[a.name];if(typeof b=="string"){b={name:b}}a=jf(b,a);a.name=b.name}else{if(typeof a=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a)){return kK.resolveMode("application/xml")}}}if(typeof a=="string"){return{name:a}}else{return a||{name:"null"}}};kK.getMode=function(f,a){var a=kK.resolveMode(a);var d=hZ[a.name];if(!d){return kK.getMode(f,"text/plain")}var c=d(f,a);if(h5.hasOwnProperty(a.name)){var e=h5[a.name];for(var b in e){if(!e.hasOwnProperty(b)){continue}if(c.hasOwnProperty(b)){c["_"+b]=c[b]}c[b]=e[b]}}c.name=a.name;if(a.helperType){c.helperType=a.helperType}if(a.modeProps){for(var b in a.modeProps){c[b]=a.modeProps[b]}}return c};kK.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});kK.defineMIME("text/plain","null");var h5=kK.modeExtensions={};kK.extendMode=function(b,c){var a=h5.hasOwnProperty(b)?h5[b]:(h5[b]={});my(c,a)};kK.defineExtension=function(a,b){kK.prototype[a]=b};kK.defineDocExtension=function(a,b){lo.prototype[a]=b};kK.defineOption=iI;var f6=[];kK.defineInitHook=function(a){f6.push(a)};var gz=kK.helpers={};kK.registerHelper=function(c,a,b){if(!gz.hasOwnProperty(c)){gz[c]=kK[c]={_global:[]}}gz[c][a]=b};kK.registerGlobalHelper=function(c,d,a,b){kK.registerHelper(c,d,b);gz[c]._global.push({pred:a,val:b})};var ms=kK.copyState=function(c,a){if(a===true){return a}if(c.copyState){return c.copyState(a)}var d={};for(var b in a){var e=a[b];if(e instanceof Array){e=e.concat([])}d[b]=e}return d};var le=kK.startState=function(b,c,a){return b.startState?b.startState(c,a):true};kK.innerMode=function(b,a){while(b.innerMode){var c=b.innerMode(a);if(!c||c.mode==b){break}a=c.state;b=c.mode}return c||{mode:b,state:a}};var gR=kK.commands={selectAll:function(a){a.setSelection(jU(a.firstLine(),0),jU(a.lastLine()),jN)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),jN)},killLine:function(a){hV(a,function(b){if(b.empty()){var c=iT(a.doc,b.head.line).text.length;if(b.head.ch==c&&b.head.line<a.lastLine()){return{from:b.head,to:jU(b.head.line+1,0)}}else{return{from:b.head,to:jU(b.head.line,c)}}}else{return{from:b.from(),to:b.to()}}})},deleteLine:function(a){hV(a,function(b){return{from:jU(b.from().line,0),to:gd(a.doc,jU(b.to().line+1,0))}})},delLineLeft:function(a){hV(a,function(b){return{from:jU(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(a){hV(a,function(d){var b=a.charCoords(d.head,"div").top+5;var c=a.coordsChar({left:0,top:b},"div");return{from:c,to:d.from()}})},delWrappedLineRight:function(a){hV(a,function(d){var b=a.charCoords(d.head,"div").top+5;var c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div");return{from:d.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(jU(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(jU(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return ka(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return hs(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){return jz(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(c){var b=a.charCoords(c.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},ki)},goLineLeft:function(a){a.extendSelectionsBy(function(c){var b=a.charCoords(c.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},ki)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(d){var c=a.charCoords(d.head,"div").top+5;var b=a.coordsChar({left:0,top:c},"div");if(b.ch<a.getLine(b.line).search(/\S/)){return hs(a,d.head)}return b},ki)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){var f=[],g=a.listSelections(),c=a.options.tabSize;for(var d=0;d<g.length;d++){var b=g[d].from();var e=lw(a.getLine(b.line),b.ch,c);f.push(new Array(c-e%c+1).join(" "))}a.replaceSelections(f)},defaultTab:function(a){if(a.somethingSelected()){a.indentSelection("add")}else{a.execCommand("insertTab")}},transposeChars:function(a){kL(a,function(){var e=a.listSelections(),f=[];for(var d=0;d<e.length;d++){var b=e[d].head,g=iT(a.doc,b.line).text;if(g){if(b.ch==g.length){b=new jU(b.line,b.ch-1)}if(b.ch>0){b=new jU(b.line,b.ch+1);a.replaceRange(g.charAt(b.ch-1)+g.charAt(b.ch-2),jU(b.line,b.ch-2),b,"+transpose")}else{if(b.line>a.doc.first){var c=iT(a.doc,b.line-1).text;if(c){a.replaceRange(g.charAt(0)+"\n"+c.charAt(c.length-1),jU(b.line-1,c.length-1),jU(b.line,1),"+transpose")}}}}f.push(new i9(b,b))}a.setSelections(f)})},newlineAndIndent:function(a){kL(a,function(){var d=a.listSelections().length;for(var b=0;b<d;b++){var c=a.listSelections()[b];a.replaceRange("\n",c.anchor,c.head,"+input");a.indentLine(c.from().line+1,null,true);gg(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}};var hx=kK.keyMap={};hx.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};hx.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};hx.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};hx.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};hx["default"]=mk?hx.macDefault:hx.pcDefault;function hb(a){if(typeof a=="string"){return hx[a]}else{return a}}var jk=kK.lookupKey=function(f,b,d){function c(j){j=hb(j);var k=j[f];if(k===false){return"stop"}if(k!=null&&d(k)){return true}if(j.nofallthrough){return"stop"}var g=j.fallthrough;if(g==null){return false}if(Object.prototype.toString.call(g)!="[object Array]"){return c(g)}for(var h=0;h<g.length;++h){var i=c(g[h]);if(i){return i}}return false}for(var e=0;e<b.length;++e){var a=c(b[e]);if(a){return a!="stop"}}};var gS=kK.isModifierKey=function(b){var a=iP[b.keyCode];return a=="Ctrl"||a=="Alt"||a=="Shift"||a=="Mod"};var gv=kK.keyName=function(c,b){if(iW&&c.keyCode==34&&c["char"]){return false}var a=iP[c.keyCode];if(a==null||c.altGraphKey){return false}if(c.altKey){a="Alt-"+a}if(lG?c.metaKey:c.ctrlKey){a="Ctrl-"+a}if(lG?c.ctrlKey:c.metaKey){a="Cmd-"+a}if(!b&&c.shiftKey){a="Shift-"+a}return a};kK.fromTextArea=function(b,a){if(!a){a={}}a.value=b.value;if(!a.tabindex&&b.tabindex){a.tabindex=b.tabindex}if(!a.placeholder&&b.placeholder){a.placeholder=b.placeholder}if(a.autofocus==null){var i=jC();a.autofocus=i==b||b.getAttribute("autofocus")!=null&&i==document.body}function e(){b.value=c.getValue()}if(b.form){ll(b.form,"submit",e);if(!a.leaveSubmitMethodAlone){var h=b.form,d=h.submit;try{var f=h.submit=function(){e();h.submit=d;h.submit();h.submit=f}}catch(g){}}}b.style.display="none";var c=kK(function(j){b.parentNode.insertBefore(j,b.nextSibling)},a);c.save=e;c.getTextArea=function(){return b};c.toTextArea=function(){c.toTextArea=isNaN;e();b.parentNode.removeChild(c.getWrapperElement());b.style.display="";if(b.form){kr(b.form,"submit",e);if(typeof b.form.submit=="function"){b.form.submit=d}}};return c};var h3=kK.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};h3.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string"){var c=b==a}else{var c=b&&(a.test?a.test(b):a(b))}if(c){++this.pos;return b}},eatWhile:function(a){var b=this.pos;while(this.eat(a)){}return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1){this.pos=b;return true}},backUp:function(a){this.pos-=a},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=lw(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?lw(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return lw(this.string,null,this.tabSize)-(this.lineStart?lw(this.string,this.lineStart,this.tabSize):0)},match:function(c,f,a){if(typeof c=="string"){var b=function(g){return a?g.toLowerCase():g};var d=this.string.substr(this.pos,c.length);if(b(d)==b(c)){if(f!==false){this.pos+=c.length}return true}}else{var e=this.string.slice(this.pos).match(c);if(e&&e.index>0){return null}if(e&&f!==false){this.pos+=e[0].length}return e}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(b,a){this.lineStart+=b;try{return a()}finally{this.lineStart-=b}}};var km=kK.TextMarker=function(b,a){this.lines=[];this.type=a;this.doc=b};jQ(km);km.prototype.clear=function(){if(this.explicitlyCleared){return}var b=this.doc.cm,h=b&&!b.curOp;if(h){kW(b)}if(iH(this,"clear")){var a=this.find();if(a){l0(this,"clear",a.from,a.to)}}var g=null,d=null;for(var f=0;f<this.lines.length;++f){var j=this.lines[f];var c=hz(j.markedSpans,this);if(b&&!this.collapsed){kf(b,lM(j),"text")}else{if(b){if(c.to!=null){d=lM(j)}if(c.from!=null){g=lM(j)}}}j.markedSpans=gJ(j.markedSpans,c);if(c.from==null&&this.collapsed&&!gq(this.doc,j)&&b){gY(j,mj(b.display))}}if(b&&this.collapsed&&!b.options.lineWrapping){for(var f=0;f<this.lines.length;++f){var i=ij(this.lines[f]),e=jS(i);if(e>b.display.maxLineLength){b.display.maxLine=i;b.display.maxLineLength=e;b.display.maxLineChanged=true}}}if(g!=null&&b&&this.collapsed){lV(b,g,d+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(b){g3(b.doc)}}if(b){l0(b,"markerCleared",b,this)}if(h){lL(b)}if(this.parent){this.parent.clear()}};km.prototype.find=function(e,g){if(e==null&&this.type=="bookmark"){e=1}var b,c;for(var f=0;f<this.lines.length;++f){var a=this.lines[f];var d=hz(a.markedSpans,this);if(d.from!=null){b=jU(g?a:lM(a),d.from);if(e==-1){return b}}if(d.to!=null){c=jU(g?a:lM(a),d.to);if(e==1){return c}}}return b&&{from:b,to:c}};km.prototype.changed=function(){var b=this.find(-1,true),c=this,a=this.doc.cm;if(!b||!a){return}kL(a,function(){var g=b.line,f=lM(b.line);var h=hv(a,f);if(h){lm(h);a.curOp.selectionChanged=a.curOp.forceUpdate=true}a.curOp.updateMaxLine=true;if(!gq(c.doc,g)&&c.height!=null){var d=c.height;c.height=null;var e=kd(c)-d;if(e){gY(g,g.height+e)}}})};km.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;if(!b.maybeHiddenMarkers||ic(b.maybeHiddenMarkers,this)==-1){(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(a)};km.prototype.detachLine=function(a){this.lines.splice(ic(this.lines,a),1);if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}};var f9=0;function gN(a,c,b,j,e){if(j&&j.shared){return ks(a,c,b,j,e)}if(a.cm&&!a.cm.curOp){return jX(a.cm,gN)(a,c,b,j,e)}var f=new km(a,e),k=jx(c,b);if(j){my(j,f,false)}if(k>0||k==0&&f.clearWhenEmpty!==false){return f}if(f.replacedWith){f.collapsed=true;f.widgetNode=g7("span",[f.replacedWith],"CodeMirror-widget");if(!j.handleMouseEvents){f.widgetNode.ignoreEvents=true}if(j.insertLeft){f.widgetNode.insertLeft=true}}if(f.collapsed){if(k9(a,c.line,c,b,f)||c.line!=b.line&&k9(a,b.line,c,b,f)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}f7=true}if(f.addToHistory){hq(a,{from:c,to:b,origin:"markText"},a.sel,NaN)}var h=c.line,d=a.cm,i;a.iter(h,b.line+1,function(l){if(d&&f.collapsed&&!d.options.lineWrapping&&ij(l)==d.display.maxLine){i=true}if(f.collapsed&&h!=c.line){gY(l,0)}jE(l,new j9(f,h==c.line?c.ch:null,h==b.line?b.ch:null));++h});if(f.collapsed){a.iter(c.line,b.line+1,function(l){if(gq(a,l)){gY(l,0)}})}if(f.clearOnEnter){ll(f,"beforeCursorEnter",function(){f.clear()})}if(f.readOnly){gL=true;if(a.history.done.length||a.history.undone.length){a.clearHistory()}}if(f.collapsed){f.id=++f9;f.atomic=true}if(d){if(i){d.curOp.updateMaxLine=true}if(f.collapsed){lV(d,c.line,b.line+1)}else{if(f.className||f.title||f.startStyle||f.endStyle){for(var g=c.line;g<=b.line;g++){kf(d,g,"text")}}}if(f.atomic){g3(d.doc)}l0(d,"markerAdded",d,f)}return f}var ip=kK.SharedTextMarker=function(b,c){this.markers=b;this.primary=c;for(var a=0;a<b.length;++a){b[a].parent=this}};jQ(ip);ip.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var a=0;a<this.markers.length;++a){this.markers[a].clear()}l0(this,"clear")};ip.prototype.find=function(b,a){return this.primary.find(b,a)};function ks(e,b,c,a,g){a=my(a);a.shared=false;var d=[gN(e,b,c,a,g)],h=d[0];var f=a.widgetNode;iA(e,function(j){if(f){a.widgetNode=f.cloneNode(true)}d.push(gN(j,gd(j,b),gd(j,c),a,g));for(var i=0;i<j.linked.length;++i){if(j.linked[i].isParent){return}}h=gf(d)});return new ip(d,h)}function ia(a){return a.findMarks(jU(a.first,0),a.clipPos(jU(a.lastLine())),function(b){return b.parent})}function hy(d,c){for(var f=0;f<c.length;f++){var h=c[f],b=h.find();var a=d.clipPos(b.from),e=d.clipPos(b.to);if(jx(a,e)){var g=gN(d,a,e,h.primary,h.primary.type);h.markers.push(g);g.parent=h}}}function hn(d){for(var e=0;e<d.length;e++){var a=d[e],b=[a.primary.doc];iA(a.primary.doc,function(g){b.push(g)});for(var f=0;f<a.markers.length;f++){var c=a.markers[f];if(ic(b,c.doc)==-1){c.parent=null;a.markers.splice(f--,1)}}}}function j9(a,b,c){this.marker=a;this.from=b;this.to=c}function hz(c,a){if(c){for(var d=0;d<c.length;++d){var b=c[d];if(b.marker==a){return b}}}}function gJ(d,c){for(var b,a=0;a<d.length;++a){if(d[a]!=c){(b||(b=[])).push(d[a])}}return b}function jE(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b];b.marker.attachLine(a)}function mv(h,g,c){if(h){for(var e=0,b;e<h.length;++e){var a=h[e],d=a.marker;var i=a.from==null||(d.inclusiveLeft?a.from<=g:a.from<g);if(i||a.from==g&&d.type=="bookmark"&&(!c||!a.marker.insertLeft)){var f=a.to==null||(d.inclusiveRight?a.to>=g:a.to>g);(b||(b=[])).push(new j9(d,a.from,f?null:a.to))}}}return b}function mI(h,f,c){if(h){for(var e=0,b;e<h.length;++e){var a=h[e],d=a.marker;var g=a.to==null||(d.inclusiveRight?a.to>=f:a.to>f);if(g||a.from==f&&d.type=="bookmark"&&(!c||a.marker.insertLeft)){var i=a.from==null||(d.inclusiveLeft?a.from<=f:a.from<f);(b||(b=[])).push(new j9(d,i?null:a.from-f,a.to==null?null:a.to-f))}}}return b}function j1(n,q){var a=mg(n,q.from.line)&&iT(n,q.from.line).markedSpans;var k=mg(n,q.to.line)&&iT(n,q.to.line).markedSpans;if(!a&&!k){return null}var h=q.from.ch,e=q.to.ch,b=jx(q.from,q.to)==0;var c=mv(a,h,b);var l=mI(k,e,b);var m=q.text.length==1,g=gf(q.text).length+(m?h:0);if(c){for(var f=0;f<c.length;++f){var o=c[f];if(o.to==null){var j=hz(l,o.marker);if(!j){o.to=h}else{if(m){o.to=j.to==null?null:j.to+g}}}}}if(l){for(var f=0;f<l.length;++f){var o=l[f];if(o.to!=null){o.to+=g}if(o.from==null){var j=hz(c,o.marker);if(!j){o.from=g;if(m){(c||(c=[])).push(o)}}}else{o.from+=g;if(m){(c||(c=[])).push(o)}}}}if(c){c=iQ(c)}if(l&&l!=c){l=iQ(l)}var d=[c];if(!m){var p=q.text.length-2,i;if(p>0&&c){for(var f=0;f<c.length;++f){if(c[f].to==null){(i||(i=[])).push(new j9(c[f].marker,null,null))}}}for(var f=0;f<p;++f){d.push(i)}d.push(l)}return d}function iQ(c){for(var a=0;a<c.length;++a){var b=c[a];if(b.from!=null&&b.from==b.to&&b.marker.clearWhenEmpty!==false){c.splice(a--,1)}}if(!c.length){return null}return c}function iu(a,c){var i=mp(a,c);var j=j1(a,c);if(!i){return j}if(!j){return i}for(var f=0;f<i.length;++f){var e=i[f],d=j[f];if(e&&d){spans:for(var g=0;g<d.length;++g){var b=d[g];for(var h=0;h<e.length;++h){if(e[h].marker==b.marker){continue spans}}e.push(b)}}else{if(d){i[f]=d}}}return i}function k0(j,l,k){var e=null;j.iter(l.line,k.line+1,function(p){if(p.markedSpans){for(var o=0;o<p.markedSpans.length;++o){var n=p.markedSpans[o].marker;if(n.readOnly&&(!e||ic(e,n)==-1)){(e||(e=[])).push(n)}}}});if(!e){return null}var d=[{from:l,to:k}];for(var c=0;c<e.length;++c){var b=e[c],g=b.find(0);for(var f=0;f<d.length;++f){var h=d[f];if(jx(h.to,g.from)<0||jx(h.from,g.to)>0){continue}var m=[f,1],i=jx(h.from,g.from),a=jx(h.to,g.to);if(i<0||!b.inclusiveLeft&&!i){m.push({from:h.from,to:g.from})}if(a>0||!b.inclusiveRight&&!a){m.push({from:g.to,to:h.to})}d.splice.apply(d,m);f+=m.length-1}}return d}function gT(a){var b=a.markedSpans;if(!b){return}for(var c=0;c<b.length;++c){b[c].marker.detachLine(a)}a.markedSpans=null}function jT(a,b){if(!b){return}for(var c=0;c<b.length;++c){b[c].marker.attachLine(a)}a.markedSpans=b}function iv(a){return a.inclusiveLeft?-1:0}function lq(a){return a.inclusiveRight?1:0}function jy(e,g){var c=e.lines.length-g.lines.length;if(c!=0){return c}var f=e.find(),b=g.find();var a=jx(f.from,b.from)||iv(e)-iv(g);if(a){return -a}var d=jx(f.to,b.to)||lq(e)-lq(g);if(d){return d}return g.id-e.id}function f8(f,b){var a=f7&&f.markedSpans,c;if(a){for(var d,e=0;e<a.length;++e){d=a[e];if(d.marker.collapsed&&(b?d.from:d.to)==null&&(!c||jy(c,d.marker)<0)){c=d.marker}}}return c}function id(a){return f8(a,true)}function g9(a){return f8(a,false)}function k9(a,g,c,b,e){var j=iT(a,g);var i=f7&&j.markedSpans;if(i){for(var f=0;f<i.length;++f){var h=i[f];if(!h.marker.collapsed){continue}var k=h.marker.find(0);var l=jx(k.from,c)||iv(h.marker)-iv(e);var d=jx(k.to,b)||lq(h.marker)-lq(e);if(l>=0&&d<=0||l<=0&&d>=0){continue}if(l<=0&&(jx(k.to,c)>0||(h.marker.inclusiveRight&&e.inclusiveLeft))||l>=0&&(jx(k.from,b)<0||(h.marker.inclusiveLeft&&e.inclusiveRight))){return true}}}}function ij(b){var a;while(a=id(b)){b=a.find(-1,true).line}return b}function jn(b){var a,c;while(a=g9(b)){b=a.find(1,true).line;(c||(c=[])).push(b)}return c}function mm(b,d){var a=iT(b,d),c=ij(a);if(a==c){return d}return lM(c)}function iS(b,c){if(c>b.lastLine()){return c}var d=iT(b,c),a;if(!gq(b,d)){return c}while(a=g9(d)){d=a.find(1,true).line}return lM(d)+1}function gq(b,e){var a=f7&&e.markedSpans;if(a){for(var c,d=0;d<a.length;++d){c=a[d];if(!c.marker.collapsed){continue}if(c.from==null){return true}if(c.marker.widgetNode){continue}if(c.from==0&&c.marker.inclusiveLeft&&j6(b,e,c)){return true}}}}function j6(b,f,d){if(d.to==null){var a=d.marker.find(1,true);return j6(b,a.line,hz(a.line.markedSpans,d.marker))}if(d.marker.inclusiveRight&&d.to==f.text.length){return true}for(var c,e=0;e<f.markedSpans.length;++e){c=f.markedSpans[e];if(c.marker.collapsed&&!c.marker.widgetNode&&c.from==d.to&&(c.to==null||c.to!=d.from)&&(c.marker.inclusiveLeft||d.marker.inclusiveRight)&&j6(b,f,c)){return true}}}var hF=kK.LineWidget=function(a,b,d){if(d){for(var c in d){if(d.hasOwnProperty(c)){this[c]=d[c]}}}this.cm=a;this.node=b};jQ(hF);function i4(a,c,b){if(lO(c)<((a.curOp&&a.curOp.scrollTop)||a.doc.scrollTop)){kO(a,null,b)}}hF.prototype.clear=function(){var f=this.cm,d=this.line.widgets,e=this.line,b=lM(e);if(b==null||!d){return}for(var c=0;c<d.length;++c){if(d[c]==this){d.splice(c--,1)}}if(!d.length){e.widgets=null}var a=kd(this);kL(f,function(){i4(f,e,-a);kf(f,b,"widget");gY(e,Math.max(0,e.height-a))})};hF.prototype.changed=function(){var d=this.height,a=this.cm,c=this.line;this.height=null;var b=kd(this)-d;if(!b){return}kL(a,function(){a.curOp.forceUpdate=true;i4(a,c,b);gY(c,c.height+b)})};function kd(b){if(b.height!=null){return b.height}if(!gO(document.body,b.node)){var a="position: relative;";if(b.coverGutter){a+="margin-left: -"+b.cm.getGutterElement().offsetWidth+"px;"}lC(b.cm.display.measure,g7("div",[b.node],null,a))}return b.height=b.node.offsetHeight}function lZ(a,b,d,e){var c=new hF(a,d,e);if(c.noHScroll){a.display.alignWidgets=true}g1(a.doc,b,"widget",function(g){var f=g.widgets||(g.widgets=[]);if(c.insertAt==null){f.push(c)}else{f.splice(Math.min(f.length-1,Math.max(0,c.insertAt)),0,c)}c.line=g;if(!gq(a.doc,g)){var h=lO(g)<a.doc.scrollTop;gY(g,g.height+kd(c));if(h){kO(a,null,c.height)}a.curOp.forceUpdate=true}return true});return c}var gU=kK.Line=function(b,c,a){this.text=b;jT(this,c);this.height=a?a(this):1};jQ(gU);gU.prototype.lineNo=function(){return lM(this)};function hp(e,b,d,a){e.text=b;if(e.stateAfter){e.stateAfter=null}if(e.styles){e.styles=null}if(e.order!=null){e.order=null}gT(e);jT(e,d);var c=a?a(e):1;if(c!=e.height){gY(e,c)}}function jK(a){a.parent=null;gT(a)}function ib(c,d){if(c){for(;;){var a=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a){break}c=c.slice(0,a.index)+c.slice(a.index+a[0].length);var b=a[1]?"bgClass":"textClass";if(d[b]==null){d[b]=a[2]}else{if(!(new RegExp("(?:^|s)"+a[2]+"(?:$|s)")).test(d[b])){d[b]+=" "+a[2]}}}}return c}function gw(b,c){if(b.blankLine){return b.blankLine(c)}if(!b.innerMode){return}var a=kK.innerMode(b,c);if(a.mode.blankLine){return a.mode.blankLine(a.state)}}function gV(b,c,d){for(var a=0;a<10;a++){var e=b.token(c,d);if(c.pos>c.start){return e}}throw new Error("Mode "+b.name+" failed to advance stream.")}function iq(m,k,d,h,c,f,e){var g=d.flattenSpans;if(g==null){g=m.options.flattenSpans}var a=0,b=null;var l=new h3(k,m.options.tabSize),i;if(k==""){ib(gw(d,h),f)}while(!l.eol()){if(l.pos>m.options.maxHighlightLength){g=false;if(e){hR(m,k,h,l.pos)}l.pos=k.length;i=null}else{i=ib(gV(d,l,h),f)}if(m.options.addModeClass){var j=kK.innerMode(d,h).mode.name;if(j){i="m-"+(i?j+" "+i:j)}}if(!g||b!=i){if(a<l.start){c(l.start,b)}a=l.start;b=i}l.start=l.pos}while(a<l.pos){var n=Math.min(l.pos,a+50000);c(n,b);a=n}}function gn(b,j,i,e){var a=[b.state.modeGen],f={};iq(b,j.text,b.doc.mode,i,function(l,k){a.push(l,k)},f,e);for(var h=0;h<b.state.overlays.length;++h){var d=b.state.overlays[h],c=1,g=0;iq(b,j.text,d.mode,true,function(o,m){var k=c;while(g<o){var n=a[c];if(n>o){a.splice(c,1,o,a[c+1],n)}c+=2;g=Math.min(o,n)}if(!m){return}if(d.opaque){a.splice(k,c-k,o,"cm-overlay "+m);c=k+2}else{for(;k<c;k+=2){var l=a[k+1];a[k+1]=(l?l+" ":"")+"cm-overlay "+m}}},f)}return{styles:a,classes:f.bgClass||f.textClass?f:null}}function lF(c,b){if(!b.styles||b.styles[0]!=c.state.modeGen){var a=gn(c,b,b.stateAfter=hH(c,lM(b)));b.styles=a.styles;if(a.classes){b.styleClasses=a.classes}else{if(b.styleClasses){b.styleClasses=null}}}return b.styles}function hR(a,b,e,f){var c=a.doc.mode;var d=new h3(b,a.options.tabSize);d.start=d.pos=f||0;if(b==""){gw(c,e)}while(!d.eol()&&d.pos<=a.options.maxHighlightLength){gV(c,d,e);d.start=d.pos}}var jg={},lb={};function hW(b,c){if(!b||/^\s*$/.test(b)){return null}var a=c.addModeClass?lb:jg;return a[b]||(a[b]=b.replace(/\S+/g,"cm-$&"))}function h6(g,c){var b=g7("span",null,null,j3?"padding-right: .1px":null);var e={pre:g7("pre",[b]),content:b,col:0,pos:0,cm:g};c.measure={};for(var d=0;d<=(c.rest?c.rest.length:0);d++){var f=d?c.rest[d-1]:c.line,a;e.pos=0;e.addToken=iE;if((hr||j3)&&g.getOption("lineWrapping")){e.addToken=gh(e.addToken)}if(lK(g.display.measure)&&(a=jJ(f))){e.addToken=j2(e.addToken,a)}e.map=[];ku(f,e,lF(g,f));if(f.styleClasses){if(f.styleClasses.bgClass){e.bgClass=hg(f.styleClasses.bgClass,e.bgClass||"")}if(f.styleClasses.textClass){e.textClass=hg(f.styleClasses.textClass,e.textClass||"")}}if(e.map.length==0){e.map.push(0,0,e.content.appendChild(kx(g.display.measure)))}if(d==0){c.measure.map=e.map;c.measure.cache={}}else{(c.measure.maps||(c.measure.maps=[])).push(e.map);(c.measure.caches||(c.measure.caches=[])).push({})}}mG(g,"renderLine",g,c.line,e.pre);if(e.pre.className){e.textClass=hg(e.pre.className,e.textClass||"")}return e}function ht(b){var a=g7("span","\u2022","cm-invalidchar");a.title="\\u"+b.charCodeAt(0).toString(16);return a}function iE(d,k,i,f,j,l){if(!k){return}var p=d.cm.options.specialChars,q=false;if(!p.test(k)){d.col+=k.length;var a=document.createTextNode(k);d.map.push(d.pos,d.pos+k.length,a);if(hr&&jc<9){q=true}d.pos+=k.length}else{var a=document.createDocumentFragment(),n=0;while(true){p.lastIndex=n;var h=p.exec(k);var b=h?h.index-n:k.length-n;if(b){var e=document.createTextNode(k.slice(n,n+b));if(hr&&jc<9){a.appendChild(g7("span",[e]))}else{a.appendChild(e)}d.map.push(d.pos,d.pos+b,e);d.col+=b;d.pos+=b}if(!h){break}n+=b+1;if(h[0]=="\t"){var c=d.cm.options.tabSize,o=c-d.col%c;var e=a.appendChild(g7("span",iZ(o),"cm-tab"));d.col+=o}else{var e=d.cm.options.specialCharPlaceholder(h[0]);if(hr&&jc<9){a.appendChild(g7("span",[e]))}else{a.appendChild(e)}d.col+=1}d.map.push(d.pos,d.pos+1,e);d.pos++}}if(i||f||j||q){var m=i||"";if(f){m+=f}if(j){m+=j}var g=g7("span",[a],m);if(l){g.title=l}return d.content.appendChild(g)}d.content.appendChild(a)}function gh(a){function b(e){var d=" ";for(var c=0;c<e.length-2;++c){d+=c%2?" ":"\u00a0"}d+=" ";return d}return function(g,c,f,h,d,e){a(g,c.replace(/ {3,}/g,b),f,h,d,e)}}function j2(b,a){return function(c,k,i,e,j,l){i=i?i+" cm-force-border":"cm-force-border";var h=c.pos,f=h+k.length;for(;;){for(var d=0;d<a.length;d++){var g=a[d];if(g.to>h&&g.from<=h){break}}if(g.to>=f){return b(c,k,i,e,j,l)}b(c,k.slice(0,g.to-h),i,e,null,l);e=null;k=k.slice(g.to-h);h=g.to}}}function l4(e,c,a,d){var b=!d&&a.widgetNode;if(b){e.map.push(e.pos,e.pos+c,b);e.content.appendChild(b)}e.pos+=c}function ku(x,r,a){var d=x.markedSpans,b=x.text,t=0;if(!d){for(var o=1;o<a.length;o+=2){r.addToken(r,b.slice(t,t=a[o]),hW(a[o+1],r.cm.options))}return}var n=b.length,e=0,o=1,v="",m;var k=0,i,l,u,j,g;for(;;){if(k==e){i=l=u=j="";g=null;k=Infinity;var c=[];for(var q=0;q<d.length;++q){var p=d[q],s=p.marker;if(p.from<=e&&(p.to==null||p.to>e)){if(p.to!=null&&k>p.to){k=p.to;l=""}if(s.className){i+=" "+s.className}if(s.startStyle&&p.from==e){u+=" "+s.startStyle}if(s.endStyle&&p.to==k){l+=" "+s.endStyle}if(s.title&&!j){j=s.title}if(s.collapsed&&(!g||jy(g.marker,s)<0)){g=p}}else{if(p.from>e&&k>p.from){k=p.from}}if(s.type=="bookmark"&&p.from==e&&s.widgetNode){c.push(s)}}if(g&&(g.from||0)==e){l4(r,(g.to==null?n+1:g.to)-e,g.marker,g.from==null);if(g.to==null){return}}if(!g&&c.length){for(var q=0;q<c.length;++q){l4(r,0,c[q])}}}if(e>=n){break}var w=Math.min(n,k);while(true){if(v){var h=e+v.length;if(!g){var f=h>w?v.slice(0,w-e):v;r.addToken(r,f,m?m+i:i,u,e+f.length==k?l:"",j)}if(h>=w){v=v.slice(w-e);e=w;break}e=h;u=""}v=b.slice(t,t=a[o++]);m=hW(a[o++],r.cm.options)}}}function jq(a,b){return b.from.ch==0&&b.to.ch==0&&gf(b.text)==""&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function go(l,a,i,e){function k(q){return i?i[q]:null}function h(s,q,r){hp(s,q,r,e);l0(s,"change",s,a)}var n=a.from,m=a.to,j=a.text;var p=iT(l,n.line),o=iT(l,m.line);var b=gf(j),f=k(j.length-1),c=m.line-n.line;if(jq(l,a)){for(var g=0,d=[];g<j.length-1;++g){d.push(new gU(j[g],k(g),e))}h(o,o.text,f);if(c){l.remove(n.line,c)}if(d.length){l.insert(n.line,d)}}else{if(p==o){if(j.length==1){h(p,p.text.slice(0,n.ch)+b+p.text.slice(m.ch),f)}else{for(var d=[],g=1;g<j.length-1;++g){d.push(new gU(j[g],k(g),e))}d.push(new gU(b+p.text.slice(m.ch),f,e));h(p,p.text.slice(0,n.ch)+j[0],k(0));l.insert(n.line+1,d)}}else{if(j.length==1){h(p,p.text.slice(0,n.ch)+j[0]+o.text.slice(m.ch),k(0));l.remove(n.line+1,c)}else{h(p,p.text.slice(0,n.ch)+j[0],k(0));h(o,b+o.text.slice(m.ch),f);for(var g=1,d=[];g<j.length-1;++g){d.push(new gU(j[g],k(g),e))}if(c>1){l.remove(n.line+1,c-1)}l.insert(n.line+1,d)}}}l0(l,"change",l,a)}function hQ(c){this.lines=c;this.parent=null;for(var b=0,a=0;b<c.length;++b){c[b].parent=this;a+=c[b].height}this.height=a}hQ.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var d=a,c=a+b;d<c;++d){var e=this.lines[d];this.height-=e.height;jK(e);l0(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(d,c,a){this.height+=a;this.lines=this.lines.slice(0,d).concat(c).concat(this.lines.slice(d));for(var b=0;b<c.length;++b){c[b].parent=this}},iterN:function(a,b,c){for(var d=a+b;a<d;++a){if(c(this.lines[a])){return true}}}};function gp(c){this.children=c;var d=0,a=0;for(var e=0;e<c.length;++e){var b=c[e];d+=b.chunkSize();a+=b.height;b.parent=this}this.size=d;this.height=a;this.parent=null}gp.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var g=0;g<this.children.length;++g){var c=this.children[g],e=c.chunkSize();if(a<e){var f=Math.min(b,e-a),d=c.height;c.removeInner(a,f);this.height-=d-c.height;if(e==f){this.children.splice(g--,1);c.parent=null}if((b-=f)==0){break}a=0}else{a-=e}}if(this.size-b<25&&(this.children.length>1||!(this.children[0] instanceof hQ))){var h=[];this.collapse(h);this.children=[new hQ(h)];this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b){this.children[b].collapse(a)}},insertInner:function(h,g,a){this.size+=g.length;this.height+=a;for(var d=0;d<this.children.length;++d){var b=this.children[d],c=b.chunkSize();if(h<=c){b.insertInner(h,g,a);if(b.lines&&b.lines.length>50){while(b.lines.length>50){var e=b.lines.splice(b.lines.length-25,25);var f=new hQ(e);b.height-=f.height;this.children.splice(d+1,0,f);f.parent=this}this.maybeSpill()}break}h-=c}},maybeSpill:function(){if(this.children.length<=10){return}var c=this;do{var e=c.children.splice(c.children.length-5,5);var d=new gp(e);if(!c.parent){var b=new gp(c.children);b.parent=c;c.children=[b,d];c=b}else{c.size-=d.size;c.height-=d.height;var a=ic(c.parent.children,c);c.parent.children.splice(a+1,0,d)}d.parent=c.parent}while(c.children.length>10);c.parent.maybeSpill()},iterN:function(a,b,c){for(var g=0;g<this.children.length;++g){var d=this.children[g],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a);if(d.iterN(a,f,c)){return true}if((b-=f)==0){break}a=0}else{a-=e}}}};var iU=0;var lo=kK.Doc=function(c,d,a){if(!(this instanceof lo)){return new lo(c,d,a)}if(a==null){a=0}gp.call(this,[new hQ([new gU("",null)])]);this.first=a;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=a;var b=jU(a,0);this.sel=h4(b);this.history=new he(null);this.id=++iU;this.modeOption=d;if(typeof c=="string"){c=md(c)}go(this,{from:b,to:b,text:c});lu(this,h4(b),jN)};lo.prototype=jf(gp.prototype,{constructor:lo,iter:function(b,c,a){if(a){this.iterN(b-this.first,c-b,a)}else{this.iterN(this.first,this.first+this.size,b)}},insert:function(d,c){var a=0;for(var b=0;b<c.length;++b){a+=c[b].height}this.insertInner(d-this.first,c,a)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(b){var a=ma(this,this.first,this.first+this.size);if(b===false){return a}return a.join(b||"\n")},setValue:k8(function(c){var b=jU(this.first,0),a=this.first+this.size-1;k3(this,{from:b,to:jU(a,iT(this,a).text.length),text:md(c),origin:"setValue"},true);lu(this,h4(b))}),replaceRange:function(d,b,c,a){b=gd(this,b);c=c?gd(this,c):b;mc(this,d,b,c,a)},getRange:function(b,c,d){var a=g2(this,gd(this,b),gd(this,c));if(d===false){return a}return a.join(d||"\n")},getLine:function(b){var a=this.getLineHandle(b);return a&&a.text},getLineHandle:function(a){if(mg(this,a)){return iT(this,a)}},getLineNumber:function(a){return lM(a)},getLineHandleVisualStart:function(a){if(typeof a=="number"){a=iT(this,a)}return ij(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return gd(this,a)},getCursor:function(b){var a=this.sel.primary(),c;if(b==null||b=="head"){c=a.head}else{if(b=="anchor"){c=a.anchor}else{if(b=="end"||b=="to"||b===false){c=a.to()}else{c=a.from()}}}return c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:k8(function(a,b,c){kP(this,gd(this,typeof a=="number"?jU(a,b||0):a),null,c)}),setSelection:k8(function(c,b,a){kP(this,gd(this,c),gd(this,b||c),a)}),extendSelection:k8(function(b,a,c){hc(this,gd(this,b),a&&gd(this,a),c)}),extendSelections:k8(function(b,a){lf(this,i6(this,b,a))}),extendSelectionsBy:k8(function(b,a){lf(this,lz(this.sel.ranges,b),a)}),setSelections:k8(function(a,b,d){if(!a.length){return}for(var c=0,e=[];c<a.length;c++){e[c]=new i9(gd(this,a[c].anchor),gd(this,a[c].head))}if(b==null){b=Math.min(a.length-1,this.sel.primIndex)}lu(this,iB(e,b),d)}),addSelection:k8(function(c,b,d){var a=this.sel.ranges.slice(0);a.push(new i9(gd(this,c),gd(this,b||c)));lu(this,iB(a,a.length-1),d)}),getSelection:function(b){var e=this.sel.ranges,a;for(var d=0;d<e.length;d++){var c=g2(this,e[d].from(),e[d].to());a=a?a.concat(c):c}if(b===false){return a}else{return a.join(b||"\n")}},getSelections:function(b){var c=[],a=this.sel.ranges;for(var e=0;e<a.length;e++){var d=g2(this,a[e].from(),a[e].to());if(b!==false){d=d.join(b||"\n")}c[e]=d}return c},replaceSelection:function(d,b,a){var c=[];for(var e=0;e<this.sel.ranges.length;e++){c[e]=d}this.replaceSelections(c,b,a||"+input")},replaceSelections:k8(function(d,b,g){var e=[],c=this.sel;for(var f=0;f<c.ranges.length;f++){var h=c.ranges[f];e[f]={from:h.from(),to:h.to(),text:md(d[f]),origin:g}}var a=b&&b!="end"&&lY(this,e,b);for(var f=e.length-1;f>=0;f--){k3(this,e[f])}if(a){hD(this,a)}else{if(this.cm){gg(this.cm)}}}),undo:k8(function(){mi(this,"undo")}),redo:k8(function(){mi(this,"redo")}),undoSelection:k8(function(){mi(this,"undo",true)}),redoSelection:k8(function(){mi(this,"redo",true)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){var b=this.history,a=0,c=0;for(var d=0;d<b.done.length;d++){if(!b.done[d].ranges){++a}}for(var d=0;d<b.undone.length;d++){if(!b.undone[d].ranges){++c}}return{undo:a,redo:c}},clearHistory:function(){this.history=new he(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(a){if(a){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:lJ(this.history.done),undone:lJ(this.history.undone)}},setHistory:function(b){var a=this.history=new he(this.history.maxGeneration);a.done=lJ(b.done.slice(0),null,true);a.undone=lJ(b.undone.slice(0),null,true)},addLineClass:k8(function(b,c,a){return g1(this,b,"class",function(e){var d=c=="text"?"textClass":c=="background"?"bgClass":"wrapClass";if(!e[d]){e[d]=a}else{if(new RegExp("(?:^|\\s)"+a+"(?:$|\\s)").test(e[d])){return false}else{e[d]+=" "+a}}return true})}),removeLineClass:k8(function(b,c,a){return g1(this,b,"class",function(g){var d=c=="text"?"textClass":c=="background"?"bgClass":"wrapClass";var e=g[d];if(!e){return false}else{if(a==null){g[d]=null}else{var f=e.match(new RegExp("(?:^|\\s+)"+a+"(?:$|\\s+)"));if(!f){return false}var h=f.index+f[0].length;g[d]=e.slice(0,f.index)+(!f.index||h==e.length?"":" ")+e.slice(h)||null}}return true})}),markText:function(b,c,a){return gN(this,gd(this,b),gd(this,c),a,"range")},setBookmark:function(b,a){var c={replacedWith:a&&(a.nodeType==null?a.widget:a),insertLeft:a&&a.insertLeft,clearWhenEmpty:false,shared:a&&a.shared};b=gd(this,b);return gN(this,b,b,c,"bookmark")},findMarksAt:function(b){b=gd(this,b);var c=[],e=iT(this,b.line).markedSpans;if(e){for(var a=0;a<e.length;++a){var d=e[a];if((d.from==null||d.from<=b.ch)&&(d.to==null||d.to>=b.ch)){c.push(d.marker.parent||d.marker)}}}return c},findMarks:function(b,c,a){b=gd(this,b);c=gd(this,c);var e=[],d=b.line;this.iter(b.line,c.line+1,function(i){var g=i.markedSpans;if(g){for(var h=0;h<g.length;h++){var f=g[h];if(!(d==b.line&&b.ch>f.to||f.from==null&&d!=b.line||d==c.line&&f.from>c.ch)&&(!a||a(f.marker))){e.push(f.marker.parent||f.marker)}}}++d});return e},getAllMarks:function(){var a=[];this.iter(function(c){var d=c.markedSpans;if(d){for(var b=0;b<d.length;++b){if(d[b].from!=null){a.push(d[b].marker)}}}});return a},posFromIndex:function(c){var a,b=this.first;this.iter(function(e){var d=e.text.length+1;if(d>c){a=c;return true}c-=d;++b});return gd(this,jU(b,a))},indexFromPos:function(b){b=gd(this,b);var a=b.ch;if(b.line<this.first||b.ch<0){return 0}this.iter(this.first,b.line,function(c){a+=c.text.length+1});return a},copy:function(a){var b=new lo(ma(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=false;if(a){b.history.undoDepth=this.history.undoDepth;b.setHistory(this.getHistory())}return b},linkedDoc:function(a){if(!a){a={}}var b=this.first,c=this.first+this.size;if(a.from!=null&&a.from>b){b=a.from}if(a.to!=null&&a.to<c){c=a.to}var d=new lo(ma(this,b,c),a.mode||this.modeOption,b);if(a.sharedHist){d.history=this.history}(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist});d.linked=[{doc:this,isParent:true,sharedHist:a.sharedHist}];hy(d,ia(this));return d},unlinkDoc:function(d){if(d instanceof kK){d=d.doc}if(this.linked){for(var c=0;c<this.linked.length;++c){var b=this.linked[c];if(b.doc!=d){continue}this.linked.splice(c,1);d.unlinkDoc(this);hn(ia(this));break}}if(d.history==this.history){var a=[d.id];iA(d,function(e){a.push(e.id)},true);d.history=new he(null);d.history.done=lJ(this.history.done,a);d.history.undone=lJ(this.history.undone,a)}},iterLinkedDocs:function(a){iA(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});lo.prototype.eachLine=lo.prototype.iter;var jA="iter insert remove copy getEditor".split(" ");for(var lT in lo.prototype){if(lo.prototype.hasOwnProperty(lT)&&ic(jA,lT)<0){kK.prototype[lT]=(function(a){return function(){return a.apply(this.doc,arguments)}})(lo.prototype[lT])}}jQ(lo);function iA(b,c,d){function a(j,f,h){if(j.linked){for(var g=0;g<j.linked.length;++g){var i=j.linked[g];if(i.doc==f){continue}var e=h&&i.sharedHist;if(d&&!e){continue}c(i.doc,e);a(i.doc,j,e)}}}a(b,null,true)}function io(a,b){if(b.cm){throw new Error("This document is already in use.")}a.doc=b;b.cm=a;jR(a);kl(a);if(!a.options.lineWrapping){jr(a)}a.options.mode=b.modeOption;lV(a)}function iT(d,b){b-=d.first;if(b<0||b>=d.size){throw new Error("There is no line "+(b+d.first)+" in the document.")}for(var a=d;!a.lines;){for(var f=0;;++f){var c=a.children[f],e=c.chunkSize();if(b<e){a=c;break}b-=e}}return a.lines[b]}function g2(d,b,a){var e=[],c=b.line;d.iter(b.line,a.line+1,function(g){var f=g.text;if(c==a.line){f=f.slice(0,a.ch)}if(c==b.line){f=f.slice(b.ch)}e.push(f);++c});return e}function ma(d,b,c){var a=[];d.iter(b,c,function(e){a.push(e.text)});return a}function gY(d,a){var c=a-d.height;if(c){for(var b=d;b;b=b.parent){b.height+=c}}}function lM(a){if(a.parent==null){return null}var b=a.parent,c=ic(b.lines,a);for(var e=b.parent;e;b=e,e=e.parent){for(var d=0;;++d){if(e.children[d]==b){break}c+=e.children[d].chunkSize()}}return c+b.first}function l1(g,d){var b=g.first;outer:do{for(var f=0;f<g.children.length;++f){var c=g.children[f],e=c.height;if(d<e){g=c;continue outer}d-=e;b+=c.chunkSize()}return b}while(!g.lines);for(var f=0;f<g.lines.length;++f){var h=g.lines[f],a=h.height;if(d<a){break}d-=a}return b+f}function lO(f){f=ij(f);var d=0,g=f.parent;for(var e=0;e<g.lines.length;++e){var a=g.lines[e];if(a==f){break}else{d+=a.height}}for(var c=g.parent;c;g=c,c=g.parent){for(var e=0;e<c.children.length;++e){var b=c.children[e];if(b==g){break}else{d+=b.height}}}return d}function jJ(b){var a=b.order;if(a==null){a=b.order=kY(b.text)}return a}function he(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=a||1}function hU(a,b){var c={from:jm(b.from),to:kh(b),text:g2(a,b.from,b.to)};li(a,c,b.from.line,b.to.line+1);iA(a,function(d){li(d,c,b.from.line,b.to.line+1)},true);return c}function gl(b){while(b.length){var a=gf(b);if(a.ranges){b.pop()}else{break}}}function ih(b,a){if(a){gl(b.done);return gf(b.done)}else{if(b.done.length&&!gf(b.done).ranges){return gf(b.done)}else{if(b.done.length>1&&!b.done[b.done.length-2].ranges){b.done.pop();return gf(b.done)}}}}function hq(c,e,i,f){var g=c.history;g.undone.length=0;var h=+new Date,b;if((g.lastOp==f||g.lastOrigin==e.origin&&e.origin&&((e.origin.charAt(0)=="+"&&c.cm&&g.lastModTime>h-c.cm.options.historyEventDelay)||e.origin.charAt(0)=="*"))&&(b=ih(g,g.lastOp==f))){var a=gf(b.changes);if(jx(e.from,e.to)==0&&jx(e.from,a.to)==0){a.to=kh(e)}else{b.changes.push(hU(c,e))}}else{var d=gf(g.done);if(!d||!d.ranges){kH(c.sel,g.done)}b={changes:[hU(c,e)],generation:g.generation};g.done.push(b);while(g.done.length>g.undoDepth){g.done.shift();if(!g.done[0].ranges){g.done.shift()}}}g.done.push(i);g.generation=++g.maxGeneration;g.lastModTime=g.lastSelTime=h;g.lastOp=g.lastSelOp=f;g.lastOrigin=g.lastSelOrigin=e.origin;if(!a){mG(c,"historyAdded")}}function jL(b,a,d,c){var e=a.charAt(0);return e=="*"||e=="+"&&d.ranges.length==c.ranges.length&&d.somethingSelected()==c.somethingSelected()&&new Date-b.history.lastSelTime<=(b.cm?b.cm.options.historyEventDelay:500)}function gM(b,d,a,e){var c=b.history,f=e&&e.origin;if(a==c.lastSelOp||(f&&c.lastSelOrigin==f&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==f||jL(b,f,gf(c.done),d)))){c.done[c.done.length-1]=d}else{kH(d,c.done)}c.lastSelTime=+new Date;c.lastSelOrigin=f;c.lastSelOp=a;if(e&&e.clearRedo!==false){gl(c.undone)}}function kH(c,a){var b=gf(a);if(!(b&&b.ranges&&b.equals(c))){a.push(c)}}function li(f,b,c,d){var a=b["spans_"+f.id],e=0;f.iter(Math.max(f.first,c),Math.min(f.first+f.size,d),function(g){if(g.markedSpans){(a||(a=b["spans_"+f.id]={}))[e]=g.markedSpans}++e})}function kJ(b){if(!b){return null}for(var c=0,a;c<b.length;++c){if(b[c].marker.explicitlyCleared){if(!a){a=b.slice(0,c)}}else{if(a){a.push(b[c])}}}return !a?b:a.length?a:null}function mp(c,b){var d=b["spans_"+c.id];if(!d){return null}for(var e=0,a=[];e<b.text.length;++e){a.push(kJ(d[e]))}return a}function lJ(j,f,k){for(var c=0,h=[];c<j.length;++c){var g=j[c];if(g.ranges){h.push(k?g4.prototype.deepCopy.call(g):g);continue}var a=g.changes,l=[];h.push({changes:l});for(var d=0;d<a.length;++d){var b=a[d],e;l.push({from:b.from,to:b.to,text:b.text});if(f){for(var i in b){if(e=i.match(/^spans_(\d+)$/)){if(ic(f,Number(e[1]))>-1){gf(l)[i]=b[i];delete b[i]}}}}}}return h}function kG(b,c,d,a){if(d<b.line){b.line+=a}else{if(c<b.line){b.line=c;b.ch=0}}}function iM(f,d,c,b){for(var g=0;g<f.length;++g){var i=f[g],e=true;if(i.ranges){if(!i.copied){i=f[g]=i.deepCopy();i.copied=true}for(var h=0;h<i.ranges.length;h++){kG(i.ranges[h].anchor,d,c,b);kG(i.ranges[h].head,d,c,b)}continue}for(var h=0;h<i.changes.length;++h){var a=i.changes[h];if(c<a.from.line){a.from=jU(a.from.line+b,a.from.ch);a.to=jU(a.to.line+b,a.to.ch)}else{if(d<=a.to.line){e=false;break}}}if(!e){f.splice(0,g+1);g=0}}}function hA(e,b){var c=b.from.line,d=b.to.line,a=b.text.length-(d-c)-1;iM(e.done,c,d,a);iM(e.undone,c,d,a)}var k1=kK.e_preventDefault=function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};var h2=kK.e_stopPropagation=function(a){if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}};function lQ(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==false}var hh=kK.e_stop=function(a){k1(a);h2(a)};function kA(a){return a.target||a.srcElement}function ho(b){var a=b.which;if(a==null){if(b.button&1){a=1}else{if(b.button&2){a=3}else{if(b.button&4){a=2}}}}if(mk&&b.ctrlKey&&a==1){a=3}return a}var ll=kK.on=function(c,e,d){if(c.addEventListener){c.addEventListener(e,d,false)}else{if(c.attachEvent){c.attachEvent("on"+e,d)}else{var b=c._handlers||(c._handlers={});var a=b[e]||(b[e]=[]);a.push(d)}}};var kr=kK.off=function(b,d,c){if(b.removeEventListener){b.removeEventListener(d,c,false)}else{if(b.detachEvent){b.detachEvent("on"+d,c)}else{var a=b._handlers&&b._handlers[d];if(!a){return}for(var e=0;e<a.length;++e){if(a[e]==c){a.splice(e,1);break}}}}};var mG=kK.signal=function(b,c){var a=b._handlers&&b._handlers[c];if(!a){return}var e=Array.prototype.slice.call(arguments,2);for(var d=0;d<a.length;++d){a[d].apply(null,e)}};var jO=null;function l0(b,d){var a=b._handlers&&b._handlers[d];if(!a){return}var f=Array.prototype.slice.call(arguments,2),c;if(kt){c=kt.delayedCallbacks}else{if(jO){c=jO}else{c=jO=[];setTimeout(mz,0)}}function g(h){return function(){h.apply(null,f)}}for(var e=0;e<a.length;++e){c.push(g(a[e]))}}function mz(){var a=jO;jO=null;for(var b=0;b<a.length;++b){a[b]()}}function mt(a,b,c){mG(a,c||b.type,a,b);return lQ(b)||b.codemirrorIgnore}function jY(d){var a=d._handlers&&d._handlers.cursorActivity;if(!a){return}var b=d.curOp.cursorActivityHandlers||(d.curOp.cursorActivityHandlers=[]);for(var c=0;c<a.length;++c){if(ic(b,a[c])==-1){b.push(a[c])}}}function iH(b,c){var a=b._handlers&&b._handlers[c];return a&&a.length>0}function jQ(a){a.prototype.on=function(c,b){ll(this,c,b)};a.prototype.off=function(c,b){kr(this,c,b)}}var kM=30;var me=kK.Pass={toString:function(){return"CodeMirror.Pass"}};var jN={scroll:false},ky={origin:"*mouse"},ki={origin:"+move"};function hO(){this.id=null}hO.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var lw=kK.countColumn=function(f,h,d,c,g){if(h==null){h=f.search(/[^\s\u00a0]/);if(h==-1){h=f.length}}for(var e=c||0,b=g||0;;){var a=f.indexOf("\t",e);if(a<0||a>=h){return b+(h-e)}b+=a-e;b+=d-(b%d);e=a+1}};function hi(d,e,c){for(var b=0,f=0;;){var g=d.indexOf("\t",b);if(g==-1){g=d.length}var a=g-b;if(g==d.length||f+a>=e){return b+Math.min(a,e-f)}f+=g-b;f+=c-(f%c);b=g+1;if(f>=e){return b}}}var mf=[""];function iZ(a){while(mf.length<=a){mf.push(gf(mf)+" ")}return mf[a]}function gf(a){return a[a.length-1]}var jI=function(a){a.select()};if(hM){jI=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}}else{if(hr){jI=function(b){try{b.select()}catch(a){}}}}function ic(b,a){for(var c=0;c<b.length;++c){if(b[c]==a){return c}}return -1}if([].indexOf){ic=function(b,a){return b.indexOf(a)}}function lz(b,c){var a=[];for(var d=0;d<b.length;d++){a[d]=c(b[d],d)}return a}if([].map){lz=function(b,a){return b.map(a)}}function jf(b,a){var c;if(Object.create){c=Object.create(b)}else{var d=function(){};d.prototype=b;c=new d()}if(a){my(a,c)}return c}function my(c,d,a){if(!d){d={}}for(var b in c){if(c.hasOwnProperty(b)&&(a!==false||!d.hasOwnProperty(b))){d[b]=c[b]}}return d}function iD(b){var a=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,a)}}var f2=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var gj=kK.isWordChar=function(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||f2.test(a))};function im(a,b){if(!b){return gj(a)}if(b.source.indexOf("\\w")>-1&&gj(a)){return true}return b.test(a)}function h0(a){for(var b in a){if(a.hasOwnProperty(b)&&a[b]){return false}}return true}var gE=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function gx(a){return a.charCodeAt(0)>=768&&gE.test(a)}function g7(a,c,d,e){var b=document.createElement(a);if(d){b.className=d}if(e){b.style.cssText=e}if(typeof c=="string"){b.appendChild(document.createTextNode(c))}else{if(c){for(var f=0;f<c.length;++f){b.appendChild(c[f])}}}return b}var jb;if(document.createRange){jb=function(c,b,a){var d=document.createRange();d.setEnd(c,a);d.setStart(c,b);return d}}else{jb=function(c,b,a){var d=document.body.createTextRange();d.moveToElementText(c.parentNode);d.collapse(true);d.moveEnd("character",a);d.moveStart("character",b);return d}}function iY(b){for(var a=b.childNodes.length;a>0;--a){b.removeChild(b.firstChild)}return b}function lC(a,b){return iY(a).appendChild(b)}function gO(a,b){if(a.contains){return a.contains(b)}while(b=b.parentNode){if(b==a){return true}}}function jC(){return document.activeElement}if(hr&&jc<11){jC=function(){try{return document.activeElement}catch(a){return document.body}}}function kb(a){return new RegExp("\\b"+a+"\\b\\s*")}function jt(c,a){var b=kb(a);if(b.test(c.className)){c.className=c.className.replace(b,"")}}function gm(b,a){if(!kb(a).test(b.className)){b.className+=" "+a}}function hg(c,a){var d=c.split(" ");for(var b=0;b<d.length;b++){if(d[b]&&!kb(d[b]).test(a)){a+=" "+d[b]}}return a}function la(b){if(!document.body.getElementsByClassName){return}var c=document.body.getElementsByClassName("CodeMirror");for(var d=0;d<c.length;d++){var a=c[d].CodeMirror;if(a){b(a)}}}var ii=false;function kS(){if(ii){return}gi();ii=true}function gi(){var a;ll(window,"resize",function(){if(a==null){a=setTimeout(function(){a=null;g6=null;la(mq)},100)}});ll(window,"blur",function(){la(mo)})}var gB=function(){if(hr&&jc<9){return false}var a=g7("div");return"draggable" in a||"dragDrop" in a}();var g6;function je(a){if(g6!=null){return g6}var b=g7("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");lC(a,b);if(b.offsetWidth){g6=b.offsetHeight-b.clientHeight}return g6||0}var gb;function kx(a){if(gb==null){var b=g7("span","\u200b");lC(a,g7("span",[b,document.createTextNode("x")]));if(a.firstChild.offsetHeight!=0){gb=b.offsetWidth<=1&&b.offsetHeight>2&&!(hr&&jc<8)}}if(gb){return g7("span","\u200b")}else{return g7("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var gc;function lK(b){if(gc!=null){return gc}var a=lC(b,document.createTextNode("A\u062eA"));var c=jb(a,0,1).getBoundingClientRect();if(!c||c.left==c.right){return false}var d=jb(a,1,2).getBoundingClientRect();return gc=(d.right-c.right<3)}var md=kK.splitLines="\n\nb".split(/\n/).length!=3?function(c){var b=0,a=[],d=c.length;while(b<=d){var e=c.indexOf("\n",b);if(e==-1){e=c.length}var f=c.slice(b,c.charAt(e-1)=="\r"?e-1:e);var g=f.indexOf("\r");if(g!=-1){a.push(f.slice(0,g));b+=g+1}else{a.push(f);b=e+1}}return a}:function(a){return a.split(/\r\n?|\n/)};var ke=window.getSelection?function(b){try{return b.selectionStart!=b.selectionEnd}catch(a){return false}}:function(b){try{var a=b.ownerDocument.selection.createRange()}catch(c){}if(!a||a.parentElement()!=b){return false}return a.compareEndPoints("StartToEnd",a)!=0};var lt=(function(){var a=g7("div");if("oncopy" in a){return true}a.setAttribute("oncopy","return;");return typeof a.oncopy=="function"})();var hE=null;function mA(d){if(hE!=null){return hE}var c=lC(d,g7("span","x"));var b=c.getBoundingClientRect();var a=jb(c,0,1).getBoundingClientRect();return hE=Math.abs(b.left-a.left)>1}var iP={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};kK.keyNames=iP;(function(){for(var a=0;a<10;a++){iP[a+48]=iP[a+96]=String(a)}for(var a=65;a<=90;a++){iP[a]=String.fromCharCode(a)}for(var a=1;a<=12;a++){iP[a+111]=iP[a+63235]="F"+a}})();function iL(a,b,c,d){if(!a){return d(b,c,"ltr")}var e=false;for(var f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b){d(Math.max(g.from,b),Math.min(g.to,c),g.level==1?"rtl":"ltr");e=true}}if(!e){d(b,c,"ltr")}}function hN(a){return a.level%2?a.to:a.from}function gI(a){return a.level%2?a.from:a.to}function k4(b){var a=jJ(b);return a?hN(a[0]):0}function kq(b){var a=jJ(b);if(!a){return b.text.length}return gI(gf(a))}function ka(f,c){var e=iT(f.doc,c);var b=ij(e);if(b!=e){c=lM(b)}var a=jJ(b);var d=!a?0:a[0].level%2?kq(b):k4(b);return jU(c,d)}function jz(e,b){var f,d=iT(e.doc,b);while(f=g9(d)){d=f.find(1,true).line;b=null}var a=jJ(d);var c=!a?d.text.length:a[0].level%2?k4(d):kq(d);return jU(b==null?lM(d):b,c)}function hs(g,b){var c=ka(g,b.line);var f=iT(g.doc,c.line);var a=jJ(f);if(!a||a[0].level==0){var d=Math.max(0,f.text.search(/\S/));var e=b.line==c.line&&b.ch<=d&&b.ch;return jU(c.line,e?0:d)}return c}function lI(d,c,a){var b=d[0].level;if(c==b){return true}if(a==b){return false}return c<a}var hK;function mE(a,b){hK=null;for(var e=0,d;e<a.length;++e){var c=a[e];if(c.from<b&&c.to>b){return e}if((c.from==b||c.to==b)){if(d==null){d=e}else{if(lI(a,c.level,a[d].level)){if(c.from!=c.to){hK=d}return e}else{if(c.from!=c.to){hK=e}return d}}}}return d}function iX(a,b,d,c){if(!c){return b+d}do{b+=d}while(b>0&&gx(a.text.charAt(b)));return b}function iz(a,b,g,f){var e=jJ(a);if(!e){return lS(a,b,g,f)}var c=mE(e,b),h=e[c];var d=iX(a,b,h.level%2?-g:g,f);for(;;){if(d>h.from&&d<h.to){return d}if(d==h.from||d==h.to){if(mE(e,d)==c){return d}h=e[c+=g];return(g>0)==h.level%2?h.to:h.from}else{h=e[c+=g];if(!h){return null}if((g>0)==h.level%2){d=iX(a,h.to,-1,f)}else{d=iX(a,h.from,1,f)}}}}function lS(a,b,e,d){var c=b+e;if(d){while(c>0&&gx(a.text.charAt(c))){c+=e}}return c<0||c>a.text.length?null:c}var kY=(function(){var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var e="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function f(k){if(k<=247){return c.charAt(k)}else{if(1424<=k&&k<=1524){return"R"}else{if(1536<=k&&k<=1773){return e.charAt(k-1536)}else{if(1774<=k&&k<=2220){return"r"}else{if(8192<=k&&k<=8203){return"w"}else{if(k==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var j=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,d=/[1n]/;var a="L";function b(k,l,m){this.level=k;this.from=l;this.to=m}return function(r){if(!i.test(r)){return false}var l=r.length,v=[];for(var m=0,z;m<l;++m){v.push(z=f(r.charCodeAt(m)))}for(var m=0,s=a;m<l;++m){var z=v[m];if(z=="m"){v[m]=s}else{s=z}}for(var m=0,B=a;m<l;++m){var z=v[m];if(z=="1"&&B=="r"){v[m]="n"}else{if(g.test(z)){B=z;if(z=="r"){v[m]="R"}}}}for(var m=1,s=v[0];m<l-1;++m){var z=v[m];if(z=="+"&&s=="1"&&v[m+1]=="1"){v[m]="1"}else{if(z==","&&s==v[m+1]&&(s=="1"||s=="n")){v[m]=s}}s=z}for(var m=0;m<l;++m){var z=v[m];if(z==","){v[m]="N"}else{if(z=="%"){for(var y=m+1;y<l&&v[y]=="%";++y){}var k=(m&&v[m-1]=="!")||(y<l&&v[y]=="1")?"1":"N";for(var o=m;o<y;++o){v[o]=k}m=y-1}}}for(var m=0,B=a;m<l;++m){var z=v[m];if(B=="L"&&z=="1"){v[m]="L"}else{if(g.test(z)){B=z}}}for(var m=0;m<l;++m){if(j.test(v[m])){for(var y=m+1;y<l&&j.test(v[y]);++y){}var u=(m?v[m-1]:a)=="L";var A=(y<l?v[y]:a)=="L";var k=u||A?"L":"R";for(var o=m;o<y;++o){v[o]=k}m=y-1}}var n=[],q;for(var m=0;m<l;){if(h.test(v[m])){var x=m;for(++m;m<l&&h.test(v[m]);++m){}n.push(new b(0,x,m))}else{var w=m,t=n.length;for(++m;m<l&&v[m]!="L";++m){}for(var o=w;o<m;){if(d.test(v[o])){if(w<o){n.splice(t,0,new b(1,w,o))}var p=o;for(++o;o<m&&d.test(v[o]);++o){}n.splice(t,0,new b(2,p,o));w=o}else{++o}}if(w<m){n.splice(t,0,new b(1,w,m))}}}if(n[0].level==1&&(q=r.match(/^\s+/))){n[0].from=q[0].length;n.unshift(new b(0,0,q[0].length))}if(gf(n).level==1&&(q=r.match(/\s+$/))){gf(n).to-=q[0].length;n.push(new b(0,l-q[0].length,l))}if(n[0].level!=gf(n).level){n.push(new b(n[0].level,l,l))}return n}})();kK.version="4.7.0";return kK});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("rpm-changes",function(){var d=/^-+$/;var c=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)  ?\d{1,2} \d{2}:\d{2}(:\d{2})? [A-Z]{3,4} \d{4} - /;var b=/^[\w+.-]+@[\w.-]+/;return{token:function(e){if(e.sol()){if(e.match(d)){return"tag"}if(e.match(c)){return"tag"}}if(e.match(b)){return"string"}e.next();return null}}});a.defineMIME("text/x-rpm-changes","rpm-changes");a.defineMode("rpm-spec",function(){var e=/^(i386|i586|i686|x86_64|ppc64|ppc|ia64|s390x|s390|sparc64|sparcv9|sparc|noarch|alphaev6|alpha|hppa|mipsel)/;var c=/^(Name|Version|Release|License|Summary|Url|Group|Source|BuildArch|BuildRequires|BuildRoot|AutoReqProv|Provides|Requires(\(\w+\))?|Obsoletes|Conflicts|Recommends|Source\d*|Patch\d*|ExclusiveArch|NoSource|Supplements):/;var f=/^%(debug_package|package|description|prep|build|install|files|clean|changelog|preinstall|preun|postinstall|postun|pre|post|triggerin|triggerun|pretrans|posttrans|verifyscript|check|triggerpostun|triggerprein|trigger)/;var g=/^%(ifnarch|ifarch|if)/;var d=/^%(else|endif)/;var b=/^(\!|\?|\<\=|\<|\>\=|\>|\=\=|\&\&|\|\|)/;return{startState:function(){return{controlFlow:false,macroParameters:false,section:false}},token:function(j,i){var h=j.peek();if(h=="#"){j.skipToEnd();return"comment"}if(j.sol()){if(j.match(c)){return"preamble"}if(j.match(f)){return"section"}}if(j.match(/^\$\w+/)){return"def"}if(j.match(/^\$\{\w+\}/)){return"def"}if(j.match(d)){return"keyword"}if(j.match(g)){i.controlFlow=true;return"keyword"}if(i.controlFlow){if(j.match(b)){return"operator"}if(j.match(/^(\d+)/)){return"number"}if(j.eol()){i.controlFlow=false}}if(j.match(e)){return"number"}if(j.match(/^%[\w]+/)){if(j.match(/^\(/)){i.macroParameters=true}return"macro"}if(i.macroParameters){if(j.match(/^\d+/)){return"number"}if(j.match(/^\)/)){i.macroParameters=false;return"macro"}}if(j.match(/^%\{\??[\w \-]+\}/)){return"macro"}j.next();return null}}});a.defineMIME("text/x-rpm-spec","rpm-spec")});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("z80",function(){var g=/^(exx?|(ld|cp|in)([di]r?)?|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|rst|[de]i|halt|im|ot[di]r|out[di]?)\b/i;var f=/^(call|j[pr]|ret[in]?)\b/i;var d=/^b_?(call|jump)\b/i;var e=/^(af?|bc?|c|de?|e|hl?|l|i[xy]?|r|sp)\b/i;var c=/^(n?[zc]|p[oe]?|m)\b/i;var h=/^([hl][xy]|i[xy][hl]|slia|sll)\b/i;var b=/^([\da-f]+h|[0-7]+o|[01]+b|\d+)\b/i;return{startState:function(){return{context:0}},token:function(k,j){if(!k.column()){j.context=0}if(k.eatSpace()){return null}var i;if(k.eatWhile(/\w/)){i=k.current();if(k.indentation()){if(j.context==1&&e.test(i)){return"variable-2"}if(j.context==2&&c.test(i)){return"variable-3"}if(g.test(i)){j.context=1;return"keyword"}else{if(f.test(i)){j.context=2;return"keyword"}else{if(d.test(i)){j.context=3;return"keyword"}}}if(h.test(i)){return"error"}}else{if(b.test(i)){return"number"}else{return null}}}else{if(k.eat(";")){k.skipToEnd();return"comment"}else{if(k.eat('"')){while(i=k.next()){if(i=='"'){break}if(i=="\\"){k.next()}}return"string"}else{if(k.eat("'")){if(k.match(/\\?.'/)){return"number"}}else{if(k.eat(".")||k.sol()&&k.eat("#")){j.context=4;if(k.eatWhile(/\w/)){return"def"}}else{if(k.eat("$")){if(k.eatWhile(/[\da-f]/i)){return"number"}}else{if(k.eat("%")){if(k.eatWhile(/[01]/)){return"number"}}else{k.next()}}}}}}}return null}}});a.defineMIME("text/x-z80","z80")});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("xml",function(y,k){var p=y.indentUnit;var x=k.multilineTagIndentFactor||1;var d=k.multilineTagIndentPastTag;if(d==null){d=true}var w=k.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};var c=k.alignCDATA;var f,g;function n(F,E){function C(G){E.tokenize=G;return G(F,E)}var D=F.next();if(D=="<"){if(F.eat("!")){if(F.eat("[")){if(F.match("CDATA[")){return C(v("atom","]]>"))}else{return null}}else{if(F.match("--")){return C(v("comment","-->"))}else{if(F.match("DOCTYPE",true,true)){F.eatWhile(/[\w\._\-]/);return C(z(1))}else{return null}}}}else{if(F.eat("?")){F.eatWhile(/[\w\._\-]/);E.tokenize=v("meta","?>");return"meta"}else{f=F.eat("/")?"closeTag":"openTag";E.tokenize=m;return"tag bracket"}}}else{if(D=="&"){var B;if(F.eat("#")){if(F.eat("x")){B=F.eatWhile(/[a-fA-F\d]/)&&F.eat(";")}else{B=F.eatWhile(/[\d]/)&&F.eat(";")}}else{B=F.eatWhile(/[\w\.\-:]/)&&F.eat(";")}return B?"atom":"error"}else{F.eatWhile(/[^&<]/);return null}}}function m(E,D){var C=E.next();if(C==">"||(C=="/"&&E.eat(">"))){D.tokenize=n;f=C==">"?"endTag":"selfcloseTag";return"tag bracket"}else{if(C=="="){f="equals";return null}else{if(C=="<"){D.tokenize=n;D.state=l;D.tagName=D.tagStart=null;var B=D.tokenize(E,D);return B?B+" tag error":"tag error"}else{if(/[\'\"]/.test(C)){D.tokenize=j(C);D.stringStartCol=E.column();return D.tokenize(E,D)}else{E.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}}}}function j(B){var C=function(E,D){while(!E.eol()){if(E.next()==B){D.tokenize=m;break}}return"string"};C.isInAttribute=true;return C}function v(C,B){return function(E,D){while(!E.eol()){if(E.match(B)){D.tokenize=n;break}E.next()}return C}}function z(B){return function(E,D){var C;while((C=E.next())!=null){if(C=="<"){D.tokenize=z(B+1);return D.tokenize(E,D)}else{if(C==">"){if(B==1){D.tokenize=n;break}else{D.tokenize=z(B-1);return D.tokenize(E,D)}}}}return"meta"}}function r(C,B,D){this.prev=C.context;this.tagName=B;this.indent=C.indented;this.startOfLine=D;if(w.doNotIndent.hasOwnProperty(B)||(C.context&&C.context.noIndent)){this.noIndent=true}}function u(B){if(B.context){B.context=B.context.prev}}function q(D,C){var B;while(true){if(!D.context){return}B=D.context.tagName;if(!w.contextGrabbers.hasOwnProperty(B)||!w.contextGrabbers[B].hasOwnProperty(C)){return}u(D)}}function l(B,D,C){if(B=="openTag"){C.tagStart=D.column();return b}else{if(B=="closeTag"){return t}else{return l}}}function b(B,D,C){if(B=="word"){C.tagName=D.current();g="tag";return e}else{g="error";return b}}function t(C,E,D){if(C=="word"){var B=E.current();if(D.context&&D.context.tagName!=B&&w.implicitlyClosed.hasOwnProperty(D.context.tagName)){u(D)}if(D.context&&D.context.tagName==B){g="tag";return s}else{g="tag error";return A}}else{g="error";return A}}function s(C,B,D){if(C!="endTag"){g="error";return s}u(D);return l}function A(B,D,C){g="error";return s(B,D,C)}function e(E,C,F){if(E=="word"){g="attribute";return i}else{if(E=="endTag"||E=="selfcloseTag"){var D=F.tagName,B=F.tagStart;F.tagName=F.tagStart=null;if(E=="selfcloseTag"||w.autoSelfClosers.hasOwnProperty(D)){q(F,D)}else{q(F,D);F.context=new r(F,D,B==F.indented)}return l}}g="error";return e}function i(B,D,C){if(B=="equals"){return o}if(!w.allowMissing){g="error"}return e(B,D,C)}function o(B,D,C){if(B=="string"){return h}if(B=="word"&&w.allowUnquoted){g="string";return e}g="error";return e(B,D,C)}function h(B,D,C){if(B=="string"){return h}return e(B,D,C)}return{startState:function(){return{tokenize:n,state:l,indented:0,tagName:null,tagStart:null,context:null}},token:function(D,C){if(!C.tagName&&D.sol()){C.indented=D.indentation()}if(D.eatSpace()){return null}f=null;var B=C.tokenize(D,C);if((B||f)&&B!="comment"){g=null;C.state=C.state(f||B,D,C);if(g){B=g=="error"?B+" error":g}}return B},indent:function(G,C,F){var E=G.context;if(G.tokenize.isInAttribute){if(G.tagStart==G.indented){return G.stringStartCol+1}else{return G.indented+p}}if(E&&E.noIndent){return a.Pass}if(G.tokenize!=m&&G.tokenize!=n){return F?F.match(/^(\s*)/)[0].length:0}if(G.tagName){if(d){return G.tagStart+G.tagName.length+2}else{return G.tagStart+p*x}}if(c&&/<!\[CDATA\[/.test(C)){return 0}var B=C&&/^<(\/)?([\w_:\.-]*)/.exec(C);if(B&&B[1]){while(E){if(E.tagName==B[2]){E=E.prev;break}else{if(w.implicitlyClosed.hasOwnProperty(E.tagName)){E=E.prev}else{break}}}}else{if(B){while(E){var D=w.contextGrabbers[E.tagName];if(D&&D.hasOwnProperty(B[2])){E=E.prev}else{break}}}}while(E&&!E.startOfLine){E=E.prev}if(E){return E.indent+p}else{return 0}},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:k.htmlMode?"html":"xml",helperType:k.htmlMode?"html":"xml"}});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");if(!a.mimeModes.hasOwnProperty("text/html")){a.defineMIME("text/html",{name:"xml",htmlMode:true})}});