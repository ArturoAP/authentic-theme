/*!
 * Authentic Theme 9.0.0 (https://github.com/qooob/authentic-theme)
 * Copyright 2015 Ilia Rostovtsev <programming@rostovtsev.ru>
 * Licensed under MIT (https://github.com/qooob/authentic-theme/blob/master/LICENSE)
 */
;var $_url=$.url(),$current_page=$_url.attr("path").replace(/^\//g,""),$current_page_full=$_url.attr("path"),$webprefix=$("body").data("webprefix");function prt(a){return console.log(a)}(function(a){a.fn.replaceTagName=function(e){var f=[],g=this.length;while(g--){var j=document.createElement(e),b=this[g],d=b.attributes;for(var c=d.length-1;c>=0;c--){var h=d[c];j.setAttribute(h.name,h.value)}j.innerHTML=b.innerHTML;a(b).after(j).remove();f[g-1]=j}return a(f)}})(window.jQuery);function array_swap(c){var a={};for(var b in c){a[c[b]]=b}return a}function dblrclick(c){var b=0,a=false;return function(d){d.preventDefault();if(a){clearTimeout(b);a=false;return c.apply(this,arguments)}else{a=true;b=setTimeout(function(){a=false},300)}}}function tab_action(a,b){if(document.forms[0]&&document.forms[0][a]){document.forms[0][a].value=b}}function back(){history.go(-1)}function search_control(a){if(!(String.fromCharCode(a.which).toLowerCase()=="s"&&a.altKey)){return true}$search=window.parent.$(".form-control.sidebar-search").focus();a.preventDefault();return false}function shortcut_control(a){if(!(String.fromCharCode(a.which).toLowerCase()=="r"&&a.altKey)&&!(String.fromCharCode(a.which).toLowerCase()=="c"&&a.altKey)&&!(String.fromCharCode(a.which).toLowerCase()=="v"&&a.altKey)&&!(String.fromCharCode(a.which).toLowerCase()=="w"&&a.altKey)){return true}a.preventDefault();if(String.fromCharCode(a.which).toLowerCase()=="w"&&window.parent.$('.switch-toggle input[id="open_webmin"]')){window.parent.$('.switch-toggle input[id="open_webmin"]').trigger("click")}if(String.fromCharCode(a.which).toLowerCase()=="v"&&window.parent.$('.switch-toggle input[id="open_virtualmin"]')){window.parent.$('.switch-toggle input[id="open_virtualmin"]').trigger("click")}if(String.fromCharCode(a.which).toLowerCase()=="c"&&window.parent.$('.switch-toggle input[id="open_cloudmin"]')){window.parent.$('.switch-toggle input[id="open_cloudmin"]').trigger("click")}if(String.fromCharCode(a.which).toLowerCase()=="r"&&window.parent.$('.user-links a[data-refresh="true"]')){window.parent.$('.user-links a[data-refresh="true"]').trigger("click")}return false}function product_name(){if(window.parent.$("#wrapper").data("server-manager")!=-1){return"Cloudmin"}else{if(window.parent.$("#wrapper").data("virtual-server")!=-1){return"Virtualmin"}else{var a=window.parent.$("#wrapper").data("product");return a.charAt(0).toUpperCase()+a.slice(1)}}}function right_module_title(){$_right_menu_title=window.parent.$('iframe[name="page"]').contents().find("#headln2c");if($_right_menu_title.find("font").text().length){return $_right_menu_title.find("font").text()}else{if($_right_menu_title.text().length){return $_right_menu_title.text().text()}else{return"->"}}}function loading_left_start(){!window.parent.$("#_menu_loader").length&&window.parent.$("body ul.navigation").before('<span id="_menu_loader"></span>');new Spinner($___spinner).spin(document.getElementById("_menu_loader"));window.parent.$("body aside .mCSB_scrollTools").css("visibility","hidden");window.parent.$("body ul.navigation").css("visibility","hidden");window.parent.$("body ul.user-links").css("visibility","hidden")}function initialize_navigation_select(){window.parent.$("aside select").removeAttr("onchange disabled");window.parent.$("aside select").select2({minimumResultsForSearch:5});window.parent.$("aside select").on("select2:select",function(a){window.parent.loading_left_start();window.parent.$("body ul.navigation").load("index.cgi/?xhr-navigation=1&xhr-navigation-type="+product_name().toLowerCase()+"&"+a.currentTarget.id+"="+a.currentTarget.value+"",function(){window.parent.loading_left_end()});hide_mobile_menu();loading_right_start();setTimeout(function(){if(product_name().toLowerCase()=="cloudmin"){$____switch="/server-manager/index.cgi"}else{$____switch="/virtual-server/summary_domain.cgi?"+a.currentTarget.id+"="+a.currentTarget.value}window.parent.$('iframe[name="page"]').attr("src",$____switch)},300)});if(window.parent.$("aside select option").size()-1===0){window.parent.$(".select2 span").css("cursor","default");window.parent.$(".select2 .select2-selection__arrow").remove();window.parent.$("aside select").on("select2:open",function(){window.parent.$(".select2-container .select2-dropdown").css("opacity","0")})}}function loading_left_end(){setTimeout(function(){$("body aside .mCSB_scrollTools").css("visibility","visible");$("body ul.navigation").css("visibility","visible");$("body ul.user-links").css("visibility","visible");$("#_menu_loader").remove()},1200);setTimeout(function(){window.parent.initialize_navigation_select();window.parent.autocomplete()},1202)}function autocomplete(){window.parent.$(".autocomplete-suggestions").remove();window.parent.$(".form-control.sidebar-search").removeAttr("disabled");window.parent.$(".form-control.sidebar-search").autocomplete("dispose");window.parent.$(".form-control.sidebar-search").val("");var e={};$.each(window.parent.$('ul[id^="global_"].sub > li > a'),function(j,k){e[($(this).attr("href").substring(0,1)=="/"?"":"/")+$(this).attr("href")]=$.trim($(this).text())});window.parent.$('li > a[target="page"][data-href="/virtual-server/index.cgi"], li > a[target="page"][data-href="/body.cgi"]').each(function(j,k){e[$(this).attr("data-href")]=$.trim($(this).text())});var b=$.map(e,function(k,j){return{value:k,url:j,data:{category:product_name()}}});var g={};if($current_page_full=="/backup-config/"||$current_page_full=="/backup-config/index.cgi"||$current_page_full=="/usermin/"||$current_page_full=="/usermin/index.cgi"||$current_page_full=="/webmin/"||$current_page_full=="/webmin/index.cgi"||$current_page_full=="/servers/"||$current_page_full=="/servers/index.cgi"||$current_page_full=="/acl/"||$current_page_full=="/acl/index.cgi"||$current_page_full=="/init/"||$current_page_full=="/init/index.cgi"||$current_page_full=="/mount/"||$current_page_full=="/mount/index.cgi"||$current_page_full=="/quota/"||$current_page_full=="/quota/index.cgi"||$current_page_full=="/fsdump/"||$current_page_full=="/fsdump/index.cgi"||$current_page_full=="/inittab/"||$current_page_full=="/inittab/index.cgi"||$current_page_full=="/logrotate/"||$current_page_full=="/logrotate/index.cgi"||$current_page_full=="/mailcap/"||$current_page_full=="/mailcap/index.cgi"||$current_page_full=="/pam/"||$current_page_full=="/pam/index.cgi"||$current_page_full=="/cron/"||$current_page_full=="/cron/index.cgi"||$current_page_full=="/syslog/"||$current_page_full=="/syslog/index.cgi"||$current_page_full=="/useradmin/"||$current_page_full=="/useradmin/index.cgi"||$current_page_full=="/apache/"||$current_page_full=="/apache/index.cgi"||$current_page_full=="/bind8/"||$current_page_full=="/bind8/index.cgi"||$current_page_full=="/dovecot/"||$current_page_full=="/dovecot/index.cgi"||$current_page_full=="/fetchmail/"||$current_page_full=="/fetchmail/index.cgi"||$current_page_full=="/mysql/"||$current_page_full=="/mysql/index.cgi"||$current_page_full=="/postgresql/"||$current_page_full=="/postgresql/index.cgi"||$current_page_full=="/postfix/"||$current_page_full=="/postfix/index.cgi"||$current_page_full=="/procmail/"||$current_page_full=="/procmail/index.cgi"||$current_page_full=="/mailboxes/"||$current_page_full=="/mailboxes/index.cgi"||$current_page_full=="/mailboxes/list_mail.cgi"||$current_page_full=="/spam/"||$current_page_full=="/spam/index.cgi"||$current_page_full=="/squid/"||$current_page_full=="/squid/index.cgi"||$current_page_full=="/sshd/"||$current_page_full=="/sshd/index.cgi"||$current_page_full=="/webalizer/"||$current_page_full=="/webalizer/index.cgi"||$current_page_full=="/cpan/"||$current_page_full=="/cpan/index.cgi"||$current_page_full=="/htaccess-htpasswd/"||$current_page_full=="/htaccess-htpasswd/index.cgi"||$current_page_full=="/status/"||$current_page_full=="/status/index.cgi"||$current_page_full=="/net/"||$current_page_full=="/net/index.cgi"||$current_page_full=="/tcpwrappers/"||$current_page_full=="/tcpwrappers/index.cgi"||$current_page_full=="/fdisk/"||$current_page_full=="/fdisk/index.cgi"||$current_page_full=="/passwd/"||$current_page_full=="/passwd/index.cgi"){$(window.parent.$('iframe[name="page"]').contents().find(".panel-body a[href]:not([href*='javascript'],[href*='list_users.cgi?dom'],[href*='edit_hdparm.cgi?disk'],[href*='blink.cgi?disk'],[href*='smart-status/index.cgi?drive'],[href*='help.cgi'],[href*='edit_user.cgi?new='],[href*='edit_user.cgi?idx='],[href*='edit_recipe.cgi'],[href*='up.cgi'],[href*='down.cgi'],[href*='virt_index.cgi'],[href*='save_log.cgi'],[href*='backup.cgi'],[href*='activate.cgi'],[href*='#'])")).each(function(j,k){g[($(this).attr("href").substring(0,1)=="/"?"":"/")+$current_page+$(this).attr("href")]=$.trim($(this).text())})}var h=$.map(g,function(k,j){return{value:k,url:j,data:{category:right_module_title()}}});var i={};$.each(window.parent.$('ul.sub:not([id^="global_"]) > li > a'),function(j,k){i[($(this).attr("href").substring(0,1)=="/"?"":"/")+$(this).attr("href")]=$.trim($(this).text())});window.parent.$('li > a[target="page"]:not([data-href="/virtual-server/index.cgi"],[data-href="/body.cgi"])').each(function(j,k){i[$(this).attr("data-href")]=$.trim($(this).text())});var a=$.map(i,function(k,j){return{value:k,url:j,data:{category:window.parent.$("aside .select2-selection__rendered").text()?'<span style="font-style: italic">'+window.parent.$("aside .select2-selection__rendered").text()+"</span>":product_name()}}});var c={};window.parent.$("aside select option").each(function(){c[$(this).val()+":::"+$(this).parent("select").attr("name")]=$.trim($(this).text())});var f=$.map(c,function(k,j){return{value:k,url:j,data:{category:window.parent.$("aside select").data("autocomplete-title")}}});if(window.parent.location.search){var d=a.concat(h).concat(f).concat(b)}else{var d=f.concat(h).concat(a).concat(b)}window.parent.$(".form-control.sidebar-search").autocomplete({lookup:d,onSelect:function(j){$(this).val("").blur();if(j.url.substring(0,1)=="/"){window.parent.loading_right_start();window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+j.url)}else{window.parent.loading_right_start();window.parent.loading_left_start();window.parent.$("body ul.navigation").load("index.cgi/?xhr-navigation=1&xhr-navigation-type="+product_name().toLowerCase()+"&"+j.url.split(":::")[1]+"="+j.url.split(":::")[0]+"",function(){window.parent.loading_left_end();setTimeout(function(){if(product_name().toLowerCase()=="cloudmin"){$____switch="/server-manager/index.cgi"}else{$____switch="/virtual-server/summary_domain.cgi?"+j.url.split(":::")[1]+"="+j.url.split(":::")[0]}window.parent.$('iframe[name="page"]').attr("src",$____switch)},300)})}},groupBy:"category",showNoSuggestionNotice:true,noSuggestionNotice:"No results found"})}function container_fluid_size(){if(!window.parent.$(".mobile-menu-toggler").hasClass("selected")){if(window.parent.$("#sidebar:visible").length!==1){window.parent.$('iframe[name="page"]').contents().find(".container-fluid, .container")}else{window.parent.$('iframe[name="page"]').contents().find(".container-fluid, .container")}window.parent.$("aside").addClass("hidden-xs");window.parent.$("aside").css("transform","translate(260px, 0px)");window.parent.$(".switch-toggle").css("display","table");if(window.parent.$(".__logo")&&!window.parent.$(".mobile-menu-toggler:visible").length){window.parent.$(".__logo").transition({y:"-140px"},1000,function(){})}else{if(window.parent.$(".__logo")){window.parent.$(".__logo").css("transform","translate(0px, 0px)")}}}}function non_updater_mode(){if(($current_page_full=="/webmin/edit_themes.cgi"&&window.parent.location.search=="?updating")||($current_page_full=="/webmin/edit_themes.cgi"&&window.parent.location.search=="?updating-processing")||($current_page_full=="/webmin/install_theme.cgi"&&window.parent.location.search=="?updating-processing")||($current_page_full=="/webmin/install_theme.cgi"&&window.parent.location.search=="?updating-finished")||($current_page_full=="/webmin/edit_webmincron.cgi"&&(window.parent.location.search=="?recollect"||window.parent.location.search=="?recollecting"||window.parent.location.search=="?recollect-system-status"||window.parent.location.search!="?recollect"))||($current_page_full=="/webmin/delete_webmincron.cgi"&&(window.parent.location.search=="?recollecting-system-status"||window.parent.location.search!="?recollect-system-status"))||($current_page_full=="/package-updates/index.cgi"&&(window.parent.location.search=="?recollecting-package-updates"||window.parent.location.search=="?recollecting-package-updates-processing"))||($current_page_full=="/package-updates/update.cgi"&&window.parent.location.search=="?recollecting-package-updates-processing")){return false}else{return true}}function clear_menu_select(){window.parent.$(".navigation > li:not('.has-sub')").removeClass("sub_active").find("span.current-large").remove();window.parent.$(".navigation > ul.sub > li").removeClass("sub_active").find("span.current").remove();window.parent.$(".navigation > ul.sub").hide();window.parent.$(".navigation > li").removeClass("active")}function loader_start_config(){$("body").on("click",'.dropdown > ul > li > a[data-loader="true"], .navigation a[target="page"], a[href$="virtual-server/index.cgi"], table.table-hover a:not([target="_blank"]), .list-group-item, .menu-link, .panel-body > a.ui_link, button[type="submit"], a.btn.btn-primary[href^="/"], a.ui_link, div.icons-row div a, td[id^="head"] a, tr.tr_tag td.td_tag a, tr.ui_checked_columns td a, tr.ui_grid_row td.ui_grid_cell a, a[href*=".cgi"], a[href$=".cgi"], input[type="submit"], .navigation_module_trigger, .navigation_refresh_modules_trigger, .navigation_feedback_trigger, .navigation_domain_settings_trigger',function(){var f=$(this),c=$.trim($(this).text()).toLowerCase(),h=$(this).attr("name"),d=["/updown/","/webmin/edit_themes.cgi","/usermin/edit_themes.cgi","/webmin/edit_mods.cgi","/usermin/edit_mods.cgi"],a=$current_page_full,g=["export","export as csv.","download","upload"],b=["switch"],e=["detachall.cgi"];$forbidden_onclicks=["print_mail.cgi"];typeof f.attr("href")=="undefined"?$forbidden_href="":$forbidden_href=f.attr("href");typeof f.attr("onclick")=="undefined"?$forbidden_onclick="":$forbidden_onclick=f.attr("onclick");typeof f.attr("href")=="undefined"?f.attr("href",""):false;if($forbidden_onclick.indexOf($forbidden_onclicks)===-1&&$forbidden_href.indexOf(e)===-1&&$.inArray(a,d)===-1&&$.inArray(c,g)===-1&&$.inArray(h,b)===-1||($.inArray(a,d)!==-1&&($(this).attr("href")=="/"+$current_page.split("/")[0]+"/"||$(this).attr("href")=="/"+$current_page.split("/")[0]+"/index.cgi"))){if(f.attr("target")!="_blank"&&!f.hasClass("select_all")&&!f.hasClass("select_invert")&&$(this).attr("type")!="checkbox"&&$(this).find("input").length<=0&&$(this).attr("href").indexOf("detach.cgi")===-1&&$(this).attr("href").indexOf("/virtual-server/link.cgi")===-1){loading_right_start()}}})}function hide_mobile_menu(){if(window.parent.$(".mobile-menu-toggler:visible").length){if(window.parent.$(".__logo")){window.parent.$(".__logo").transition({y:0},1000)}window.parent.$(".mobile-menu-toggler").removeClass("selected").find("button").removeClass("btn-primary").addClass("btn-default");window.parent.$("aside").transition({x:0},500,function(){window.parent.$(".switch-toggle").css("display","none");window.parent.$("aside").addClass("hidden-xs")})}}function detect_current_left_menu(c){if(c!="auto"){$current_page=c}if($("#headln2l a").attr("href")){if($("#headln2l a").attr("href").indexOf(".cgi")>=0){$current_page_webmin=1}else{$current_page_webmin=0}}else{$current_page_webmin=0}$("a").each(function(){if($(this).find("img").length){$(this).css("text-decoration","none")}});(($current_page.split("/")[0]=="virtual-server"||$current_page.split("/")[0]=="server-manager")&&!$current_page_webmin&&(window.parent.$("#wrapper").data("virtual-server")!=-1||window.parent.$("#wrapper").data("server-manager")!=-1))?$current_page=$current_page.split("/")[0]+"/"+$current_page.split("/")[1]:$current_page=$current_page.split("/")[0]+"/";$current_page_search=window.parent.$('iframe[name="page"]').get(0).contentWindow.location.search;var b=[];window.parent.$("ul.sub li a").each(function(){if($(this).attr("href").substring(0,1)=="/"){b.push($(this).attr("href").substring(1))}else{b.push($(this).attr("href"))}});if((b.indexOf($current_page+$current_page_search)>-1)){clear_menu_select();if(!window.parent.$('a[href="'+$current_page+$current_page_search+'"]').length){$_current_page="/"+$current_page+$current_page_search}else{$_current_page=$current_page+$current_page_search}window.parent.$('a[href="'+$_current_page+'"]').parent("li").addClass("sub_active").append('<span class="current"></span>').parent("ul.sub").show().prev("li").addClass("active")}var a=[];window.parent.$("a.navigation_module_trigger").each(function(){if($(this).data("href")!="/virtual-server/index.cgi"){a.push($(this).data("href"))}else{if($(this).data("href")=="/virtual-server/index.cgi"){a.push("/virtual-server")}}});if(non_updater_mode()){window.parent.$(".navigation > li:not('.has-sub')").removeClass("sub_active").find("span.current-large").remove()}$_current_page_search="/"+$current_page.replace(/\/$/,"")+$current_page_search;if((a.indexOf($_current_page_search)>-1)){clear_menu_select();window.parent.$('a[data-href="'+$_current_page_search+($_current_page_search=="/virtual-server"?"/index.cgi":"")+'"]').parent("li").addClass("sub_active").append('<span class="current-large"></span>')}}loader_start_config();if(window.location==window.parent.location){$("body").on("click",".mobile-menu-toggler",function(a){if($("aside").hasClass("hidden-xs")){$(this).addClass("selected").find("button").addClass("btn-primary").removeClass("btn-default");if(window.parent.$(".__logo")){window.parent.$(".__logo").css("transform","translate(0px, 0px)");setTimeout(function(){window.parent.$(".__logo").transition({y:"-140px"},1000)},1100)}window.parent.$("aside").css("transform","translate(0px, 0px)");window.parent.$(".switch-toggle").css("display","none");$("aside").removeClass("hidden-xs");window.parent.$("aside").transition({x:260},1500);window.parent.$(".switch-toggle").css("display","table")}else{hide_mobile_menu()}});$("body").on("click",'.navigation a[target="page"], .user-links a[target="page"]',function(){hide_mobile_menu()});$("body").on("click",".navigation > li:not('.menu-container')",function(d){d.preventDefault();d.stopPropagation();typeof $processing=="undefined"?$processing=false:false;if(!$processing){$processing=true;var a=$("a",this).attr("href"),c=$("a",this).attr("target"),b=$(this);if(c){$(".navigation > ul.sub > li").each(function(){$(this).removeClass("sub_active").find("span.current").remove()})}$("#webmin_search_form").submit(function(){$(".navigation > ul.sub > li").each(function(){$(this).removeClass("sub_active").find("span.current").remove()})});$.when($("#sidebar .navigation > li").each(function(){var e=$(this);if(!$(this).is(b)){$(this).removeClass("active");if($(this).find("a").attr("href")!="#search"&&!$(this).find("a").attr("target")){if($(e.find("a").attr("href")).hasClass("sub")){$(e.find("a").attr("href")).slideUp(440)}}}})).done(function(){b.hasClass("active")?b.removeClass("active"):(a!="#hide"&&!c)?b.addClass("active"):false;setTimeout(function(){if($(a).is(":visible")&&a!="#hide"&&!c){b.addClass("active")}else{b.removeClass("active")}$processing=false},600);$(a).slideToggle(440)});if(a=="#search"){$('#sidebar input[name="search"]').focus()}}});$("body").on("click",".navigation > ul.sub > li:not('.menu-container')",function(){var a=$(this);if(non_updater_mode()){window.parent.$(".navigation > li:not('.has-sub')").removeClass("sub_active").find("span.current-large").remove()}$(".navigation > ul.sub > li").each(function(){$(this).removeClass("sub_active").find("span.current").remove()});$("#webmin_search_form").find('input[name="search"]').val("");a.addClass("sub_active").append('<span class="current"></span>')});$(".navigation > ul.sub").each(function(){if($(this).attr("id")===""){$(this).remove()}});$("aside .form-group .form-control.sidebar-search").on("focus",function(a){$(this).prev("i.fa.fa-search").css("color","#4e6f94")}).on("blur",function(a){$(this).prev("i.fa.fa-search").css("color","#365373")});$("body").on("submit","#webmin_search_form",function(){loading_right_start()});$("body").on("click",".navigation_module_trigger, .navigation_refresh_modules_trigger, .navigation_feedback_trigger, .navigation_domain_settings_trigger",function(a){a.preventDefault();a.stopPropagation();$('iframe[name="page"]').attr("src",$(this).data("href"));$(".navbar-toggle:visible").trigger("click");window.parent.$(".navigation > ul.sub > li").removeClass("sub_active").find("span.current").remove();window.parent.$("#sidebar .navigation > ul.sub").slideUp(440);window.parent.$("#sidebar .navigation > li").removeClass("active")});$('.switch-toggle label[for^="reserve_empty"]').on("click",function(a){a.preventDefault()});$("body").on("click",'a[data-refresh="true"]',function(a){a.preventDefault();loading_right_start();$('iframe[name="page"]').attr("src",window.parent.$('iframe[name="page"]').get(0).contentWindow.location.pathname+window.parent.$('iframe[name="page"]').get(0).contentWindow.location.search)});$("body").on("click",function(a){if(!$("ul.dropdown").is(a.target)&&$("ul.dropdown").has(a.target).length===0&&$(".open").has(a.target).length===0){$("ul.dropdown").removeClass("open")}});$(window.parent.$('iframe[name="page"]').contents()).on("click",function(a){if(!window.parent.$("ul.dropdown").is(a.target)&&window.parent.$("ul.dropdown").has(a.target).length===0&&window.parent.$(".open").has(a.target).length===0){window.parent.$("body").find(".navbar-header").find(".dropdown.open").removeClass("open")}});$(".switch-toggle").on("click",'input:not(".dynamic")',function(a){if($(this).attr("id")=="open_webmin"||$(this).attr("id")=="open_usermin"){window.parent.history.pushState(null,null,"/");window.parent.$("#wrapper").data("virtual-server",-1);window.parent.$("#wrapper").data("server-manager",-1);window.location.href=window.parent.location.origin+"/"}else{if($(this).attr("id")=="open_virtualmin"){window.parent.history.pushState(null,null,"/?virtualmin");window.parent.$("#wrapper").data("virtual-server",2);window.parent.$("#wrapper").data("server-manager",-1);window.location.href=window.parent.location.origin+"/?virtualmin"}else{if($(this).attr("id")=="open_cloudmin"){window.parent.history.pushState(null,null,"/?cloudmin");window.parent.$("#wrapper").data("virtual-server",-1);window.parent.$("#wrapper").data("server-manager",2);window.location.href=window.parent.location.origin+"/?cloudmin"}}}hide_mobile_menu()});window.parent.$(".switch-toggle").on("click","input.dynamic",function(a){loading_right_start();loading_left_start();((window.parent.location.search=="?virtualmin"||window.parent.location.search=="?cloudmin")?$is_virtualcloudmin=1:$is_virtualcloudmin=0);$("body ul.user-links").load("index.cgi/?xhr-buttons=1&xhr-buttons-type="+$is_virtualcloudmin+"");if($(this).attr("id")=="open_webmin"||$(this).attr("id")=="open_usermin"){window.parent.history.pushState(null,null,"/");window.parent.$("#wrapper").data("virtual-server",-1);window.parent.$("#wrapper").data("server-manager",-1);$("body ul.navigation").load("index.cgi/?xhr-navigation=1&xhr-navigation-type=webmin",function(){window.parent.loading_left_end()});$("body").append('<span id="____switch"></span>');$("#____switch").load("index.cgi/?xhr-switch=1",function(){$____switch=$("#____switch").text();window.parent.$('iframe[name="page"]').attr("src",(($____switch.substring(0,1)=="/"?"":"/")+$____switch));$("#____switch").remove()})}else{if($(this).attr("id")=="open_virtualmin"){window.parent.history.pushState(null,null,"/?virtualmin");window.parent.$("#wrapper").data("virtual-server",2);window.parent.$("#wrapper").data("server-manager",-1);$("body ul.navigation").load("index.cgi/?xhr-navigation=1&xhr-navigation-type=virtualmin",function(){window.parent.loading_left_end()});window.parent.$('iframe[name="page"]').attr("src","/body.cgi")}else{if($(this).attr("id")=="open_cloudmin"){window.parent.history.pushState(null,null,"/?cloudmin");window.parent.$("#wrapper").data("virtual-server",-1);window.parent.$("#wrapper").data("server-manager",2);$("body ul.navigation").load("index.cgi/?xhr-navigation=1&xhr-navigation-type=cloudmin",function(){window.parent.loading_left_end()});window.parent.$('iframe[name="page"]').attr("src","/body.cgi")}}}hide_mobile_menu()});initialize_navigation_select();$("aside").mCustomScrollbar({axis:"y",theme:"minimal",scrollInertia:100});$("body").on("dblclick",".loader-container",function(a){window.parent.$(".loader-container").fadeOut(40);window.parent.$('iframe[name="page"]').fadeIn(400)});$(".loader-container").contextmenu(dblrclick(function(a){window.parent.$(".loader-container").fadeOut(40);window.parent.$('iframe[name="page"]').fadeIn(400)}));$(window).keydown(function(a){window.parent.search_control(a);window.parent.shortcut_control(a)});$("body").on("submit","#webmin_search_form",function(a){setTimeout(function(){window.parent.loading_right_start();window.parent.$(".navigation > li:not('.has-sub')").removeClass("sub_active").find("span.current-large").remove();window.parent.$(".form-control.sidebar-search").val("")},30)})}else{var $product_name=window.parent.$("#wrapper").data("product");$("select").each(function(){if($(this).attr("onchange")&&$(this).attr("name")!="twofactor_provider"){$(this).attr("onchange",$(this).attr("onchange")+";window.parent.$('iframe[name=\"page\"]').css('display', 'none');window.parent.$('a[data-refresh=\"true\"]').find('i').addClass('fa-spin');window.parent.$('.loader-container').css('display', 'block');")}});$('body:not(".mobile-menu-toggler")').on("click",function(a){window.parent.hide_mobile_menu()});$(".opener_trigger").on("click",function(){$this=$(this);if($this.closest("tbody").find(".opener_container").first().find("div").hasClass("opener_hidden")){$this.closest("tbody").find(".opener_container").show();setTimeout(function(){$this.parent("td").find(".opener_trigger img").attr("src",""+$webprefix+"/images/open.gif")},10)}else{$this.closest("tbody").find(".opener_container").hide();setTimeout(function(){$this.parent("td").find(".opener_trigger img").attr("src",""+$webprefix+"/images/closed.gif")},10)}});if($(".opener_shown").length>0){$(".panel-body  .ui_form .table  tbody  tr").removeClass("thead");$(".opener_trigger").parent("td").css("vertical-align","middle").css("height","43px").css("text-align","left")}$("a.opener_trigger").each(function(){$(this).parent("td").css("text-align","left")});$(window.parent.$('iframe[name="page"]').contents()).keydown(function(a){search_control(a);shortcut_control(a)});$(".authentic_update").on("click",function(a){a.preventDefault();a.stopPropagation();loading_right_start();window.parent.history.pushState(null,null,"/?updating");window.parent.$('iframe[name="page"]').attr("src",$(this).attr("href"))});$('a[data-href="/webmin/edit_webmincron.cgi"]').on("click contextmenu",function(a){a.preventDefault();a.stopPropagation();loading_right_start();if($(this).attr("data-refresh").indexOf("package-updates")!==-1){window.parent.history.pushState(null,null,"/?recollecting")}else{window.parent.history.pushState(null,null,"/?recollect")}window.parent.$('iframe[name="page"]').attr("src",$(this).attr("data-href"))});$("body table").each(function(b,a){var c=$(this);if(!$(a).hasClass("table")&&!$(a).hasClass("header")&&!$(a).hasClass("ui_form_end_buttons")&&!$(a).hasClass("ui_table")){$(a).addClass("table-hardcoded");if($product_name=="usermin"){$(a).addClass("table table-striped table-rounded table-condensed table-subtable")}}});$("#tall_0").before("<br>");$(".opener_container").each(function(a,b){if($(this).find("div").hasClass("opener_hidden")){$(this).hide()}else{$(this).show()}});$('[data-toggle="tooltip"], [data-toggle="virtualmin-license"]').tooltip();$('[data-toggle="virtualmin-license"]').popover({html:true,content:function(){return"<table><tbody>					<tr>						<td style='font-weight:bold;'>"+$(this).data("proc-serial-number-text")+"</td> <td>"+$(this).data("proc-serial-number-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-license-key-text")+"</td> <td>"+$(this).data("proc-license-key-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-license-domains-text")+"</td> <td>"+$(this).data("proc-license-domains-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-license-domains-left-text")+"</td> <td>"+$(this).data("proc-license-domains-left-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-licensed-virtualmin-systems-text")+"</td> <td>"+$(this).data("proc-licensed-virtualmin-systems-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-licensed-virtualmin-systems-installed-on-text")+"</td> <td>"+$(this).data("proc-licensed-virtualmin-systems-installed-on-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-expiry-date-text")+"</td> <td>"+$(this).data("proc-expiry-date-data")+"</td>					</tr>					<tr>						<td style='font-weight:bold'>"+$(this).data("proc-expiry-days-text")+"</td> <td>"+$(this).data("proc-expiry-days-data")+"</td></tr></tbody></table>"},container:"body",placement:"auto top"});if(non_updater_mode()){detect_current_left_menu("auto")}$('.panel-body > form > table > tbody > tr > td:has(input[type="submit"])').parents("table.table-hardcoded > tbody > tr").css("border","none").parents("table").css("margin-top","20px");$('.panel-body > form > table > tbody > tr > td:has(input[type="submit"])').parents("table.table-hardcoded > tbody").css("border","none");$('.ui_grid_table > tbody > tr.ui_grid_row > td:has(button[type="submit"])').parents("table.ui_grid_table").css("border","none");$("form.ui_form > table label.radio, form.ui_form > table label.checkbox").each(function(){var c=$(this),d=c.find("i.fa"),b=c.find("i.fa").text().trim(),a=c.text().trim();if(b.length===0&&a.length===0){d.parent("label").remove()}});function set_location_search(){if(window.parent.$("#wrapper").data("virtual-server")!=-1){window.parent.history.pushState(null,null,"/?virtualmin")}else{if(window.parent.$("#wrapper").data("server-manager")!=-1){window.parent.history.pushState(null,null,"/?cloudmin")}else{window.parent.history.pushState(null,null,"/")}}}if(window.parent.location.search=="?updating-finished"){setTimeout(function(){window.parent.$('iframe[name="page"]').contents().find("button[data-target='#update_notice']").click()},400)}else{if($("#wrapper").data("notice")==1){setTimeout(function(){window.parent.$('iframe[name="page"]').contents().find("button[data-target='#update_notice']").click()},400)}}if($current_page_full=="/webmin/edit_themes.cgi"&&window.parent.location.search=="?updating"){$iframe=window.parent.$('iframe[name="page"]').contents();$iframe.find(".panel-body .tab-pane.active").removeClass("active");$iframe.find(".panel-body #install").addClass("active");$iframe.find('.panel-body .ui_radio_table.table-hardcoded input[id="source_2"]').prop("checked",true);$iframe.find('.panel-body .ui_radio_table.table-hardcoded input[id="source_2"]').parents("td").next("td").find('input[name="url"]').val("https://rostovtsev.ru/.git/authentic-theme/authentic-theme-latest.wbt.gz");$iframe.find('.panel-body .tab-pane.active form[action^="install_theme."]').submit();window.parent.history.pushState(null,null,"/?updating-processing")}else{if($current_page_full=="/webmin/install_theme.cgi"&&window.parent.location.search=="?updating-processing"){window.parent.history.pushState(null,null,"/?updating-finished");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/body.cgi")}else{if($current_page_full=="/body.cgi"&&window.parent.location.search=="?updating-finished"){set_location_search();$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")})}}}if($current_page_full=="/webmin/edit_webmincron.cgi"&&window.parent.location.search=="?recollecting"){$iframe=window.parent.$('iframe[name="page"]').contents();$iframe.find("#"+$iframe.find("label:contains('scheduled_collect_system_info')").attr("for")).prop("checked",true);var $form=$iframe.find('form[action^="delete_webmincron."]');$form.append('<input type="hidden" name="run" value="1">');$form.submit();window.parent.history.pushState(null,null,"/?recollecting-system-status")}else{if($current_page_full=="/webmin/delete_webmincron.cgi"&&window.parent.location.search=="?recollecting-system-status"){window.parent.history.pushState(null,null,"/?recollecting-package-updates");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/package-updates/index.cgi?mode=updates")}else{if($current_page_full=="/package-updates/index.cgi"&&window.parent.location.search=="?recollecting-package-updates"){$iframe=window.parent.$('iframe[name="page"]').contents();var $form=$iframe.find('form[action^="update."]');$form.append('<input type="hidden" name="refresh" value="1">');$form.submit();window.parent.history.pushState(null,null,"/?recollecting-package-updates-processing")}else{if($current_page_full=="/package-updates/update.cgi"&&window.parent.location.search=="?recollecting-package-updates-processing"){$iframe=window.parent.$('iframe[name="page"]').contents();$iframe.find("#refresh").trigger("click");window.parent.history.pushState(null,null,"/?recollecting-finished");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/body.cgi")}else{if($current_page_full=="/body.cgi"&&window.parent.location.search=="?recollecting-finished"){set_location_search();$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")})}}}}}$("#system-status > div.panel-body > table > tbody > tr").on("mouseover",function(){$(this).find(".btn-hidden").removeClass("hidden")}).on("mouseout",function(){$(this).find(".btn-hidden").addClass("hidden")});if($current_page_full=="/webmin/edit_webmincron.cgi"&&window.parent.location.search=="?recollect"){$sysinfo_content=$("body");$sysinfo_content.find("#"+$sysinfo_content.find("label:contains('scheduled_collect_system_info')").attr("for")).prop("checked",true);$form_sysinfo=$sysinfo_content.find('form[action^="delete_webmincron."]');$form_sysinfo.append('<input type="hidden" name="run" value="1">');$form_sysinfo.submit();window.parent.history.pushState(null,null,"/?recollect-system-status")}else{if($current_page_full=="/webmin/delete_webmincron.cgi"&&window.parent.location.search=="?recollect-system-status"){window.parent.history.pushState(null,null,"/?recollect-finished");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/body.cgi")}else{if($current_page_full=="/body.cgi"&&window.parent.location.search=="?recollect-finished"){set_location_search();$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")})}}}$('input[name="but_switch"]').on("click",function(a){$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")});$(this).parents("form").attr("target","_top")});$('form[action*="switch_user.cgi"], a[href*="switch_user.cgi"]').each(function(){$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")});$(this).attr("target","_top")});if($current_page=="status/"){$('td > label > img[src*="images/up.gif"]').each(function(b,a){var c=$(this);$(a).attr("src",""+$webprefix+"/images/check.png")});$('td > label > img[src*="images/down.gif"]').each(function(b,a){var c=$(this);$(a).attr("src",""+$webprefix+"/images/cross.png")});$('td > label > img[src*="images/not.gif"]').each(function(b,a){var c=$(this);$(a).attr("src",""+$webprefix+"/images/not.png")})}$('.ui_form[action^="delete_mons"] tr.ui_checked_columns > td > label > img[src="images/up.gif"], .ui_form[action^="save_mon"] img[src="images/up.gif"], table.ui_buttons_table > tbody > tr.ui_buttons_row > td.ui_buttons_label > img[src="images/up.gif"]').each(function(b,a){var c=$(this);$(a).attr("src",""+$webprefix+"/images/check.png")});$('.ui_form[action^="delete_mons"] tr.ui_checked_columns > td > label > img[src="images/down.gif"], .ui_form[action^="save_mon"] img[src="images/down.gif"], table.ui_buttons_table > tbody > tr.ui_buttons_row > td.ui_buttons_label > img[src="images/down.gif"]').each(function(b,a){var c=$(this);$(a).attr("src",""+$webprefix+"/images/cross.png")});$('.ui_form[action^="delete_mons"] tr.ui_checked_columns > td > label > img[src="images/not.gif"], .ui_form[action^="save_mon"] img[src="images/not.gif"], table.ui_buttons_table > tbody > tr.ui_buttons_row > td.ui_buttons_label > img[src="images/not.gif"]').each(function(b,a){var c=$(this);$(a).attr("src",""+$webprefix+"/images/not.png")});$('img[src^="images"]').each(function(b,a){if($current_page!="sysstats/"){$(a).attr("src",""+$webprefix+"/"+$(this).attr("src"))}});$('img[src^="../images"]').each(function(b,a){$(a).attr("src",""+$webprefix+"/"+$(this).attr("src").replace("../",""))});$("input").each(function(b,a){if($(this).attr("src")=="images/ok.gif"){$(a).attr("src",""+$webprefix+"/"+$(this).attr("src"));$(this).parents("td").attr("style","white-space: nowrap")}});$('input[type="submit"]').each(function(){if($(this).val().indexOf("Start at")!=-1||$(this).val()=="Scan for servers"){$(this).addClass("btn-primary")}if($(this).val().indexOf("Stop")!=-1||$(this).val().indexOf("Delete")!=-1){$(this).addClass("btn-danger")}if($(this).val().indexOf("Warning")!=-1||$(this).val().indexOf("Restart")!=-1){$(this).addClass("btn-warning")}if($(this).val().indexOf("Start")!=-1&&$(this).val().indexOf("Start at")==-1&&$(this).val().indexOf("Start On")==-1&&$(this).val().indexOf("Start Now")==-1){$(this).addClass("btn-success")}if($(this).val()=="Save"){$(this).addClass("btn-success")}});$("textarea").each(function(e,h){var g=$(this),d=["phpini","bind8"],c=["phpini"],a=["bind8"];$("#headln2l a").attr("href")?$page=$("#headln2l a").attr("href").split("/")[1]:$page=null;if(d.indexOf($page)>=0){$(this).data("name","data");if(c.indexOf($page)>=0){$(this).data("mode","text/x-z80")}else{if(a.indexOf($page)>=0){$(this).data("mode","xml")}else{$(this).data("mode","rpm-spec")}}}$current_file=$current_page_full.replace(/^\//g,"");if($current_file){$current_file=$current_file.split("/")[1]}var b=["edit_recs.cgi","edit_dirs.cgi"];if(($(this).attr("name")=="data"||$(this).data("name")=="data"||$(this).attr("name")=="directives")&&$("textarea").length===1&&$("textarea").parent("td.td_tag").length===0&&$current_page!="init/"&&b.indexOf($current_file)===-1){$parent_width=g.parent("td").width()-15;var f=CodeMirror.fromTextArea(h,{mode:{name:$(this).data("mode")?$(this).data("mode"):"rpm-spec"},tabMode:"indent",matchBrackets:true,lineNumbers:true,lineWrapping:true,indentUnit:4,autofocus:true});$window_height=($(window).outerHeight()-($(window).outerHeight()/2.8));f.setSize($parent_width,$window_height);$(window).resize(function(){$parent_width=g.parent("td").width()-15;$window_height=($(window).outerHeight()-($(window).outerHeight()/2.8));f.setSize($parent_width,$window_height)})}});if($(".ui_table tr td").has(".ui_grid_table.table-hardcoded")&&($current_page=="passwd/"||$current_page=="mailboxes/"||$current_page_full=="/usermin/list_configs.cgi")){$(".ui_table tr td .ui_grid_table.table-hardcoded").parents("table").css("border","1px solid #ddd");$(".ui_table tr td .ui_grid_table.table-hardcoded").addClass("table").parents("tr").css("border","1px solid #ddd")}$.each($("form > table"),function(){if($(this).next('input[type="submit"]')){$(this).attr("style","margin-bottom:6px")}});$.each($("table tr"),function(){if($(this).is(":empty")){$(this).remove()}});function __tables(){if($current_page=="backup-config/"&&$("table#show_backup_destination")||$current_page_full=="/virtual-server/summary_domain.cgi"||$current_page_full=="/usermin/edit_categories.cgi"||$current_page_full=="/usermin/edit_defacl.cgi"||$current_page_full=="/proc/index_search.cgi"||$current_page_full=="/bind8/conf_misc.cgi"||$current_page_full=="/postfix/sasl.cgi"||$current_page_full=="/postfix/edit_master.cgi"||$current_page_full=="/squid/edit_icp.cgi"||$current_page_full=="/squid/edit_misc.cgi"||$current_page_full=="/cpan/edit_mod.cgi"||$current_page_full=="/phpini/edit_errors.cgi"||$current_page_full=="/acl/edit_acl.cgi"||$current_page_full=="/fsdump/edit_dump.cgi"||$current_page_full=="/phpini/edit_misc.cgi"){return[$("table#show_backup_destination"),$('form[action="save_categories.cgi"] > .table-hardcoded'),$('form[action="save_defacl.cgi"] > .table-hardcoded'),$('form[action="index_search.cgi"] .sub_table_container.table-hardcoded'),$('form[action="save_misc.cgi"] .sub_table_container.table-hardcoded'),$('form[action="save_sasl.cgi"] .table-hardcoded'),$('form[action="save_master.cgi"] .sub_table_container.table-hardcoded'),$('form[action="save_icp.cgi"] .table.table-striped.table-rounded.table-condensed.table-subtable'),$('form[action="save_misc.cgi"] .table.table-striped.table-rounded.table-condensed.table-subtable'),$(".table-responsive > .table.table-striped.table-rounded.table-condensed.table-subtable"),$(".table-responsive > .table.table-striped.table-rounded.table-condensed.table-subtable > .sub_table_container.table-hardcoded"),$("#hiddendiv_opts")]}else{return false}}$.each(__tables(),function(b,c){var a=$(this);$.each(a.find("td"),function(){if(!$(this).find("hr").length){$(this).removeAttr("colspan")}});$.each(a.find("tbody"),function(){var f=$(this).children("tr"),d=[];$.each(f,function(){d.push($(this).children("td").length)});var e=Math.max.apply(this,d);$.each(f,function(){var g=$(this).children("td").length;if(e!=g&&!$(this).find("hr").length&&__tables()){for(var h=0;h<(e-g);h++){$(this).append("<td></td>")}}})})});$.each($("span > input"),function(){var c=$(this).parent("span").next(".file_chooser_button"),a=$(this).parent("span").next('input[type="button"][onclick]'),b=$(this).parent("span").next("select");if(c){c.attr("style","display: inline; width: auto; height: 34px; margin-right:0 !important; margin-top:4px !important;")}if($(this).parents(".tab-content")){c.css("margin-top","4px").css("margin-left","3px")}if(a){a.attr("style","display: inline; width: auto; height: 34px; margin-right:0 !important; margin-top:4px !important;")}if(b){b.attr("style","margin-top:4px !important;")}});$.each($('input[type="button"][onclick^="ifield"]'),function(a,b){$(this).css("margin-left","0")});$('.ui_form[action="switch.cgi"] > input.form-control.ui_textbox').next('input[type="button"][onclick^="ifield"]').attr("style","margin-top: 2px !important; margin-bottom: 3px !important; margin-left: 0 !important");if($current_page=="cshrc/"){$("textarea").each(function(a,b){$(this).attr("style","height: 20em !important")})}if($current_page_full=="/acl/"||$current_page_full=="/acl/edit_user.cgi"){$('.ui_grid_table.table-hardcoded .ui_grid_row .ui_grid_cell input[type="checkbox"], .table-hardcoded .col_value input[type="checkbox"]').each(function(a,b){$(this).attr("style","vertical-align: bottom !important")})}if($current_page=="custom/"){$(".panel-body > .ui_grid_table.table-hardcoded").each(function(a,b){$(this).attr("style","margin-top: 3px !important")});$(".panel-body td > .ui_form").each(function(){$(this).attr("style","padding-top: 0 !important")});$(".panel-body > a.ui_link").each(function(a,b){$(this).addClass("btn btn-inverse btn-tiny ui_link_replaced").removeClass("ui_link");$(this).text($(this).text().replace(/\.$/,""));$(this).parent().contents().filter(function(){return this.nodeType==3}).remove();if(($(this).attr("href").indexOf("edit_cmd.cgi?new")===0)){$(this).html('<i class="fa fa-terminal"> </i> '+$(this).text())}if(($(this).attr("href").indexOf("edit_file.cgi?new")===0)){$(this).html('<i class="fa fa-edit"> </i> '+$(this).text())}if(($(this).attr("href").indexOf("edit_sql.cgi?new")===0)){$(this).html('<i class="fa fa-database"> </i> '+$(this).text())}});$(".panel-body a.ui_link:not(.ui_link_replaced)").each(function(a,b){$(this).text($(this).text().replace(/\.$/,""));if($(this).attr("href").indexOf("edit_file.cgi?id")===0){$(this).contents().filter(function(){return this.nodeType==3}).remove();$(this).html('<i class="btn btn-tiny fa fa-pencil"> </i>').find("i").attr("style","font-family: FontAwesome; font-size: 12px;");$(this).parents("tr").find("td").attr("style","text-align: center !important")}})}if($current_page=="init/"){$('.table.table-striped.table-condensed tr.tr_tag td.td_tag input[type="checkbox"]').each(function(a,b){$(this).attr("style","vertical-align: middle !important")})}if($current_page_full.indexOf(".cgi")===-1&&$current_page=="useradmin/"){$('.table.table-striped.table-condensed tbody tr td input[type="checkbox"], .table.table-striped.table-condensed tbody tr td label').each(function(a,b){$(this).parents("td").attr("style","padding: 2px 2px 0 2px !important")});$(".table.table-striped.table-condensed tbody tr td label").each(function(a,b){$(this).attr("style","vertical-align: bottom !important")})}if($current_page=="proc/"||($current_page=="fetchmail/"&&$("link").attr("href")=="/faviconu.ico")){if($current_page=="proc/"){$("a.ui_link + b").addClass("btn btn-success").css("margin-top","3px").css("margin-left","3px");$("b + a.ui_link").addClass("btn btn-success").css("margin-top","3px").css("margin-left","3px");if($('.panel-body > b:first-child:contains("Display")').length>0){$(".panel-body > b:first-child").remove()}if($(".panel-body").find("b:first-child").text()=="PID"){$(".panel-body").find("b:first-child").addClass("btn btn-success").css("margin-top","3px")}}$(".panel-body").contents().filter(function(){return this.nodeType==3}).remove();$(".panel-body > a.ui_link").css("margin-left","3px")}$("td.td_tag").contents().filter(function(){return this.nodeType==3}).next("input").css("margin-left","3px");$(".ui_buttons_hr > td > table.table-hardcoded > tbody > tr > td[nowrap]").each(function(){$(this).parents("table").attr("style","margin-bottom: 15px !important")});$("textarea.form-control.ui_textarea").next('button[type="button"].btn-default').each(function(){$(this).prev("textarea").attr("style","margin-bottom: 1px !important");$(this).attr("style","width:100% !important; padding-top: 0; height:30px !important")});$("textarea.form-control.ui_textarea").next("br").next('button[type="button"].btn-default').each(function(){$(this).prev("textarea").attr("style","margin-bottom: 1px !important");$(this).attr("style","width:100% !important; padding-top: 0; height:30px !important")});$(".table-hardcoded > tbody > tr > td > input.form-control.ui_textbox").next('button[type="button"].ui_button').each(function(){$(this).attr("style","margin-top: 2px !important")});$(".table-hardcoded > tbody > tr > td.col_label b a, .ui_table_row td a").each(function(a,b){if(!$(this).attr("href")){$(this).attr("style","color: #333; text-decoration: none; cursor:default")}});$('input[name="all_weekdays"], .ui_grid_cell > table.table-condensed, table.table-hardcoded table.table-condensed, select[multiple][name="days"]').each(function(){$(this).parent("td").attr("style","vertical-align: top !important")});$('input[type="submit"]').each(function(){$(this).addClass("btn btn-default")});$("table tr th").each(function(){if($(this).text()){$(this).attr("style","width: auto")}});$("table thead th:not(.table-title)").each(function(){$(this).css("border-top","none");$(this).css("border-bottom","none")});$('a[href^="/help.cgi"]').attr("onclick","").unbind("click").addClass("help_popup");$(".help_popup").each(function(){$(this).attr("style","color: #333; text-decoration: none; cursor:help")});$(".help_popup").on("click",function(a){a.preventDefault();a.stopPropagation();$(".popover").popover("destroy");jQuery.ajaxSetup({async:false});var c=$(this),d=$(this).attr("href"),b=$(this).parents("td");b.append('<span class="_tmp_help_content hidden"></span>');b.find("._tmp_help_content").load($(this).attr("href"));$help_title=b.find("._tmp_help_content .ui_subheading").first().text();$help_body=b.find("._tmp_help_content title").remove();$help_body=b.find("._tmp_help_content h3").remove();$help_body=b.find("._tmp_help_content hr").remove();$help_body=b.find("._tmp_help_content a").removeAttr("href").css("text-decoration","none").css("color","#333").css("font-style","italic");$help_body=b.find("._tmp_help_content").html();b.find("._tmp_help_content").remove();$(this).popover({html:true,title:function(){return $help_title},content:function(){return $help_body},container:"body",placement:"right"});$(this).popover("show");$(".popover-content").slimScroll({maxHeight:"360px",size:"2px",wheelStep:18,touchScrollStep:180,alwaysVisible:false,railVisible:true});$(this).on("hidden.bs.popover",function(){$(this).popover("destroy")});$("body").on("click",function(){$(".popover").popover("destroy")})});if($current_page=="fdisk/"||$current_page=="postfix/"||$current_page=="pam/"||$current_page=="syslog/"){$("p > a[href], table + a[href], div.panel-body > a.ui_link").each(function(a,b){$(this).text($(this).text().replace(/\.$/,""))})}$('.ui_form > a, .ui_grid_cell > :not(input) + a.ui_link, .ui_grid_cell > a.select_all, .ui_grid_cell > a.select_invert, .ui_grid_cell > :not(input) + a[href*=".cgi"], .ui_grid_cell > a[href*=".cgi"]:first-child, .tab-pane > p > a, .tab-pane > a.ui_link, .tab-pane > .table-condensed > a.ui_link, .panel-body > p > a.ui_link, a.select_all, a.select_invert').each(function(){if($current_page!="passwd/"&&$(this).text()&&$current_page_full!="/mailboxes/"&&$current_page_full!="/usermin/list_configs.cgi"&&!$(this).hasClass("help_popup")){$(this).addClass("btn btn-inverse btn-tiny ui_link_replaced");$(this).text($(this).text().replace(/\.$/,""));if($('.ui_form:contains("|")').length||$current_page=="custom/"){$(this).parent().contents().filter(function(){return this.nodeType==3}).remove()}if($(this).hasClass("select_all")){$(this).html('<i class="fa fa-check-square-o"> </i> '+$(this).text())}if($(this).hasClass("select_invert")){$(this).html('<i class="fa fa-share-square-o"> </i> '+$(this).text())}if(($(this).attr("href").indexOf("edit")===0&&$(this).attr("href").indexOf("edit_allow")!==0)||$(this).attr("href").indexOf("master_form")===0||$(this).attr("href").indexOf("slave_form")===0||$(this).attr("href").indexOf("stub_form")===0||$(this).attr("href").indexOf("forward_form")===0||$(this).attr("href").indexOf("delegation_form")===0||$(this).attr("href").indexOf("mass_form")===0||$(this).attr("href").indexOf("newdb_form")===0){$(this).html('<i class="fa fa-plus-square-o"> </i> '+$(this).text())}else{if($(this).attr("href").indexOf("edit_allow")===0){$(this).html('<i class="fa fa-shield"> </i> '+$(this).text())}else{if($(this).attr("href").indexOf("mass_ucreate")===0){$(this).html('<i class="fa fa-user"> </i> '+$(this).text())}}}if($current_page=="custom/"){if(($(this).attr("href").indexOf("edit_cmd.cgi?new")===0)){$(this).html('<i class="fa fa-terminal"> </i> '+$(this).text())}if(($(this).attr("href").indexOf("edit_file.cgi?new")===0)){$(this).html('<i class="fa fa-edit"> </i> '+$(this).text())}if(($(this).attr("href").indexOf("edit_sql.cgi?new")===0)){$(this).html('<i class="fa fa-database"> </i> '+$(this).text())}}}});$("a.ui_link_replaced").each(function(){if($(this).prev().is("b")){$(this).prev("b").addClass("btn btn-success btn-tiny")}if($(this).next().is("b")){$(this).next("b").addClass("btn btn-success btn-tiny")}});if($current_page=="fetchmail/"&&$("link").attr("href")=="/faviconw.ico"){$("a.ui_link").each(function(){$(this).addClass("btn btn-inverse btn-tiny ui_link_replaced").css("margin-bottom","10px").css("margin-top","4px");$(this).text($(this).text().replace(/\.$/,""));$(this).parent().contents().filter(function(){return this.nodeType==3}).remove()})}$('select.ui_select[name="days"]').each(function(){$(this).parent("td").attr("style","vertical-align: top !important")});if($current_page=="mailboxes/"||$current_page=="mailbox/"){$("body").find("form").removeAttr("onsubmit");$header_tables=$("body").find('input[name="from"]').parents(".tab-pane").parent("td");$header_tables.children("table").hide();$.each($header_tables.find("input, textarea, select"),function(){if(!$(this).hasClass("ui_select")&&!$(this).attr("onclick")&&$(this).attr("type")!="checkbox"&&$(this).attr("type")!="submit"){$(this).attr("style","width: 60%").addClass("inline-block")}if($(this).attr("onclick")){$(this).addClass("inline-block")}});window.onbeforeunload=null;if($("body").find('input.ui_hidden[name="html_edit"]').val()==1){tinyMCE.init({mode:"exact",elements:"body",auto_focus:"body",menubar:false,height:420,plugins:["advlist autolink lists link image charmap print hr anchor pagebreak fullscreen","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern"],toolbar1:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | fullscreen print media | forecolor backcolor | visualblocks charmap code"})}$("body").find('input[name="from"]').parents(".tab-pane").prev("table").remove();$("body").find('input[name="from"]').parents(".tab-pane ").parent("td").find("div, table").each(function(a,b){$(this).find(".col_label").css("width","20%");$(this).find('input[name="subject"]').parent("td").prev("td").find("b").attr("style","font-size: 14px !important");$(this).find('input[name="subject"]').parents("table").show();$(this).find('input[name="subject"]').parent("td").find(".submitter").remove()});$editor_mode_link_container=$("body").find('textarea[id="body"]').parents("table").find("thead > tr > th:last-child");$editor_mode_link=$editor_mode_link_container.find("a").addClass("editor_mode_link");$editor_mode_link_container.parent("tr").find("th:first-child").append($editor_mode_link);$editor_mode_link_container.remove();$editor_mode_link_button=$("body").find('textarea[id="body"]').parents("table").find(".editor_mode_link");$editor_mode_link_button_state=$editor_mode_link_button.attr("href")?$editor_mode_link_button.attr("href").indexOf("html=0"):false;$editor_mode_link_button.attr("title",$editor_mode_link_button.text()).addClass("editor_mode_link_button pull-right btn "+($editor_mode_link_button_state==-1?"btn-success":"btn-primary")).html('<i class="fa fa-lg '+($editor_mode_link_button_state==-1?"fa-font":"fa-align-justify")+'"> </i>');$("body").find('textarea[id="body"]').parents("table").find("thead > tr > th").find("b").css("padding-left","45px");$(".editor_mode_link_button").tooltip();$fileinput_container=$("body").find('a[onclick="return add_ss_attachment()"]');$fileinput_container.parent("td").contents().filter(function(){return this.nodeType==3}).remove();$fileinput_container.remove();$fileinput_add_another_attachment=$("body").find('a[onclick="return add_attachment()"]');$fileinput_add_another_attachment.addClass("btn btn-default");$fileinput_add_another_attachment.text($fileinput_add_another_attachment.text().replace(/\.$/,""));if($current_page_full.indexOf("view_mail.cgi")){$table_title_header_container=$(".ui_form").find("div.table-responsive").first().find(".table-title");$table_title_links_container=$table_title_header_container.next();$table_title_links_container.contents().filter(function(){return this.nodeType==3}).remove();$table_title_links_container.find("a").addClass("table_title_links pull-right btn btn-info btn-tiny");$table_title_links=$table_title_links_container.html();$table_title_header_container.append($table_title_links);$table_title_links_container.remove();$table_title_header_container_text_padding=35;$(".table-title > a.table_title_links").each(function(){$table_title_header_container_text_padding=235});$(".table_title_links_container a").each(function(){$table_title_header_container_text_padding=$table_title_header_container_text_padding+$(this).width()});$table_title_header_container.find("b").css("padding-left",$table_title_header_container_text_padding);$table_title_header_container=$(".ui_form").find("div.table-responsive").first().next("div.table-responsive").find("th:first-child");$table_title_links_container=$(".ui_form").find("div.table-responsive").first().next("div.table-responsive").find("th:last-child");if($(".ui_form").find("div.table-responsive").first().next("div.table-responsive").find("th").length==2){$table_title_links_container.remove()}else{}$table_title_links_container.find("a").addClass("table_title_links pull-right btn btn-success btn-tiny");$table_title_links=$table_title_links_container.html();$table_title_header_container.append($table_title_links);$table_title_header_container_text_padding=10;$table_title_header_container.find("a").each(function(){$table_title_header_container_text_padding=$table_title_header_container_text_padding+$(this).width()});$table_title_header_container.find("b").css("padding-left",$table_title_header_container_text_padding);$("a.table_title_links").on("click",function(){loading_right_start()})}$("td > a").on("click",function(){if($(this).attr("onclick")=="return add_attachment()"){}$("input[type=file]").each(function(){if(!$(this).parent("a").hasClass("file-input-wrapper")){$(this).bootstrapFileInput()}})})}var resizeDelay;$(window).resize(function(){clearTimeout(resizeDelay);resizeDelay=setTimeout(function(){container_fluid_size()},1000)});$("input[type=file]").bootstrapFileInput();setTimeout(function(){if(typeof onLoad==="function"&&typeof onResize==="function"){onLoad();$(window).resize(function(a){onResize()})}},600);if(($current_page_full.indexOf(".cgi")===-1||$current_page_full=="/init/index.cgi")&&($current_page=="virtual-server/"||$current_page=="init/"||$current_page=="mount/"||$current_page=="quota/"||$current_page=="fsdump/"||$current_page=="inittab/"||$current_page=="logrotate/"||$current_page=="mailcap/"||$current_page=="cron/"||$current_page=="software/"||$current_page=="syslog/"||$current_page=="useradmin/"||$current_page=="apache/"||$current_page=="webalizer/"||$current_page=="cpan/"||$current_page=="htaccess-htpasswd/"||$current_page=="fdisk/")||$current_page_full=="/man/search.cgi"||$current_page_full=="/proc/index_tree.cgi"||$current_page_full=="/proc/index_user.cgi"||$current_page_full=="/proc/index_size.cgi"||$current_page_full=="/proc/index_cpu.cgi"||$current_page_full=="/proc/index_search.cgi"||$current_page_full=="/software/search.cgi"||$current_page_full=="/virtual-server/index.cgi"||$current_page_full=="/virtual-server/list_users.cgi"||$current_page_full=="/virtual-server/edit_newplan.cgi"||$current_page_full=="/virtual-server/edit_newfeatures.cgi"||$current_page_full=="/virtual-server/edit_newtmpl.cgi"||$current_page_full=="/virtual-server/backuplog.cgi"){$("table").each(function(){if($(this).find("thead").length&&$(this).find("thead tr th").length>2){$.fn.dataTableExt.sErrMode="throw";$(this).dataTable({order:[],aaSorting:[],bDestroy:true,bPaginate:false,bInfo:false,bFilter:false,destroy:true});$(this).find("th").each(function(){if(!$(this).text()){$(this).css("opacity","0").css("cursor","default")}})}})}if(non_updater_mode()){loading_right_end()}}$(window.parent.$("#iframe")).on("load",function(){if(window.parent.$('iframe[name="page"]').contents().find("title").text()=="ConfigServer Security & Firewall"&&window.parent.$('iframe[name="page"]').contents().find("body.csf").length===0){$("#iframe").contents().find("body").on("click",'input[type="submit"], a[href^="index.cgi?action=temp"]',function(){$('iframe[name="page"]').css("display","none");$(".loader-container").css("display","block");$('a[data-refresh="true"]').find("i").addClass("fa-spin")});window.parent.$('a[href="csf/"]').parent("li").addClass("sub_active").append('<span class="current"></span>').parent("ul.sub").show().prev("li").addClass("active");$csf=window.parent.$('iframe[name="page"]').contents();$csf.find("head").append('				<link rel="shortcut icon" href="'+$webprefix+'/faviconw.ico">				<meta name="viewport" content="width=device-width, initial-scale=1.0">				<link href="'+$webprefix+'/unauthenticated/css/bootstrap.min.css?v900" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/fontawesome.min.css?v900" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/codemirror.min.css?v900" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/jquery.datatables.min.css?v900" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/default.min.css?v900" rel="stylesheet" type="text/css">			');window.parent.clear_menu_select();$csf.find('body:not(".mobile-menu-toggler")').on("click",function(){window.parent.hide_mobile_menu()});$csf.find("style").remove();$csf.find("body").addClass("csf").css("background","#f5f5f5");$csf.find("body").wrapInner('<div class="container-fluid col-lg-10 col-lg-offset-1">');$csf.find(".container-fluid").wrapInner('<div class="panel panel-default">');$csf.find(".panel-default").wrapInner('<div class="panel-body">');$csf.find(".panel-default").css("border-color","#e6e6e6").css("border-top-width","4px").prepend('<div class="panel-heading" style="text-align:center"><font size="+2">ConfigServer Security & Firewall</font></div>');$csf.find(".panel-body > img:first-child, .panel-body > b").remove();$csf.find("#CSFajax").css("border","1px solid #ddd");$csf.find("body table").each(function(){$(this).addClass("table table-striped table-condensed").removeAttr("style")});$csf.find("body table tr td, body table tr th").each(function(){$(this).removeAttr("style")});$csf.find("body table tr").each(function(){$(this).removeAttr("bgcolor")});$csf.find(".panel-body > h2:first-child").each(function(){$(this).text($(this).text().replace(":",""))});$csf.find(".csf table.table-striped.table-condensed th").each(function(){if($(this).html()=="Time To Live"){$(this).css("min-width","100px")}if($(this).html()=="&nbsp;"){$(this).css("min-width","70px")}});function a(){$csf.find("#CSFajax").css("max-height",$(window).outerHeight()-$(window).outerHeight()/2.4+"px");container_fluid_size()}var b;$(window).resize(function(){clearTimeout(b);b=setTimeout(function(){a()},1000)});a();$csf.find(".csf table.table-striped.table-condensed tbody > tr > td > p").each(function(){if($(this).text().indexOf("Your Score")>=0){$(this).next("p").remove();$(this).next("table").remove();$(this).next("table").remove();$(this).next("p").css("text-align","center")}});if($csf.find(".csf h2").text().indexOf("Ports listening for external connections and the executables running behind them")!==-1){$csf.find("table").each(function(){if(!$(this).find("thead").length){var c=$(this),d=$(this).find("tbody tr:first-child");c.attr("style","width: 100% !important");c.attr("style","min-width: 100% !important");c.prepend("<thead>"+d.html()+"</thead>");$(this).find("thead td").replaceTagName("th");d.remove();$(this).dataTable({order:[],aaSorting:[],bDestroy:true,bPaginate:false,bInfo:false,destroy:true})}})}if($csf.find(".csf .table.table-striped.table-condensed tbody th:eq(1)").text().indexOf("A/D")!==-1&&$csf.find(".csf .table.table-striped.table-condensed tbody th:eq(2)").text().indexOf("IP address")!==-1){$csf.find("table").each(function(){if(!$(this).find("thead").length){var c=$(this),d=$(this).find("tbody tr:first-child");c.prepend("<thead>"+d.html()+"</thead>");d.remove();$(this).dataTable({order:[],aaSorting:[],bDestroy:true,bPaginate:false,bInfo:false,destroy:true});c.find('img[src^="csfimages/"]').each(function(){$(this).attr("src",$(this).attr("src").replace("/csfimages/","csfimages/"))})}})}$csf.find(".csf td.section-gap:first-child").each(function(){$(this).parent("tr:first-child").remove();$(this).parent("tr:last-child").remove()});$csf.find(".csf td.section-title").each(function(){$(this).parent("tr").prev("tr").find("td.section-gap").parent("tr").remove();$(this).parent("tr").prev("tr").find("td.section-gap").parent("tr").remove()});$csf.find('.csf input[type="text"]').each(function(){if($(this).attr("id")=="allowip"){$(this).removeAttr("style").attr("style","border-color: #8cac8c; background-color: #93b893;")}if($(this).attr("style")=="background-color: pink"){$(this).removeAttr("style").attr("style","color: #fff; border-color: #d4a09f; background-color: #e0a9a8;")}if($(this).attr("id")=="ignoreip"){$(this).removeAttr("style").attr("style","border-color: #b3dae5; background-color: #bfd9e1;")}});$csf.find("body table tr th").each(function(){if(!$(this).parents("tbody").find("form").length&&$(this).text().indexOf("Upgrade")>=0){$(this).parents("table").prev("br").remove();$(this).parents("table").remove()}});$csf.find(".csf pre").each(function(){if($(this).text().indexOf("csf: v")>=0){$csf_version=$(this).text().match(/((?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+))$/)[0];$(this).remove()}});$csf.find('a[href$="/csf/changelog.txt"]').addClass("btn btn-xs btn-default").attr("style","padding:0 12px; height:19px;font-size:11px").text("View changelog");$csf.find(".csf .panel-heading font").each(function(){if($(this).text().indexOf("ConfigServer Security & Firewall")>=0){}});$csf.find("div.panel-body p:last-child").each(function(){if($(this).text().indexOf("2006-20")>=0){$(this).css("font-size","12px").css("margin-top","12px")}});$csf.find(".csf .paginationstyle > select").each(function(){$(this).attr("style","vertical-align: baseline !important")});$csf.find(".csf #paginatediv2 > a").each(function(){$(this).attr("style","vertical-align: baseline !important")});$csf.find(".csf p > select").each(function(){$(this).attr("style","vertical-align: baseline !important")});$csf.find(".csf #paginatediv > select").each(function(){$(this).attr("style","vertical-align: top !important; margin-top: 0 !important")});$csf.find('img[src="csfimages/loader.gif"]').each(function(){$(this).attr("src",""+$webprefix+"/images/loader-horizontal.gif").css("margin-left","10px")});$csf.find(".paginationstyle a").each(function(){$(this).addClass("btn btn-default")});$csf.find('img[src^="lfd_"], img[src^="/csf/lfd_"]').each(function(){$(this).parents("table").removeClass("table-striped")});$csf.find(".csf fieldset legend b").each(function(){if($(this).text().indexOf("Edit ConfigServer Firewall")>=0){$submit_changes=$csf.find('input[value="Change"]');$submit_changes.addClass("csf-submit_changes");$submit_changes.on("click",function(){$csf.find('input[value="saveconf"]').parent("form").submit()})}});setTimeout(function(){$csf.find('textarea[name="formdata"]').each(function(c,f){var e=$(this);$parent_width=e.parent("td").width();var d=CodeMirror.fromTextArea(f,{mode:{name:"rpm-spec"},tabMode:"indent",matchBrackets:true,lineNumbers:true,lineWrapping:true,indentUnit:4});$window_height=($(window).outerHeight()-($(window).outerHeight()/2));d.setSize($parent_width,$window_height);$(window).resize(function(){$parent_width=e.parent("td").width();$window_height=($(window).outerHeight()-($(window).outerHeight()/2));d.setSize($parent_width,$window_height)})})},200);loading_right_end();detect_current_left_menu("csf/")}});